# O010-shopping-cart 人工验证测试文档

**@spec O010-shopping-cart**
**测试类型**: 手工验证 (Manual Testing)
**测试环境**: Taro H5 (http://localhost:10086)
**测试日期**: 2026-01-06
**测试人员**: _____________

---

## 测试前准备

### 环境准备
```bash
# 1. 启动 Taro H5 开发服务器
cd /Users/lining/qoder/Cinema_Bussiness_Center_Platform/miniapp-ordering-taro
npm run dev:h5

# 2. 访问地址: http://localhost:10086
# 3. 使用 Chrome DevTools 移动端模拟器（推荐: iPhone 12 或 Pixel 5）
```

### 数据准备
- [ ] 清空浏览器本地存储 (Application → Local Storage → Clear All)
- [ ] 确保商品列表页至少有 2 个可购买商品
- [ ] 确保用户已登录（如需要）

---

## 测试用例 1: 购物车完整流程验证

**场景ID**: E2E-O010-001
**优先级**: P1
**用例描述**: 验证从商品列表添加商品、查看浮动按钮、打开购物车抽屉、修改数量、跳转结算的完整流程

### 测试步骤

#### 步骤 1: 验证初始状态
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 1.1 | 打开商品列表页 `/pages/menu/index` | 页面正常加载，显示商品列表 | | ☐ |
| 1.2 | 检查浮动购物车按钮 | 购物车为空时，浮动按钮**不显示** | | ☐ |

#### 步骤 2: 添加商品到购物车
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 2.1 | 点击第一个商品的 "+" 按钮 | 按钮变为数量控制器（- 1 +） | | ☐ |
| 2.2 | 检查浮动购物车按钮 | 浮动按钮**显示**在页面底部 | | ☐ |
| 2.3 | 检查角标数字 | 角标显示 "1" | | ☐ |
| 2.4 | 检查总金额 | 总金额显示为商品单价（如 ¥48.00） | | ☐ |

#### 步骤 3: 增加商品数量
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 3.1 | 点击第一个商品的 "+" 按钮 2 次 | 数量控制器显示 "3" | | ☐ |
| 3.2 | 检查角标数字 | 角标更新为 "3" | | ☐ |
| 3.3 | 检查总金额 | 总金额更新为单价 × 3（如 ¥144.00） | | ☐ |

#### 步骤 4: 添加第二个商品
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 4.1 | 点击第二个商品的 "+" 按钮 | 第二个商品显示数量控制器 "1" | | ☐ |
| 4.2 | 检查角标数字 | 角标更新为 "4"（3+1） | | ☐ |
| 4.3 | 检查总金额 | 总金额 = 商品1单价×3 + 商品2单价×1 | | ☐ |

#### 步骤 5: 打开购物车抽屉
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 5.1 | 点击浮动购物车按钮 | 购物车抽屉从底部滑入（350ms 动画） | | ☐ |
| 5.2 | 检查遮罩层 | 显示黑色半透明遮罩 + 毛玻璃效果 | | ☐ |
| 5.3 | 检查抽屉标题 | 标题栏显示 "订单汇总" | | ☐ |
| 5.4 | 检查商品列表 | 显示 2 个商品，每个商品包含图片、名称、价格、数量控制器 | | ☐ |

#### 步骤 6: 在抽屉中修改商品数量
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 6.1 | 点击第一个商品的 "-" 按钮 | 数量减少为 "2" | | ☐ |
| 6.2 | 检查角标数字 | 角标更新为 "3"（2+1） | | ☐ |
| 6.3 | 检查小计金额 | 小计金额自动更新 | | ☐ |
| 6.4 | 检查实付金额 | 实付金额自动更新（大号字体，黄色） | | ☐ |

#### 步骤 7: 删除商品
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 7.1 | 点击第二个商品的 "-" 按钮直到数量为 0 | 第二个商品从列表中移除 | | ☐ |
| 7.2 | 检查商品列表 | 只剩 1 个商品 | | ☐ |
| 7.3 | 检查角标数字 | 角标更新为 "2" | | ☐ |

#### 步骤 8: 跳转到结算页
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 8.1 | 点击 "立即支付" 按钮 | 跳转到订单确认页 `/pages/order-confirm/index` | | ☐ |
| 8.2 | 检查购物车状态 | 购物车数据保持（刷新页面后数据不丢失） | | ☐ |

---

## 测试用例 2: 边界情况测试

### 测试 2.1: 99+ 角标显示
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 1 | 添加商品数量到 100 | 角标显示 "99+" | | ☐ |
| 2 | 检查浮动按钮布局 | 角标不溢出，布局正常 | | ☐ |

### 测试 2.2: 空购物车状态
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 1 | 添加商品后再删除至数量为 0 | 浮动按钮消失 | | ☐ |
| 2 | 打开购物车抽屉 | 显示空购物车提示 "🛒 空空如也" | | ☐ |
| 3 | 检查结算区域 | 结算区域不显示 | | ☐ |

### 测试 2.3: 防抖点击保护
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 1 | 快速连续点击 "+" 按钮 5 次 | 每次点击间隔 300ms，数量正确增加 | | ☐ |
| 2 | 检查购物车状态 | 数量与点击次数一致，无重复添加 | | ☐ |

### 测试 2.4: 状态持久化
| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 1 | 添加商品到购物车 | 购物车有数据 | | ☐ |
| 2 | 刷新页面 | 购物车数据保持不变 | | ☐ |
| 3 | 检查 LocalStorage | 存储键为 `taro_cart`，包含 `timestamp` 字段 | | ☐ |
| 4 | 模拟 7 天后 (修改 timestamp) | 购物车数据自动清空 | | ☐ |

---

## 测试用例 3: 会员中心购物车入口

**场景ID**: E2E-O010-002
**优先级**: P2
**用例描述**: 验证会员中心页面的购物车快捷入口功能

| 步骤 | 操作 | 预期结果 | 实际结果 | 通过 |
|------|------|---------|---------|------|
| 1 | 添加商品到购物车 | 购物车有 1 个商品 | | ☐ |
| 2 | 导航到会员中心页 `/pages/member/index` | 页面正常加载 | | ☐ |
| 3 | 查找购物车快捷入口 | 快捷入口区域存在 | | ☐ |
| 4 | 点击购物车入口 | 打开购物车抽屉（如已集成）或跳转到订单页 | | ☐ |
| 5 | 检查购物车内容 | 显示之前添加的商品 | | ☐ |
| 6 | 点击关闭按钮 | 抽屉关闭，返回会员中心页 | | ☐ |

**注意**: 此功能可能未完全集成，如果购物车入口未连接到 CartDrawer，标记为 "部分实现"。

---

## UI/UX 验证清单

### 视觉样式
- [ ] 浮动购物车按钮：琥珀色背景 (#f59e0b)，圆角 32rpx，阴影效果
- [ ] 购物车抽屉：zinc-900 背景 (#18181b)，顶部圆角 40rpx
- [ ] 遮罩层：黑色 80% 透明度，毛玻璃效果 (backdrop-blur: 16rpx)
- [ ] 角标：zinc-950 背景，琥珀色文字，最小宽度 64rpx
- [ ] 数量控制器：zinc-800 圆形按钮，按压缩放效果 (scale: 0.9)
- [ ] "立即支付" 按钮：琥珀色背景，宽度 100%，圆角 24rpx

### 交互动画
- [ ] 抽屉滑入动画：350ms cubic-bezier(0.16, 1, 0.3, 1)
- [ ] 遮罩淡入动画：300ms ease
- [ ] 按钮按压效果：scale(0.98)，200ms
- [ ] 数量变化：平滑过渡，无闪烁

### 响应式布局
- [ ] iPhone 移动端尺寸适配正常
- [ ] 商品列表滚动流畅
- [ ] 购物车抽屉滚动流畅 (ScrollView enhanced)
- [ ] 横屏模式下布局正常

---

## 兼容性测试

### 浏览器兼容性
| 浏览器 | 版本 | 通过 | 备注 |
|--------|------|------|------|
| Chrome Desktop | Latest | ☐ | |
| Chrome Mobile | Latest | ☐ | |
| Safari Mobile (iOS) | 14+ | ☐ | |
| 微信小程序 | Latest | ☐ | 需单独测试 |

### 设备兼容性
| 设备 | 分辨率 | 通过 | 备注 |
|------|--------|------|------|
| iPhone 12 | 390x844 | ☐ | |
| iPhone SE | 375x667 | ☐ | |
| Pixel 5 | 393x851 | ☐ | |

---

## 性能测试

| 指标 | 目标 | 实际 | 通过 |
|------|------|------|------|
| 添加商品响应时间 | ≤ 300ms | | ☐ |
| 购物车抽屉打开时间 | ≤ 350ms | | ☐ |
| 购物车状态持久化时间 | ≤ 100ms | | ☐ |
| 页面加载时间 | ≤ 2s | | ☐ |

---

## Bug 记录

| Bug ID | 严重程度 | 描述 | 复现步骤 | 状态 |
|--------|---------|------|---------|------|
| | | | | |
| | | | | |
| | | | | |

**严重程度说明**:
- P0: 阻塞性，功能完全不可用
- P1: 严重，核心流程受影响
- P2: 一般，影响用户体验
- P3: 轻微，UI 瑕疵或边缘情况

---

## 测试总结

### 测试统计
- **总用例数**: ___
- **通过数**: ___
- **失败数**: ___
- **阻塞数**: ___
- **通过率**: ____%

### 测试结论
- [ ] **通过**: 所有核心功能正常，可以发布
- [ ] **有条件通过**: 存在非阻塞性问题，可以发布但需修复
- [ ] **不通过**: 存在阻塞性问题，不建议发布

### 遗留问题
1.
2.
3.

### 测试人员签字
- **测试人员**: _____________
- **测试日期**: 2026-01-06
- **审核人员**: _____________

---

**文档版本**: 1.0
**最后更新**: 2026-01-06
**关联规格**: O010-shopping-cart
**关联测试场景**: E2E-O010-001, E2E-O010-002
