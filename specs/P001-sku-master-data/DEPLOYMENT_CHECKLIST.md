# éƒ¨ç½²æ£€æŸ¥æ¸…å•: SKUä¸»æ•°æ®ç®¡ç†(æ”¯æŒBOM)

**åŠŸèƒ½**: P001-sku-master-data
**ç‰ˆæœ¬**: v1.0.0-alpha
**æ—¥æœŸ**: 2025-12-24

---

## ğŸ“‹ é¢„éƒ¨ç½²æ£€æŸ¥

### 1. æ•°æ®åº“å‡†å¤‡

#### âœ… Supabaseé¡¹ç›®é…ç½®
- [ ] Supabaseé¡¹ç›®å·²åˆ›å»º
- [ ] è·å–é¡¹ç›®URLå’ŒAPI Key
- [ ] æ•°æ®åº“è¿æ¥æµ‹è¯•é€šè¿‡

#### âœ… è¿ç§»è„šæœ¬æ‰§è¡Œ
æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹4ä¸ªè„šæœ¬:

- [ ] **V001__create_skus_table.sql**
  - åˆ›å»ºskusä¸»è¡¨
  - éªŒè¯å‘½ä»¤: `SELECT COUNT(*) FROM skus;` (åº”è¿”å›0æˆ–å·²æœ‰æ•°æ®)

- [ ] **V002__create_bom_combo_tables.sql**
  - åˆ›å»ºbom_componentså’Œcombo_itemsè¡¨
  - éªŒè¯å‘½ä»¤: `SELECT COUNT(*) FROM bom_components;` å’Œ `SELECT COUNT(*) FROM combo_items;`

- [ ] **V003__create_unit_conversions.sql**
  - åˆ›å»ºunit_conversionsè¡¨å¹¶æ’å…¥æµ‹è¯•æ•°æ®
  - éªŒè¯å‘½ä»¤: `SELECT COUNT(*) FROM unit_conversions;` (åº”è¿”å›28æ¡)

- [ ] **V004__insert_test_data.sql**
  - å¯¼å…¥21ä¸ªæµ‹è¯•SKU
  - éªŒè¯å‘½ä»¤:
    ```sql
    SELECT sku_type, COUNT(*) FROM skus GROUP BY sku_type;
    -- é¢„æœŸ: raw_material: 5, packaging: 5, finished_product: 8, combo: 3
    ```

#### âœ… æ•°æ®å®Œæ•´æ€§éªŒè¯
```sql
-- æ£€æŸ¥BOMç»„ä»¶æ•°é‡
SELECT COUNT(*) FROM bom_components;
-- é¢„æœŸ: 19æ¡

-- æ£€æŸ¥å¥—é¤å­é¡¹æ•°é‡
SELECT COUNT(*) FROM combo_items;
-- é¢„æœŸ: 9æ¡

-- æ£€æŸ¥æˆæœ¬è®¡ç®—å‡†ç¡®æ€§
SELECT name, standard_cost, waste_rate
FROM skus
WHERE sku_type = 'finished_product'
ORDER BY name;
```

---

### 2. åç«¯éƒ¨ç½²

#### âœ… ç¯å¢ƒé…ç½®
- [ ] Java 21å®‰è£…å¹¶é…ç½®
- [ ] Maven 3.8+å®‰è£…
- [ ] application.ymlé…ç½®æ­£ç¡®:
  ```yaml
  supabase:
    url: https://your-project.supabase.co
    key: your-anon-key
  ```

#### âœ… ä¾èµ–å®‰è£…
```bash
cd backend
./mvnw clean install
```
- [ ] ä¾èµ–ä¸‹è½½æˆåŠŸ
- [ ] ç¼–è¯‘æ— é”™è¯¯

#### âœ… è¿è¡Œæµ‹è¯•
```bash
./mvnw test
```
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (å½“å‰0ä¸ªæµ‹è¯•,å¾…å®ç°)

#### âœ… å¯åŠ¨æœåŠ¡
```bash
./mvnw spring-boot:run
```
- [ ] æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] æ—¥å¿—æ— ERROR
- [ ] è®¿é—® http://localhost:8080/actuator/health è¿”å›å¥åº·çŠ¶æ€

#### âš ï¸ APIéªŒè¯ (å¾…Controllerå®ç°åæµ‹è¯•)
- [ ] `GET /api/skus` è¿”å›SKUåˆ—è¡¨
- [ ] `GET /api/skus?sku_type=raw_material` è¿”å›åŸæ–™SKU
- [ ] `GET /api/skus/{id}` è¿”å›SKUè¯¦æƒ…
- [ ] `GET /api/skus/{id}/bom` è¿”å›BOMé…ç½® (æˆå“SKU)

---

### 3. å‰ç«¯éƒ¨ç½²

#### âœ… ç¯å¢ƒé…ç½®
- [ ] Node.js 18+å®‰è£…
- [ ] npm 9+å®‰è£…

#### âœ… ä¾èµ–å®‰è£…
```bash
cd frontend
npm install
```
- [ ] ä¾èµ–å®‰è£…æˆåŠŸ
- [ ] æ— ä¸¥é‡è­¦å‘Š

#### âœ… ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»º `.env.local`:
```env
VITE_API_BASE_URL=http://localhost:8080/api
VITE_USE_MOCK=false
```
- [ ] ç¯å¢ƒå˜é‡æ–‡ä»¶åˆ›å»º
- [ ] API URLé…ç½®æ­£ç¡®

#### âœ… æ„å»ºæµ‹è¯•
```bash
npm run build
```
- [ ] æ„å»ºæˆåŠŸ
- [ ] distç›®å½•ç”Ÿæˆ

#### âœ… å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
- [ ] æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] è®¿é—® http://localhost:5173
- [ ] é¡µé¢åŠ è½½æ— é”™è¯¯

#### âš ï¸ åŠŸèƒ½éªŒè¯ (å¾…ç»„ä»¶å®ç°åæµ‹è¯•)
- [ ] SKUåˆ—è¡¨é¡µåŠ è½½
- [ ] SKUç±»å‹ç­›é€‰å¯ç”¨
- [ ] åˆ›å»ºSKUè¡¨å•å¯è®¿é—®
- [ ] SKUç±»å‹é€‰æ‹©å™¨æ˜¾ç¤º

---

### 4. é›†æˆæµ‹è¯•

#### âš ï¸ ç«¯åˆ°ç«¯æµç¨‹ (å¾…å®ç°)
- [ ] **åˆ›å»ºåŸæ–™SKU**:
  - å¡«å†™åç§°ã€ç¼–ç ã€å•ä½ã€æ ‡å‡†æˆæœ¬
  - ä¿å­˜æˆåŠŸ
  - åˆ—è¡¨æ˜¾ç¤ºæ–°SKU,ç±»å‹æ ‡ç­¾ä¸º"åŸæ–™"

- [ ] **åˆ›å»ºæˆå“SKU**:
  - é€‰æ‹©ç±»å‹"æˆå“"
  - é…ç½®BOM(æ·»åŠ 3ä¸ªç»„ä»¶)
  - è®¾ç½®æŸè€—ç‡5%
  - æŸ¥çœ‹æˆæœ¬è‡ªåŠ¨è®¡ç®—
  - ä¿å­˜æˆåŠŸ

- [ ] **åˆ›å»ºå¥—é¤SKU**:
  - é€‰æ‹©ç±»å‹"å¥—é¤"
  - æ·»åŠ 3ä¸ªå­é¡¹
  - æŸ¥çœ‹æˆæœ¬æ±‡æ€»
  - ä¿å­˜æˆåŠŸ

- [ ] **é—¨åº—èŒƒå›´éªŒè¯**:
  - é…ç½®æˆå“é—¨åº—èŒƒå›´
  - ç‚¹å‡»éªŒè¯æŒ‰é’®
  - æ˜¾ç¤ºéªŒè¯ç»“æœ

---

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### 1. æ•°æ®åº“è¿ç§»

```bash
# åœ¨ç”Ÿäº§ç¯å¢ƒSupabaseæ‰§è¡Œè¿ç§»è„šæœ¬
# âš ï¸ å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯

# æ–¹å¼1: Supabaseæ§åˆ¶å° (æ¨è)
# 1. ç™»å½•ç”Ÿäº§ç¯å¢ƒSupabase
# 2. SQL Editor
# 3. ä¾æ¬¡æ‰§è¡ŒV001-V004è„šæœ¬

# æ–¹å¼2: Flywayè‡ªåŠ¨è¿ç§»
./mvnw flyway:migrate
```

### 2. åç«¯éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§åŒ…
cd backend
./mvnw clean package -Pprod

# éƒ¨ç½²JARæ–‡ä»¶
java -jar target/hallstore-0.0.1-SNAPSHOT.jar

# æˆ–ä½¿ç”¨Docker
docker build -t cinema-backend .
docker run -p 8080:8080 cinema-backend
```

### 3. å‰ç«¯éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§åŒ…
cd frontend
npm run build

# éƒ¨ç½²åˆ°Nginx/Vercel/Netlify
# ç¤ºä¾‹: Nginxé…ç½®
# location / {
#   root /var/www/cinema-frontend/dist;
#   try_files $uri $uri/ /index.html;
# }
```

---

## âœ… éƒ¨ç½²åéªŒè¯

### æ•°æ®éªŒè¯
```sql
-- ç”Ÿäº§ç¯å¢ƒæ•°æ®æ£€æŸ¥
SELECT
  sku_type,
  COUNT(*) as count,
  AVG(standard_cost) as avg_cost
FROM skus
GROUP BY sku_type;
```

### APIå¥åº·æ£€æŸ¥
```bash
# åç«¯å¥åº·æ£€æŸ¥
curl http://your-domain.com/actuator/health

# APIå¯ç”¨æ€§æ£€æŸ¥
curl http://your-domain.com/api/skus?page=1&pageSize=10
```

### å‰ç«¯å¯ç”¨æ€§
- [ ] è®¿é—®å‰ç«¯URL
- [ ] æ£€æŸ¥æ§åˆ¶å°æ— é”™è¯¯
- [ ] æ£€æŸ¥ç½‘ç»œè¯·æ±‚æˆåŠŸ
- [ ] åŠŸèƒ½æ­£å¸¸ä½¿ç”¨

---

## ğŸ”„ å›æ»šè®¡åˆ’

### æ•°æ®åº“å›æ»š
```sql
-- å¦‚éœ€å›æ»š,æŒ‰é€†åºåˆ é™¤è¡¨
DROP TABLE IF EXISTS combo_items CASCADE;
DROP TABLE IF EXISTS bom_components CASCADE;
DROP TABLE IF EXISTS unit_conversions CASCADE;
-- æ³¨æ„: skusè¡¨å¯èƒ½åŒ…å«ç°æœ‰æ•°æ®,è°¨æ…æ“ä½œ
```

### åº”ç”¨å›æ»š
```bash
# å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
git checkout <previous-commit>
# é‡æ–°æ„å»ºéƒ¨ç½²
```

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### æ•°æ®åº“æŒ‡æ ‡
- SKUæ€»æ•°
- BOMç»„ä»¶æ€»æ•°
- å¥—é¤å­é¡¹æ€»æ•°
- æŸ¥è¯¢å“åº”æ—¶é—´

### APIæŒ‡æ ‡
- APIå“åº”æ—¶é—´ (P50, P95, P99)
- é”™è¯¯ç‡
- è¯·æ±‚é‡ (QPS)

### å‰ç«¯æŒ‡æ ‡
- é¡µé¢åŠ è½½æ—¶é—´
- ç”¨æˆ·äº¤äº’å»¶è¿Ÿ
- JavaScripté”™è¯¯ç‡

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```
æ£€æŸ¥é¡¹:
- [ ] Supabase URLæ­£ç¡®
- [ ] API Keyæœ‰æ•ˆ
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] Supabaseé¡¹ç›®æœªæš‚åœ
```

#### 2. è¿ç§»è„šæœ¬æ‰§è¡Œå¤±è´¥
```
è§£å†³æ–¹æ¡ˆ:
1. æ£€æŸ¥è¡¨æ˜¯å¦å·²å­˜åœ¨
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
3. éªŒè¯SQLè¯­æ³•
4. æ£€æŸ¥ä¾èµ–é¡ºåº
```

#### 3. æˆæœ¬è®¡ç®—ä¸å‡†ç¡®
```
æ’æŸ¥æ­¥éª¤:
1. éªŒè¯BOMç»„ä»¶æ•°æ®
2. æ£€æŸ¥æŸè€—ç‡é…ç½®
3. æŸ¥çœ‹å•ä½æˆæœ¬å¿«ç…§
4. é‡æ–°è®¡ç®—æˆæœ¬
```

---

## ğŸ“ éƒ¨ç½²æ—¥å¿—

### éƒ¨ç½²è®°å½•æ¨¡æ¿

```
éƒ¨ç½²æ—¥æœŸ: _____________
éƒ¨ç½²äººå‘˜: _____________
ç¯å¢ƒ: ç”Ÿäº§/æµ‹è¯•
ç‰ˆæœ¬: v1.0.0-alpha

æ•°æ®åº“è¿ç§»:
- [ ] V001 æ‰§è¡Œæ—¶é—´: _______
- [ ] V002 æ‰§è¡Œæ—¶é—´: _______
- [ ] V003 æ‰§è¡Œæ—¶é—´: _______
- [ ] V004 æ‰§è¡Œæ—¶é—´: _______

åç«¯éƒ¨ç½²:
- [ ] æ„å»ºæˆåŠŸ
- [ ] å¯åŠ¨æ—¶é—´: _______
- [ ] å¥åº·æ£€æŸ¥: é€šè¿‡/å¤±è´¥

å‰ç«¯éƒ¨ç½²:
- [ ] æ„å»ºæˆåŠŸ
- [ ] éƒ¨ç½²æ—¶é—´: _______
- [ ] å¯ç”¨æ€§æ£€æŸ¥: é€šè¿‡/å¤±è´¥

é—®é¢˜è®°å½•:
_______________________________
_______________________________

å¤‡æ³¨:
_______________________________
_______________________________
```

---

**æœ€åæ›´æ–°**: 2025-12-24
**è´Ÿè´£äºº**: DevOps Team
