# Research Phase: 管理后台基础框架

**Date**: 2025-12-10
**Feature**: 管理后台基础框架
**Status**: Completed

## 技术选型研究

### React 18 + TypeScript 5.0 技术栈

**决策**: 采用React 18 + TypeScript 5.0作为核心框架
**理由**:
- React 18提供并发渲染和Suspense等新特性，提升用户体验
- TypeScript 5.0提供更强大的类型支持和开发体验
- 耀莱影城项目要求强制使用此技术栈

**替代方案考虑**: Vue 3 + TypeScript - 被宪章明确排除

### Ant Design 6.x 组件库

**决策**: 使用Ant Design 6.1.0作为UI组件库
**理由**:
- 企业级React组件库，组件丰富且设计统一
- 6.x版本性能优化，支持React 18新特性
- 内置Layout、Menu、Breadcrumb等布局组件
- 完善的中文文档和社区支持

**关键组件**:
- `Layout`: 实现整体布局框架
- `Menu`: 左侧导航菜单
- `Breadcrumb`: 面包屑导航
- `Sider`: 可折叠侧边栏

### Tailwind CSS 4 样式方案

**决策**: 使用Tailwind CSS 4.1.17进行样式开发
**理由**:
- 原子化CSS，避免自定义CSS文件
- 与Ant Design 6.x兼容性良好
- 响应式设计支持完善
- 项目宪章强制要求

### 状态管理架构

**决策**: Zustand + TanStack Query组合架构
**理由**:
- Zustand轻量简洁，适合客户端状态管理
- TanStack Query专精服务端状态管理
- 避免Redux的复杂样板代码
- 符合项目宪章要求

**状态划分**:
- `layoutStore`: 布局状态(侧边栏折叠、菜单选择等)
- 各业务模块使用TanStack Query管理服务端状态

### 路由管理

**决策**: React Router 6进行路由管理
**理由**:
- React Router 6是最新稳定版本
- 支持嵌套路由，便于面包屑生成
- 与React 18兼容性良好
- 社区文档完善

### 测试框架

**决策**: Playwright进行E2E测试
**理由**:
- 项目宪章强制要求
- 跨浏览器支持完善
- API设计简洁易用
- 支持并行测试提升效率

## 布局架构研究

### 左侧导航设计模式

**决策**: 采用可折叠的侧边栏 + 主菜单 + 子菜单结构
**设计要点**:
- 默认展开状态，支持手动折叠
- 当前页面菜单项高亮显示
- 支持二级子菜单展开
- 图标 + 文字的菜单项显示

### 面包屑导航设计

**决策**: 基于路由自动生成面包屑
**实现方案**:
- 使用React Router的useMatch hooks获取路由信息
- 建立路由到面包屑的映射关系
- 支持点击面包屑节点进行导航
- 超长路径自动截断处理

### 响应式布局策略

**决策**: 移动端自动折叠侧边栏 + 抽屉菜单
**断点设计**:
- `lg`(1200px+): 完整布局显示
- `md`(768px-1199px): 可折叠侧边栏
- `sm`(<768px): 侧边栏转为抽屉模式

## 性能优化研究

### 组件懒加载

**决策**: 使用React.lazy + Suspense进行页面级代码分割
**实施策略**:
- 各业务模块页面单独打包
- 添加Loading组件提升用户体验
- 首屏只加载Dashboard和Layout

### 状态持久化

**决策**: 使用localStorage持久化布局状态
**存储内容**:
- 侧边栏展开/折叠状态
- 用户菜单偏好设置
- 不存储敏感业务数据

## 代码规范研究

### TypeScript类型定义

**决策**: 建立完整的类型系统
**类型组织**:
- `types/layout.ts`: 布局相关类型
- `types/menu.ts`: 菜单配置类型
- `types/breadcrumb.ts`: 面包屑类型

### 组件设计模式

**决策**: 函数式组件 + Hooks模式
**设计原则**:
- 单一职责原则，组件功能明确
- 可复用性设计，props接口清晰
- 自定义hooks封装复杂逻辑

### 文件命名规范

**决策**: Pascal命名组件文件，camelCase命名工具文件
**文件结构**:
- 组件文件夹: `ComponentName/`
- 组件文件: `ComponentName.tsx`
- 样式文件: `ComponentName.module.css`(如有必要)
- 类型文件: `ComponentName.types.ts`

## 兼容性研究

### 浏览器支持

**决策**: 支持现代浏览器(Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)
**理由**:
- 这些浏览器支持所有需要的现代JavaScript特性
- 覆盖99%以上的目标用户群体
- 避免为过时浏览器编写polyfill

### Ant Design主题定制

**决策**: 使用Ant Design的token系统进行主题定制
**定制内容**:
- 品牌色彩配置
- 字体大小和间距
- 组件圆角和阴影
- 响应式断点调整

## 总结

研究阶段已确定所有技术选型和实现方案，所有关键技术决策都有明确的理由和替代方案分析。技术栈完全符合耀莱影城项目宪章要求，没有技术风险或不确定性。

**下一步**: 基于研究结果进行详细的数据模型和API合约设计。