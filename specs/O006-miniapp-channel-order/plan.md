# Implementation Plan: å°ç¨‹åºæ¸ é“å•†å“è®¢å•é€‚é…

**Branch**: `O006-miniapp-channel-order` | **Date**: 2026-01-02 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/O006-miniapp-channel-order/spec.md`

**Note**: This plan was generated by `/speckit.plan` command after `/speckit.clarify` session on 2026-01-02.

## Summary

å°†å°ç¨‹åºç‚¹é¤åŠŸèƒ½ä»ŽåŽŸç”Ÿå¾®ä¿¡å°ç¨‹åºä»£ç è¿ç§»åˆ° Taro 4.1.9 æ¡†æž¶ï¼ŒåŒæ—¶å°†æ•°æ®æºä»Ž `beverages` è¡¨åˆ‡æ¢åˆ° `channel_product_config` è¡¨ã€‚ä¿ç•™UIåŽŸåž‹ï¼ˆä½äºŽ `miniapp-ordering/` æ–‡ä»¶å¤¹ï¼‰çš„è§†è§‰è®¾è®¡å’Œäº¤äº’é€»è¾‘ï¼Œä½¿ç”¨ Taro + React + TypeScript å®Œå…¨é‡å†™ä»£ç ï¼Œæ”¯æŒæ›´å¹¿æ³›çš„å•†å“ç±»åž‹ï¼ˆé…’/å’–å•¡/é¥®æ–™/å°é£Ÿ/é¤å“ï¼‰å’Œ7ç§è§„æ ¼ç±»åž‹ã€‚æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼šæµè§ˆå•†å“ â†’ é€‰æ‹©è§„æ ¼ â†’ åŠ å…¥è´­ç‰©è½¦ â†’ æäº¤è®¢å• â†’ Mockæ”¯ä»˜ â†’ æŸ¥çœ‹çŠ¶æ€ â†’ å–é¤ã€‚

## Technical Context

**Language/Version**:
- Cç«¯ï¼ˆå°ç¨‹åºï¼‰: TypeScript 5.4.0 + Taro 4.1.9 + React 18.3.1 (å¾®ä¿¡å°ç¨‹åº + H5)
- åŽç«¯ API: Java 17 + Spring Boot 3.3.5 (ä¾èµ– O005 å·²å®žçŽ°çš„ç«¯ç‚¹)

**Primary Dependencies**:
- Cç«¯æ ¸å¿ƒ: Taro 4.1.9, React 18.3.1, Zustand 4.5.5 (çŠ¶æ€ç®¡ç†), TanStack Query 5.90.12 (æ•°æ®æŸ¥è¯¢)
- UI ç»„ä»¶: Taro UI / @tarojs/components (Taro åŽŸç”Ÿç»„ä»¶)
- å·¥å…·åº“: dayjs (æ—¥æœŸå¤„ç†), lodash-es (å·¥å…·å‡½æ•°)
- çŽ°æœ‰ä¾èµ–: `hall-reserve-taro/src/utils/request.ts` (ç»Ÿä¸€è¯·æ±‚å°è£…), `hall-reserve-taro/src/services/authService.ts` (è®¤è¯æœåŠ¡)

**UI Prototype Migration**:
- åŽŸåž‹æ¥æº: å¾®ä¿¡å°ç¨‹åºåŽŸç”Ÿä»£ç ï¼Œä½äºŽ `miniapp-ordering/` æ–‡ä»¶å¤¹
- è¿ç§»ç­–ç•¥: ä¿ç•™UIæ ·å¼å’Œäº¤äº’é€»è¾‘ï¼Œä½¿ç”¨ Taro + React å®Œå…¨é‡å†™
- é¡µé¢ç»“æž„: 4ä¸ªæ ¸å¿ƒé¡µé¢ï¼ˆèœå•åˆ—è¡¨ã€å•†å“è¯¦æƒ…ã€è´­ç‰©è½¦ã€ä¼šå‘˜-è®¢å•åˆ—è¡¨ï¼‰
- æ ·å¼è¿ç§»: æ‰‹åŠ¨æå–æ ·å¼å˜é‡åˆ° `hall-reserve-taro/src/styles/variables.scss`
- å›¾ç‰‡è¿ç§»: å¤åˆ¶UIå›¾æ ‡åˆ° `hall-reserve-taro/src/assets/images/`

**Performance Goals**:
- å•†å“åˆ—è¡¨é¦–å±åŠ è½½: â‰¤2ç§’ (20æ¡å•†å“å«å›¾ç‰‡)
- å•†å“è¯¦æƒ…é¡µåŠ è½½: â‰¤1ç§’
- è®¢å•çŠ¶æ€æ›´æ–°å»¶è¿Ÿ: â‰¤5ç§’ (è½®è¯¢é—´éš” 5-10ç§’)
- å®Œæ•´ä¸‹å•æµç¨‹: ç”¨æˆ·å¯åœ¨2åˆ†é’Ÿå†…å®Œæˆ

**Constraints**:
- å¿…é¡»éµå¾ªåŠŸèƒ½åˆ†æ”¯ç»‘å®š (O006-miniapp-channel-order)
- å¿…é¡»ä½¿ç”¨ Taro æ¡†æž¶ (Cç«¯ æŠ€æœ¯æ ˆå¼ºåˆ¶è¦æ±‚)
- å¿…é¡»ä½¿ç”¨ Zustand + TanStack Query çŠ¶æ€ç®¡ç†
- å¿…é¡»åŒ…å«ä»£ç å½’å±žæ ‡è¯† (`@spec O006-miniapp-channel-order`)
- ä¾èµ– O005 åŽç«¯ API å¯ç”¨æ€§ (API ç«¯ç‚¹å·²å®žçŽ°å¹¶æ­£å¸¸å·¥ä½œ)
- UIæ ·å¼ä¸ŽåŠŸèƒ½å¿…é¡»ä¸¥æ ¼éµå¾ª `miniapp-ordering/` åŽŸåž‹

**Scale/Scope**:
- åŠŸèƒ½èŒƒå›´: å°ç¨‹åºç«¯å•†å“æµè§ˆã€è§„æ ¼é€‰æ‹©ã€è´­ç‰©è½¦ç®¡ç†ã€è®¢å•æäº¤ã€çŠ¶æ€æŸ¥è¯¢
- ä»£ç å˜æ›´: çº¦10ä¸ªæ–‡ä»¶ (ç±»åž‹å®šä¹‰3ä¸ªã€æœåŠ¡å±‚2ä¸ªã€çŠ¶æ€ç®¡ç†2ä¸ªã€é¡µé¢ç»„ä»¶3ä¸ª)
- å¤æ‚åº¦: ä¸­ç­‰ (å‚è€ƒ O003 å®žçŽ°æ¨¡å¼,ä¸»è¦å·¥ä½œæ˜¯åŽŸåž‹è¿ç§»+æ•°æ®æºåˆ‡æ¢+ç±»åž‹æ‰©å±•)

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### å¿…é¡»æ»¡è¶³çš„å®ªæ³•åŽŸåˆ™æ£€æŸ¥ï¼š

- [x] **åŠŸèƒ½åˆ†æ”¯ç»‘å®š**: å½“å‰åˆ†æ”¯ `O006-miniapp-channel-order`,active_spec æŒ‡å‘ `specs/O006-miniapp-channel-order/spec.md`,specId ä¸€è‡´ âœ…
- [x] **ä»£ç å½’å±žæ ‡è¯†**: æ‰€æœ‰æ–°å¢ž/ä¿®æ”¹æ–‡ä»¶å¿…é¡»åŒ…å« `@spec O006-miniapp-channel-order` æ ‡è¯† âœ…
- [x] **ç»„ä»¶åŒ–æž¶æž„**: é¡µé¢ç»„ä»¶éµå¾ª Taro ç»„ä»¶è§„èŒƒ,å¯å¤ç”¨ç»„ä»¶å•ç‹¬æå– âœ…
- [x] **å‰ç«¯æŠ€æœ¯æ ˆåˆ†å±‚**: æœ¬é¡¹ç›®ä¸º Cç«¯ å°ç¨‹åºå¼€å‘,å¼ºåˆ¶ä½¿ç”¨ Taro 4.1.9 æ¡†æž¶,ä¸æ¶‰åŠ Bç«¯ ä»£ç  âœ…
- [x] **æ•°æ®é©±åŠ¨çŠ¶æ€ç®¡ç†**: ä½¿ç”¨ Zustand 4.5.5 ç®¡ç†å®¢æˆ·ç«¯çŠ¶æ€,TanStack Query 5.90.12 ç®¡ç†æœåŠ¡å™¨çŠ¶æ€ âœ…
- [x] **ä»£ç è´¨é‡å·¥ç¨‹åŒ–**: å¿…é¡»é€šè¿‡ TypeScript 5.4.0 ç±»åž‹æ£€æŸ¥ã€ESLint æ£€æŸ¥ã€Prettier æ ¼å¼åŒ– âœ…
- [x] **åŽç«¯æŠ€æœ¯æ ˆçº¦æŸ**: åŽç«¯ API ç”± O005 æä¾›,ä½¿ç”¨ Spring Boot 3.3.5 + Supabase,æœ¬é¡¹ç›®æ— éœ€ä¿®æ”¹åŽç«¯ âœ…

### Cç«¯ ç‰¹å®šè¦æ±‚æ£€æŸ¥ï¼š

- [x] **Taro å¤šç«¯é€‚é…**: å¿…é¡»è‡³å°‘æ”¯æŒå¾®ä¿¡å°ç¨‹åºå’Œ H5 ä¸¤ç«¯ âœ… (å·²åœ¨ spec ä¸­æ˜Žç¡®)
- [x] **Taro API ä½¿ç”¨**: å¿…é¡»ä½¿ç”¨ Taro.request/Taro.setStorageSync ç­‰ç»Ÿä¸€ API,ä¸å¾—ç›´æŽ¥ä½¿ç”¨æµè§ˆå™¨ API âœ…
- [x] **æ ·å¼è§„èŒƒ**: ä½¿ç”¨ rpx å•ä½é€‚é…,é¿å…ä¸å…¼å®¹ CSS ç‰¹æ€§ âœ…
- [x] **è®¤è¯è¦æ±‚**: Cç«¯ å¿…é¡»å®žçŽ°ç”¨æˆ·è®¤è¯(é™é»˜ç™»å½•ã€Token ç®¡ç†ã€Token åˆ·æ–°),å·²åœ¨ spec ä¾èµ–ä¸­è¯´æ˜Ž âœ…
- [x] **UIåŽŸåž‹è¿ç§»**: å¿…é¡»ä¸¥æ ¼éµå¾ª `miniapp-ordering/` åŽŸåž‹çš„UIæ ·å¼å’Œäº¤äº’é€»è¾‘,ä½¿ç”¨Taroå®Œå…¨é‡å†™ âœ…

### æ€§èƒ½ä¸Žæ ‡å‡†æ£€æŸ¥ï¼š

- [x] **æ€§èƒ½æ ‡å‡†**: å•†å“åˆ—è¡¨é¦–å±åŠ è½½â‰¤2s,è¯¦æƒ…é¡µåŠ è½½â‰¤1s,è®¢å•çŠ¶æ€æ›´æ–°å»¶è¿Ÿâ‰¤5s âœ… (å·²åœ¨ spec æˆåŠŸæ ‡å‡†ä¸­å®šä¹‰)
- [x] **å®‰å…¨æ ‡å‡†**: API è¯·æ±‚åŒ…å« Token è®¤è¯,Token è¿‡æœŸè‡ªåŠ¨åˆ·æ–°,å…³é”®æ“ä½œæ—¥å¿—è®°å½• âœ… (å·²åœ¨ spec FR-028/FR-029 ä¸­è¦æ±‚)
- [x] **å¯è®¿é—®æ€§æ ‡å‡†**: Taro å°ç¨‹åºé»˜è®¤æ”¯æŒæ— éšœç¢è®¿é—®,å…³é”®æ“ä½œæŒ‰é’®æä¾›æ˜Žç¡®çš„æ–‡æœ¬æ ‡ç­¾ âœ…

### ç‰¹æ®Šè¯´æ˜Žï¼š

**æœ¬é¡¹ç›®ä¸é€‚ç”¨çš„å®ªæ³•åŽŸåˆ™** (æ˜Žç¡®æ ‡æ³¨ N/A):
- N/A **Bç«¯ ç®¡ç†åŽå°æŠ€æœ¯æ ˆ**: æœ¬é¡¹ç›®ä¸ºçº¯ Cç«¯ å°ç¨‹åºå¼€å‘,ä¸æ¶‰åŠ Bç«¯ ä»£ç 
- N/A **Spring Boot åŽç«¯å¼€å‘**: æœ¬é¡¹ç›®ä¸ºçº¯å‰ç«¯é€‚é…,åŽç«¯ API ç”± O005 æä¾›
- N/A **Supabase ç›´æŽ¥é›†æˆ**: å°ç¨‹åºé€šè¿‡åŽç«¯ API é—´æŽ¥è®¿é—® Supabase,ä¸ç›´æŽ¥é›†æˆ
- N/A **Claude Code Skills å¼€å‘è§„èŒƒ**: æœ¬é¡¹ç›®ä¸ºä¸šåŠ¡åŠŸèƒ½å¼€å‘,éžå·¥å…·å¼€å‘

**æ— è¿è§„æƒ…å†µ**: æ‰€æœ‰é€‚ç”¨çš„å®ªæ³•åŽŸåˆ™å‡å·²æ»¡è¶³,æ— éœ€å¡«å†™ Complexity Tracking è¡¨æ ¼ âœ…

## Project Structure

### Documentation (this feature)

```text
specs/[###-feature]/
â”œâ”€â”€ plan.md              # This file (/speckit.plan command output)
â”œâ”€â”€ research.md          # Phase 0 output (/speckit.plan command)
â”œâ”€â”€ data-model.md        # Phase 1 output (/speckit.plan command)
â”œâ”€â”€ quickstart.md        # Phase 1 output (/speckit.plan command)
â”œâ”€â”€ contracts/           # Phase 1 output (/speckit.plan command)
â””â”€â”€ tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
hall-reserve-taro/              # Taro å°ç¨‹åºé¡¹ç›®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ channel-product-menu/       # æ¸ é“å•†å“èœå•é¡µï¼ˆå¯¹åº”åŽŸåž‹èœå•åˆ—è¡¨é¡µï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ index.less
â”‚   â”‚   â”‚   â””â”€â”€ index.config.ts
â”‚   â”‚   â”œâ”€â”€ channel-product-detail/     # å•†å“è¯¦æƒ…é¡µï¼ˆå¯¹åº”åŽŸåž‹å•†å“è¯¦æƒ…é¡µï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ index.less
â”‚   â”‚   â”‚   â””â”€â”€ index.config.ts
â”‚   â”‚   â”œâ”€â”€ order-cart/                 # è´­ç‰©è½¦é¡µï¼ˆå¯¹åº”åŽŸåž‹è´­ç‰©è½¦é¡µï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ index.less
â”‚   â”‚   â”‚   â””â”€â”€ index.config.ts
â”‚   â”‚   â””â”€â”€ member/
â”‚   â”‚       â””â”€â”€ my-orders/              # è®¢å•åˆ—è¡¨é¡µï¼ˆå¯¹åº”åŽŸåž‹ä¼šå‘˜-è®¢å•åˆ—è¡¨ï¼‰
â”‚   â”‚           â”œâ”€â”€ index.tsx
â”‚   â”‚           â”œâ”€â”€ index.less
â”‚   â”‚           â””â”€â”€ index.config.ts
â”‚   â”œâ”€â”€ components/         # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ProductCard/   # å•†å“å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SpecSelector/  # è§„æ ¼é€‰æ‹©å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CartDrawer/    # è´­ç‰©è½¦æŠ½å±‰ç»„ä»¶
â”‚   â”‚   â””â”€â”€ CategoryTabs/  # åˆ†ç±»æ ‡ç­¾æ ç»„ä»¶
â”‚   â”œâ”€â”€ services/           # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ channelProductService.ts   # æ¸ é“å•†å“ API (âœ¨ æ–°å¢ž)
â”‚   â”‚   â””â”€â”€ orderService.ts            # è®¢å• API (ðŸ“ ä¿®æ”¹,ä½¿ç”¨ channelProductId)
â”‚   â”œâ”€â”€ stores/             # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ orderCartStore.ts          # è´­ç‰©è½¦ Store (ðŸ“ ä¿®æ”¹,é€‚é…æ¸ é“å•†å“)
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useChannelProducts.ts      # æ¸ é“å•†å“æŸ¥è¯¢ Hook (âœ¨ æ–°å¢ž)
â”‚   â”‚   â””â”€â”€ useChannelProductDetail.ts # å•†å“è¯¦æƒ…æŸ¥è¯¢ Hook (âœ¨ æ–°å¢ž)
â”‚   â”œâ”€â”€ types/              # TypeScript ç±»åž‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ channelProduct.ts          # æ¸ é“å•†å“ç±»åž‹ (âœ¨ æ–°å¢ž)
â”‚   â”‚   â””â”€â”€ order.ts                   # è®¢å•ç±»åž‹ (ðŸ“ ä¿®æ”¹,ä½¿ç”¨ channelProductId)
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.ts                 # ç»Ÿä¸€è¯·æ±‚å°è£… (â™»ï¸  å¤ç”¨)
â”‚   â”‚   â””â”€â”€ priceCalculator.ts         # ä»·æ ¼è®¡ç®—å·¥å…· (âœ¨ æ–°å¢ž)
â”‚   â”œâ”€â”€ styles/             # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ variables.scss             # æ ·å¼å˜é‡ (âœ¨ æ–°å¢ž,ä»ŽåŽŸåž‹æå–)
â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”‚   â”‚   â””â”€â”€ images/                    # å›¾ç‰‡èµ„æº (âœ¨ æ–°å¢ž,ä»ŽåŽŸåž‹å¤åˆ¶)
â”‚   â””â”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚       â””â”€â”€ channelProductConstants.ts # æ¸ é“å•†å“å¸¸é‡ (âœ¨ æ–°å¢ž)
â”œâ”€â”€ config/                 # Taro é…ç½®
â”‚   â””â”€â”€ index.ts            # é¡¹ç›®é…ç½®
â””â”€â”€ project.config.json     # å¾®ä¿¡å°ç¨‹åºé…ç½®

specs/O006-miniapp-channel-order/  # æœ¬è§„æ ¼æ–‡æ¡£
â”œâ”€â”€ spec.md                 # åŠŸèƒ½è§„æ ¼
â”œâ”€â”€ plan.md                 # å®žæ–½è®¡åˆ’ (æœ¬æ–‡ä»¶)
â”œâ”€â”€ research.md             # ç ”ç©¶æ–‡æ¡£
â”œâ”€â”€ data-model.md           # æ•°æ®æ¨¡åž‹
â”œâ”€â”€ quickstart.md           # å¿«é€Ÿä¸Šæ‰‹
â”œâ”€â”€ contracts/
â”‚   â””â”€â”€ api.yaml            # API å¥‘çº¦
â””â”€â”€ tasks.md                # ä»»åŠ¡åˆ†è§£ (ç”± /speckit.tasks ç”Ÿæˆ)

miniapp-ordering/           # UI åŽŸåž‹å‚è€ƒ (ä»…ç”¨äºŽå‚è€ƒ,ä¸ä¿®æ”¹)
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ menu-list/          # èœå•åˆ—è¡¨é¡µåŽŸåž‹
â”‚   â”œâ”€â”€ product-detail/     # å•†å“è¯¦æƒ…é¡µåŽŸåž‹
â”‚   â”œâ”€â”€ cart/               # è´­ç‰©è½¦é¡µåŽŸåž‹
â”‚   â””â”€â”€ member/
â”‚       â””â”€â”€ orders/         # è®¢å•åˆ—è¡¨é¡µåŽŸåž‹
â””â”€â”€ assets/                 # åŽŸåž‹å›¾ç‰‡èµ„æº (å¤åˆ¶åˆ° hall-reserve-taro/src/assets/)
```

**å›¾ä¾‹è¯´æ˜Ž**:
- âœ¨ æ–°å¢žæ–‡ä»¶
- ðŸ“ ä¿®æ”¹æ–‡ä»¶ (é€‚é…æ¸ é“å•†å“)
- â™»ï¸  å¤ç”¨æ–‡ä»¶ (æ— éœ€ä¿®æ”¹)

**Structure Decision**: Taro å¤šç«¯å°ç¨‹åºé¡¹ç›®,ä½¿ç”¨ React + TypeScript å¼€å‘ã€‚ä»£ç ä»Žå¾®ä¿¡å°ç¨‹åºåŽŸç”Ÿä»£ç å®Œå…¨é‡å†™,ä¿ç•™ UI æ ·å¼å’Œäº¤äº’é€»è¾‘ã€‚ç»„ä»¶éµå¾ª Taro è§„èŒƒ,çŠ¶æ€ç®¡ç†ä½¿ç”¨ Zustand + TanStack Query,æ ·å¼ä½¿ç”¨ rpx å•ä½é€‚é…ä¸åŒå±å¹•ã€‚

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| [e.g., 4th project] | [current need] | [why 3 projects insufficient] |
| [e.g., Repository pattern] | [specific problem] | [why direct DB access insufficient] |
