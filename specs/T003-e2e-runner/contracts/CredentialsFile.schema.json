{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://cinema-platform/schemas/e2e-runner/CredentialsFile.schema.json",
  "title": "CredentialsFile",
  "description": "Credentials file for E2E test execution (should be gitignored)",
  "type": "object",
  "required": ["env_profile"],
  "properties": {
    "env_profile": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "description": "Environment identifier (must match E2ERunConfig.env_profile)",
      "examples": ["saas-staging", "onprem-uat"]
    },
    "users": {
      "type": "array",
      "description": "User credentials for login tests",
      "items": {
        "$ref": "#/definitions/UserCredential"
      },
      "examples": [[
        {
          "role": "admin",
          "username": "admin@cinema.com",
          "password": "SecurePassword123!",
          "display_name": "Admin User"
        },
        {
          "role": "user",
          "username": "user@cinema.com",
          "password": "UserPassword456!"
        }
      ]]
    },
    "api_keys": {
      "type": "array",
      "description": "API keys for API tests",
      "items": {
        "$ref": "#/definitions/ApiKeyCredential"
      },
      "examples": [[
        {
          "service": "supabase",
          "api_key": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "api_secret": "sk_test_abcdef123456"
        }
      ]]
    }
  },
  "definitions": {
    "UserCredential": {
      "type": "object",
      "required": ["role", "username", "password"],
      "properties": {
        "role": {
          "type": "string",
          "description": "User role (e.g., 'admin', 'user', 'guest')",
          "examples": ["admin", "user", "manager", "guest"]
        },
        "username": {
          "type": "string",
          "description": "Username or email",
          "examples": ["admin@cinema.com", "user123"]
        },
        "password": {
          "type": "string",
          "description": "Password (plain text - file must be secured with chmod 600)",
          "minLength": 1
        },
        "display_name": {
          "type": "string",
          "description": "Optional display name for the user"
        }
      }
    },
    "ApiKeyCredential": {
      "type": "object",
      "required": ["service", "api_key"],
      "properties": {
        "service": {
          "type": "string",
          "description": "API service name (e.g., 'supabase', 'stripe')",
          "examples": ["supabase", "stripe", "aws", "google-cloud"]
        },
        "api_key": {
          "type": "string",
          "description": "API key value",
          "minLength": 1
        },
        "api_secret": {
          "type": "string",
          "description": "Optional API secret"
        }
      }
    }
  },
  "additionalProperties": false
}
