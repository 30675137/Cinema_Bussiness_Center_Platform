# è®¢å•åˆ—è¡¨/çŠ¶æ€æŸ¥çœ‹åŠŸèƒ½ - äº§å“è¯¦ç»†è®¾è®¡æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-27  
> **åŠŸèƒ½çŠ¶æ€**: âœ… å·²å®Œæˆ  
> **åŠŸèƒ½åˆ†æ”¯**: U001-reservation-order-management

---

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 åŠŸèƒ½å®šä½

| ç»´åº¦ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½åç§°** | é¢„çº¦è®¢å•åˆ—è¡¨ä¸çŠ¶æ€æŸ¥çœ‹ |
| **æ‰€å±æ¨¡å—** | å½±é™¢ä¸šåŠ¡ä¸­å° â†’ è®¢å•ä¸å±¥çº¦ç®¡ç† â†’ U001-é¢„çº¦å•ç®¡ç† |
| **å‰ç«¯è·¯ç”±** | `/reservation-orders` (åˆ—è¡¨) / `/reservation-orders/:id` (è¯¦æƒ…) |
| **åç«¯æ¥å£** | `/api/admin/reservations` |
| **å½“å‰å®Œæˆåº¦** | âœ… 100% å·²å®Œæˆ |

### 1.2 åŠŸèƒ½ç›®æ ‡

ä¸º B ç«¯è¿è¥äººå‘˜æä¾›é¢„çº¦è®¢å•çš„é›†ä¸­ç®¡ç†å…¥å£ï¼Œæ”¯æŒï¼š
1. æŸ¥çœ‹æ‰€æœ‰é¢„çº¦è®¢å•åˆ—è¡¨
2. å¤šç»´åº¦æ¡ä»¶ç­›é€‰
3. è®¢å•çŠ¶æ€å®æ—¶å±•ç¤º
4. å¿«é€Ÿè·³è½¬è®¢å•è¯¦æƒ…
5. æ‰§è¡Œç¡®è®¤/å–æ¶ˆç­‰æ“ä½œ

### 1.3 ç”¨æˆ·æ•…äº‹

**ä½œä¸º** å½±é™¢è¿è¥äººå‘˜ï¼Œ**æˆ‘å¸Œæœ›** åœ¨åå°ç®¡ç†å¹³å°èƒ½å¤ŸæŸ¥çœ‹æ‰€æœ‰é¢„çº¦å•çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬é¢„çº¦å•å·ã€å®¢æˆ·å§“åã€åœºæ™¯åŒ…åç§°ã€é¢„è®¢æ—¶æ®µã€å¥—é¤ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ç­‰ä¿¡æ¯ï¼Œå¹¶èƒ½æŒ‰çŠ¶æ€ã€æ—¥æœŸèŒƒå›´è¿›è¡Œç­›é€‰ï¼Œ**è¿™æ ·** æˆ‘å¯ä»¥å¿«é€Ÿäº†è§£å½“å‰çš„é¢„çº¦æƒ…å†µå¹¶è¿›è¡Œç®¡ç†ã€‚

---

## 2. æ•°æ®å­—æ®µè§„æ ¼

### 2.1 åˆ—è¡¨å±•ç¤ºå­—æ®µ

| å­—æ®µå | å­—æ®µKey | ç±»å‹ | å®½åº¦ | è¯´æ˜ |
|--------|---------|------|:----:|------|
| é¢„çº¦å•å· | `orderNumber` | string | 180px | å¯ç‚¹å‡»è·³è½¬è¯¦æƒ…ï¼Œæ ¼å¼: R+æ—¶é—´æˆ³+4ä½éšæœºæ•° |
| è”ç³»äºº | `contactName` | string | 100px | å®¢æˆ·è”ç³»äººå§“å |
| æ‰‹æœºå· | `contactPhone` | string | 130px | 11ä½æ‰‹æœºå· |
| åœºæ™¯åŒ… | `scenarioPackageName` | string | 150px | å…³è”çš„åœºæ™¯åŒ…åç§°ï¼Œè¶…é•¿çœç•¥ |
| å¥—é¤ | `packageTierName` | string | 120px | æ‰€é€‰å¥—é¤æ¡£ä½åç§° |
| é¢„è®¢æ—¥æœŸ | `reservationDate` | date | 110px | æ ¼å¼: YYYY-MM-DD |
| é¢„è®¢æ—¶æ®µ | `reservationTime` + `reservationEndTime` | string | 120px | æ ¼å¼: HH:mm - HH:mm |
| é‡‘é¢ | `totalAmount` | number | 100px | å³å¯¹é½ï¼Œæ ¼å¼: Â¥xx.xxï¼Œå•ä½ï¼šå…ƒ |
| çŠ¶æ€ | `status` | enum | 100px | çŠ¶æ€å¾½ç« å±•ç¤º |
| åˆ›å»ºæ—¶é—´ | `createdAt` | datetime | 160px | æ ¼å¼: YYYY-MM-DD HH:mm |
| æ“ä½œ | - | - | 120px | å›ºå®šå³ä¾§ï¼ŒåŒ…å«æ“ä½œæŒ‰é’® |

### 2.2 è®¢å•çŠ¶æ€æšä¸¾

| çŠ¶æ€å€¼ | æ˜¾ç¤ºæ–‡æœ¬ | é¢œè‰²æ ‡è¯† | è¯´æ˜ |
|--------|---------|---------|------|
| `PENDING` | å¾…ç¡®è®¤ | ğŸŸ¡ warning(æ©™è‰²) | å®¢æˆ·å·²æäº¤ï¼Œç­‰å¾…å•†å®¶ç¡®è®¤ |
| `CONFIRMED` | å·²ç¡®è®¤ | ğŸ”µ processing(è“è‰²) | å•†å®¶å·²ç¡®è®¤ï¼Œç­‰å¾…å®¢æˆ·æ”¯ä»˜/å®Œæˆ |
| `CANCELLED` | å·²å–æ¶ˆ | âš« default(ç°è‰²) | è®¢å•å·²å–æ¶ˆ |
| `COMPLETED` | å·²å®Œæˆ | ğŸŸ¢ success(ç»¿è‰²) | è®¢å•å·²å®Œæˆ |

### 2.3 è¯¦æƒ…é¡µé¢å¤–å­—æ®µ

| å­—æ®µå | å­—æ®µKey | è¯´æ˜ |
|--------|---------|------|
| åŠ è´­é¡¹åˆ—è¡¨ | `addonItems[]` | åŒ…å« name, quantity, price, subtotal |
| å¤‡æ³¨ä¿¡æ¯ | `remark` | å®¢æˆ·å¡«å†™çš„å¤‡æ³¨ |
| æ˜¯å¦éœ€æ”¯ä»˜ | `requiresPayment` | ç¡®è®¤æ—¶è®¾ç½® |
| å–æ¶ˆåŸå›  | `cancelReason` | å–æ¶ˆæ—¶è®°å½• |
| å–æ¶ˆæ—¶é—´ | `cancelledAt` | å–æ¶ˆæ“ä½œæ—¶é—´ |
| æ”¯ä»˜ä¿¡æ¯ | `paymentId`, `paymentTime` | æ”¯ä»˜å®Œæˆåå¡«å…… |
| æ“ä½œæ—¥å¿— | `operationLogs[]` | å®Œæ•´æ“ä½œè¿½è¸ªè®°å½• |

---

## 3. ç­›é€‰æ¡ä»¶è§„æ ¼

### 3.1 ç­›é€‰å™¨é…ç½®

| ç­›é€‰é¡¹ | å­—æ®µå | ç»„ä»¶ç±»å‹ | è¯´æ˜ |
|--------|--------|---------|------|
| å…³é”®è¯æœç´¢ | `orderNumber` / `contactPhone` | Input | æ”¯æŒé¢„çº¦å•å·ã€æ‰‹æœºå·æ¨¡ç³Šæœç´¢ |
| çŠ¶æ€ç­›é€‰ | `statuses` | Select(å¤šé€‰) | å¯å¤šé€‰ï¼šå¾…ç¡®è®¤/å·²ç¡®è®¤/å·²å–æ¶ˆ/å·²å®Œæˆ |
| é¢„è®¢æ—¥æœŸèŒƒå›´ | `reservationDateStart` / `reservationDateEnd` | DateRangePicker | æŒ‰é¢„è®¢æ—¥æœŸç­›é€‰ |

### 3.2 ç­›é€‰è¡Œä¸º

```
äº¤äº’è¡Œä¸º:
1. è¾“å…¥æ¡†æ”¯æŒå›è½¦è§¦å‘æœç´¢
2. çŠ¶æ€é€‰æ‹©åå®æ—¶è§¦å‘ç­›é€‰ï¼ˆonValuesChangeï¼‰
3. æ—¥æœŸèŒƒå›´é€‰æ‹©åå®æ—¶è§¦å‘ç­›é€‰
4. é‡ç½®æŒ‰é’®æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶å¹¶åˆ·æ–°åˆ—è¡¨
5. åˆ‡æ¢ç­›é€‰æ¡ä»¶è‡ªåŠ¨é‡ç½®åˆ°ç¬¬ä¸€é¡µ
```

### 3.3 API æŸ¥è¯¢å‚æ•°

```typescript
interface ReservationListQueryRequest {
  page?: number                   // é¡µç ï¼Œä»0å¼€å§‹
  size?: number                   // æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤20
  sortBy?: string                 // æ’åºå­—æ®µï¼Œé»˜è®¤ createdAt
  sortDirection?: 'asc' | 'desc'  // æ’åºæ–¹å‘ï¼Œé»˜è®¤ desc
  orderNumber?: string            // é¢„çº¦å•å·ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
  contactPhone?: string           // æ‰‹æœºå·ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
  statuses?: ReservationStatus[]  // çŠ¶æ€åˆ—è¡¨
  reservationDateStart?: string   // é¢„è®¢æ—¥æœŸèµ·å§‹ (YYYY-MM-DD)
  reservationDateEnd?: string     // é¢„è®¢æ—¥æœŸç»“æŸ (YYYY-MM-DD)
}
```

---

## 4. çŠ¶æ€æµè½¬è§„åˆ™

### 4.1 çŠ¶æ€æœºå®šä¹‰

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
                    â–¼                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
   åˆ›å»ºè®¢å•   â”‚ PENDING  â”‚â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ CANCELLED
              â”‚ (å¾…ç¡®è®¤)  â”‚      â”‚ å–æ¶ˆé¢„çº¦        â”‚ (å·²å–æ¶ˆ)
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â”‚                 â–²
                   â”‚            â”‚                 â”‚
         ç¡®è®¤é¢„çº¦  â”‚            â”‚                 â”‚
    (requiresPayment?)         â”‚                 â”‚
           â”‚                   â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”            â”‚                 â”‚
    â”‚             â”‚            â”‚                 â”‚
    â–¼ (æ˜¯)        â–¼ (å¦)       â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                 â”‚
â”‚CONFIRMED â”‚  â”‚COMPLETED â”‚     â”‚                 â”‚
â”‚ (å·²ç¡®è®¤)  â”‚  â”‚ (å·²å®Œæˆ)  â”‚     â”‚                 â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                 â”‚
     â”‚                         â”‚                 â”‚
     â”‚ æ”¯ä»˜å®Œæˆ                 â”‚                 â”‚
     â–¼                         â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                 â”‚
â”‚COMPLETED â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚ (å·²å®Œæˆ)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     å–æ¶ˆé¢„çº¦ (å·²ç¡®è®¤çŠ¶æ€å¯å–æ¶ˆ)
```

### 4.2 æ“ä½œæƒé™çŸ©é˜µ

| å½“å‰çŠ¶æ€ | å¯ç¡®è®¤ | å¯å–æ¶ˆ | å¯ä¿®æ”¹ | å¯æŸ¥çœ‹è¯¦æƒ… |
|---------|:------:|:------:|:------:|:--------:|
| PENDING | âœ… | âœ… | âœ… | âœ… |
| CONFIRMED | âŒ | âœ… | âœ… | âœ… |
| CANCELLED | âŒ | âŒ | âŒ | âœ… |
| COMPLETED | âŒ | âŒ | âŒ | âœ… |

---

## 5. ç•Œé¢è®¾è®¡è§„æ ¼

### 5.1 é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¢„çº¦å•ç®¡ç†                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç­›é€‰åŒºåŸŸ (Card)                                              â”‚ â”‚
â”‚ â”‚ [æœç´¢æ¡†    ] [çŠ¶æ€é€‰æ‹©â–¼] [é¢„è®¢æ—¥æœŸèŒƒå›´    ] [æœç´¢] [é‡ç½®]     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é¢„çº¦å•åˆ—è¡¨ (Card)                               [ğŸ”„ åˆ·æ–°]    â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ é¢„çº¦å•å· â”‚è”ç³»äººâ”‚æ‰‹æœºå·â”‚åœºæ™¯åŒ…â”‚å¥—é¤â”‚æ—¥æœŸâ”‚æ—¶æ®µâ”‚é‡‘é¢â”‚çŠ¶æ€â”‚æ“ä½œâ”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ R2025... â”‚å¼ ä¸‰  â”‚138...â”‚VIPåŒ…â”‚æ ‡å‡†â”‚12-27â”‚14:00â”‚Â¥599â”‚ğŸŸ¡å¾…ç¡®è®¤â”‚è¯¦æƒ…â”‚ â”‚
â”‚ â”‚ R2025... â”‚æå››  â”‚139...â”‚æ˜Ÿç©ºé—´â”‚è±ªåâ”‚12-28â”‚18:00â”‚Â¥999â”‚ğŸŸ¢å·²å®Œæˆâ”‚è¯¦æƒ…â”‚ â”‚
â”‚ â”‚ ...      â”‚     â”‚      â”‚     â”‚    â”‚    â”‚     â”‚    â”‚     â”‚    â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ç¬¬ 1-20 æ¡ï¼Œå…± 156 æ¡              < 1 2 3 4 5 ... 8 >  20æ¡/é¡µ â–¼ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å“åº”å¼é€‚é…

| æ–­ç‚¹ | å¸ƒå±€è°ƒæ•´ |
|------|---------|
| lg (â‰¥992px) | 4åˆ—ç­›é€‰å™¨å¸ƒå±€ |
| md (â‰¥768px) | 3åˆ—ç­›é€‰å™¨å¸ƒå±€ |
| sm (â‰¥576px) | 2åˆ—ç­›é€‰å™¨å¸ƒå±€ |
| xs (<576px) | å•åˆ—ç­›é€‰å™¨å¸ƒå±€ |

### 5.3 è¡¨æ ¼é…ç½®

```typescript
{
  scroll: { x: 1400 },           // æ¨ªå‘æ»šåŠ¨æœ€å°å®½åº¦
  sticky: true,                   // è¡¨å¤´å¸é¡¶
  rowKey: 'id',                   // è¡Œå”¯ä¸€æ ‡è¯†
  pagination: {
    showSizeChanger: true,        // å¯è°ƒæ•´æ¯é¡µæ¡æ•°
    showQuickJumper: true,        // å¿«é€Ÿè·³é¡µ
    pageSizeOptions: ['10', '20', '50', '100'],
    showTotal: (total, range) => `ç¬¬ ${range[0]}-${range[1]} æ¡ï¼Œå…± ${total} æ¡`
  }
}
```

---

## 6. API æ¥å£è§„æ ¼

### 6.1 åˆ—è¡¨æŸ¥è¯¢æ¥å£

```
GET /api/admin/reservations

è¯·æ±‚å‚æ•°: ReservationListQueryRequest (Query String)

å“åº”æ ¼å¼:
{
  "success": true,
  "data": [ReservationListItemDTO, ...],
  "total": 156,
  "page": 0,
  "size": 20,
  "totalPages": 8
}
```

### 6.2 è¯¦æƒ…æŸ¥è¯¢æ¥å£

```
GET /api/admin/reservations/{id}

å“åº”æ ¼å¼:
{
  "data": ReservationOrderDTO,
  "error": null
}
```

### 6.3 ç¡®è®¤é¢„çº¦æ¥å£

```
POST /api/admin/reservations/{id}/confirm

è¯·æ±‚å¤´:
X-Operator-Id: UUID

è¯·æ±‚ä½“:
{
  "requiresPayment": boolean,
  "remark": string (optional)
}

å“åº”æ ¼å¼:
{
  "data": ReservationOrderDTO,
  "error": null
}
```

### 6.4 å–æ¶ˆé¢„çº¦æ¥å£

```
POST /api/admin/reservations/{id}/cancel

è¯·æ±‚å¤´:
X-Operator-Id: UUID

è¯·æ±‚ä½“:
{
  "cancelReasonType": "CUSTOMER_REQUEST" | "RESOURCE_CONFLICT" | "SCHEDULE_CHANGE" | "OTHER",
  "cancelReason": string
}

å“åº”æ ¼å¼:
{
  "data": ReservationOrderDTO,
  "error": null
}
```

### 6.5 ä¿®æ”¹é¢„çº¦æ¥å£

```
PUT /api/admin/reservations/{id}

è¯·æ±‚å¤´:
X-Operator-Id: UUID

è¯·æ±‚ä½“:
{
  "contactName": string (optional),
  "contactPhone": string (optional),
  "remark": string (optional)
}

å“åº”æ ¼å¼:
{
  "data": ReservationOrderDTO,
  "error": null
}
```

### 6.6 æ•°æ®ä¼ è¾“å¯¹è±¡

```typescript
// åˆ—è¡¨é¡¹ DTO
interface ReservationListItemDTO {
  id: string
  orderNumber: string
  contactName: string
  contactPhone: string
  scenarioPackageName: string
  packageTierName: string
  reservationDate: string
  reservationTime: string
  reservationEndTime: string
  totalAmount: number
  status: ReservationStatus
  requiresPayment: boolean
  createdAt: string
  updatedAt: string
}

// è¯¦æƒ… DTO
interface ReservationOrderDTO extends ReservationListItemDTO {
  userId: string
  scenarioPackageId: string
  tierId: string
  timeSlotId: string
  remark: string
  paymentId: string | null
  paymentTime: string | null
  cancelReason: string | null
  cancelReasonType: CancelReasonType | null
  cancelledAt: string | null
  addonItems: ReservationItemDTO[]
  operationLogs: OperationLogDTO[]
}

// åŠ è´­é¡¹ DTO
interface ReservationItemDTO {
  id: string
  name: string
  quantity: number
  price: number
  subtotal: number
}

// æ“ä½œæ—¥å¿— DTO
interface OperationLogDTO {
  id: string
  operationType: OperationType
  operatorId: string
  operatorName: string
  content: string
  createdAt: string
}
```

---

## 7. æŠ€æœ¯å®ç°æ¶æ„

### 7.1 å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| React 18 | UI æ¡†æ¶ |
| Ant Design 5.x | ç»„ä»¶åº“ (Table, Card, Form, Select, DatePicker) |
| TanStack Query | æ•°æ®è·å–ä¸ç¼“å­˜ |
| React Router 6 | è·¯ç”±ç®¡ç† |
| dayjs | æ—¥æœŸå¤„ç† |
| TypeScript | ç±»å‹å®‰å…¨ |

### 7.2 å‰ç«¯æ–‡ä»¶ç»“æ„

```
frontend/src/pages/reservation-orders/
â”œâ”€â”€ ReservationOrderList.tsx        # åˆ—è¡¨é¡µé¢ç»„ä»¶ (268è¡Œ)
â”œâ”€â”€ ReservationOrderDetail.tsx      # è¯¦æƒ…é¡µé¢ç»„ä»¶
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ OrderFilters.tsx            # ç­›é€‰å™¨ç»„ä»¶ (125è¡Œ)
â”‚   â”œâ”€â”€ OrderStatusBadge.tsx        # çŠ¶æ€å¾½ç« ç»„ä»¶
â”‚   â”œâ”€â”€ ConfirmOrderModal.tsx       # ç¡®è®¤å¼¹çª—
â”‚   â”œâ”€â”€ CancelOrderModal.tsx        # å–æ¶ˆå¼¹çª—
â”‚   â””â”€â”€ OperationLogTimeline.tsx    # æ“ä½œæ—¥å¿—æ—¶é—´çº¿
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useReservationOrders.ts     # åˆ—è¡¨æ•°æ®Hook
â”‚   â”œâ”€â”€ useReservationDetail.ts     # è¯¦æƒ…æ•°æ®Hook
â”‚   â””â”€â”€ useReservationMutations.ts  # çŠ¶æ€å˜æ›´Hook
â”œâ”€â”€ services/
â”‚   â””â”€â”€ reservationOrderService.ts  # API å°è£…
â””â”€â”€ types/
    â””â”€â”€ reservation-order.types.ts  # ç±»å‹å®šä¹‰ (101è¡Œ)
```

### 7.3 åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Spring Boot 3.x | åç«¯æ¡†æ¶ |
| Spring Data JPA | æ•°æ®è®¿é—® |
| Supabase PostgreSQL | æ•°æ®åº“ |
| Jakarta Validation | å‚æ•°æ ¡éªŒ |

### 7.4 åç«¯æ–‡ä»¶ç»“æ„

```
backend/src/main/java/com/cinema/reservation/
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ ReservationController.java       # Cç«¯APIæ§åˆ¶å™¨ (171è¡Œ)
â”‚   â””â”€â”€ ReservationAdminController.java  # Bç«¯APIæ§åˆ¶å™¨ (164è¡Œ)
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ ReservationOrderService.java     # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ ReservationNumberGenerator.java  # è®¢å•å·ç”Ÿæˆ
â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ ReservationOrderRepository.java  # è®¢å•æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ ReservationItemRepository.java   # åŠ è´­é¡¹æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ ReservationOperationLogRepository.java  # æ—¥å¿—
â”‚   â””â”€â”€ SlotInventorySnapshotRepository.java    # æ—¶æ®µåº“å­˜
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ ReservationListQueryRequest.java
â”‚   â”œâ”€â”€ ReservationListItemDTO.java
â”‚   â”œâ”€â”€ ReservationOrderDTO.java
â”‚   â”œâ”€â”€ ConfirmReservationRequest.java
â”‚   â”œâ”€â”€ CancelReservationRequest.java
â”‚   â””â”€â”€ UpdateReservationRequest.java
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ ReservationOrder.java            # è®¢å•å®ä½“
â”‚   â”œâ”€â”€ ReservationAddonItem.java        # åŠ è´­é¡¹å®ä½“
â”‚   â”œâ”€â”€ ReservationOperationLog.java     # æ“ä½œæ—¥å¿—å®ä½“
â”‚   â””â”€â”€ enums/
â”‚       â”œâ”€â”€ ReservationStatus.java       # çŠ¶æ€æšä¸¾
â”‚       â”œâ”€â”€ OperationType.java           # æ“ä½œç±»å‹æšä¸¾
â”‚       â””â”€â”€ CancelReasonType.java        # å–æ¶ˆåŸå› æšä¸¾
â””â”€â”€ exception/
    â”œâ”€â”€ ReservationNotFoundException.java
    â”œâ”€â”€ InvalidStatusTransitionException.java
    â””â”€â”€ ConcurrentModificationException.java
```

### 7.5 æ•°æ®åº“è¡¨ç»“æ„

| è¡¨å | è¯´æ˜ | çŠ¶æ€ |
|------|------|:----:|
| `reservation_orders` | é¢„çº¦å•ä¸»è¡¨ | âœ… å·²åˆ›å»º |
| `reservation_addon_items` | åŠ è´­é¡¹æ˜ç»†è¡¨ | âœ… å·²åˆ›å»º |
| `reservation_operation_logs` | æ“ä½œæ—¥å¿—è¡¨ | âœ… å·²åˆ›å»º |
| `slot_inventory_snapshots` | æ—¶æ®µåº“å­˜å¿«ç…§ | âœ… å·²åˆ›å»º |

**æ ¸å¿ƒå­—æ®µ**ï¼ˆreservation_ordersï¼‰ï¼š
- `id`, `order_number`, `user_id`
- `scenario_package_id`, `tier_id`, `time_slot_id`
- `reservation_date`, `contact_name`, `contact_phone`
- `total_amount`, `status`, `requires_payment`
- `payment_id`, `payment_time`
- `cancel_reason`, `cancel_reason_type`, `cancelled_at`
- `remark`, `version` (ä¹è§‚é”)
- `created_at`, `updated_at`

---

## 8. éªŒæ”¶æ ‡å‡†

### 8.1 åŠŸèƒ½éªŒæ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† | çŠ¶æ€ |
|--------|---------|:----:|
| åˆ—è¡¨åŠ è½½ | é¡µé¢é¦–æ¬¡åŠ è½½æ˜¾ç¤ºé¢„çº¦å•åˆ—è¡¨ï¼Œé»˜è®¤æŒ‰åˆ›å»ºæ—¶é—´å€’åº | âœ… |
| åˆ†é¡µåŠŸèƒ½ | åˆ†é¡µæ§ä»¶æ­£å¸¸å·¥ä½œï¼Œå¯åˆ‡æ¢é¡µç å’Œæ¯é¡µæ¡æ•° | âœ… |
| å…³é”®è¯æœç´¢ | è¾“å…¥é¢„çº¦å•å·æˆ–æ‰‹æœºå·ï¼Œåˆ—è¡¨æ­£ç¡®è¿‡æ»¤ | âœ… |
| çŠ¶æ€ç­›é€‰ | é€‰æ‹©çŠ¶æ€åï¼Œä»…æ˜¾ç¤ºå¯¹åº”çŠ¶æ€çš„è®¢å• | âœ… |
| æ—¥æœŸç­›é€‰ | é€‰æ‹©æ—¥æœŸèŒƒå›´åï¼Œä»…æ˜¾ç¤ºè¯¥èŒƒå›´å†…é¢„è®¢æ—¥æœŸçš„è®¢å• | âœ… |
| é‡ç½®åŠŸèƒ½ | ç‚¹å‡»é‡ç½®æŒ‰é’®ï¼Œæ¸…ç©ºç­›é€‰æ¡ä»¶å¹¶åˆ·æ–°åˆ—è¡¨ | âœ… |
| è¯¦æƒ…è·³è½¬ | ç‚¹å‡»é¢„çº¦å•å·æˆ–è¯¦æƒ…æŒ‰é’®ï¼Œæ­£ç¡®è·³è½¬åˆ°è¯¦æƒ…é¡µ | âœ… |
| åˆ·æ–°åŠŸèƒ½ | ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œé‡æ–°åŠ è½½åˆ—è¡¨æ•°æ® | âœ… |
| ç©ºçŠ¶æ€ | æ— æ•°æ®æ—¶æ˜¾ç¤ºå‹å¥½çš„ç©ºçŠ¶æ€æç¤º | âœ… |
| é”™è¯¯å¤„ç† | API é”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯æç¤ºå’Œé‡è¯•æŒ‰é’® | âœ… |
| ç¡®è®¤æ“ä½œ | å¾…ç¡®è®¤è®¢å•å¯æ‰§è¡Œç¡®è®¤æ“ä½œ | âœ… |
| å–æ¶ˆæ“ä½œ | å¾…ç¡®è®¤/å·²ç¡®è®¤è®¢å•å¯æ‰§è¡Œå–æ¶ˆæ“ä½œ | âœ… |
| ä¿®æ”¹æ“ä½œ | å¯ä¿®æ”¹è”ç³»äººä¿¡æ¯ | âœ… |
| æ“ä½œæ—¥å¿— | è¯¦æƒ…é¡µæ˜¾ç¤ºå®Œæ•´æ“ä½œå†å² | âœ… |

### 8.2 æ€§èƒ½éªŒæ”¶

| æŒ‡æ ‡ | æ ‡å‡† | çŠ¶æ€ |
|------|------|:----:|
| åˆ—è¡¨é¦–å±åŠ è½½ | â‰¤ 1.5ç§’ (100æ¡æ•°æ®) | âœ… |
| ç­›é€‰å“åº” | â‰¤ 500ms | âœ… |
| åˆ†é¡µåˆ‡æ¢ | â‰¤ 500ms | âœ… |

### 8.3 å…¼å®¹æ€§éªŒæ”¶

| æµè§ˆå™¨ | ç‰ˆæœ¬è¦æ±‚ | çŠ¶æ€ |
|--------|---------|:----:|
| Chrome | æœ€æ–°2ä¸ªä¸»ç‰ˆæœ¬ | âœ… |
| Firefox | æœ€æ–°2ä¸ªä¸»ç‰ˆæœ¬ | âœ… |
| Safari | æœ€æ–°2ä¸ªä¸»ç‰ˆæœ¬ | âœ… |
| Edge | æœ€æ–°2ä¸ªä¸»ç‰ˆæœ¬ | âœ… |

---

## 9. å·²çŸ¥é™åˆ¶ä¸å¾…ä¼˜åŒ–é¡¹

### 9.1 å½“å‰é™åˆ¶

| é™åˆ¶é¡¹ | è¯´æ˜ | å½±å“ |
|--------|------|------|
| ä¸´æ—¶ç”¨æˆ·ID | æœªå¯¹æ¥çœŸå®è®¤è¯ä½“ç³»ï¼Œä½¿ç”¨ä¸´æ—¶UUID | ä½ |
| æ— åº“å­˜é¢„å  | ä¸‹å•æ—¶æœªé”å®šåº“å­˜ï¼Œå¯èƒ½è¶…å– | é«˜ |
| æ”¯ä»˜æœªå¯¹æ¥ | ä»…æœ‰å›è°ƒéª¨æ¶ï¼Œæœªå¯¹æ¥å¾®ä¿¡æ”¯ä»˜ | é«˜ |

### 9.2 å¾…ä¼˜åŒ–é¡¹

| ä¼˜åŒ–é¡¹ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|--------|:------:|------|
| æ‰¹é‡å¯¼å‡º | P2 | æ”¯æŒExcel/CSVå¯¼å‡º |
| åœºæ™¯åŒ…ç­›é€‰ | P3 | æŒ‰åœºæ™¯åŒ…åç§°ç­›é€‰ |
| åˆ›å»ºæ—¶é—´ç­›é€‰ | P3 | æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´ç­›é€‰ |
| åˆ—è¡¨è‡ªåŠ¨åˆ·æ–° | P3 | WebSocketå®æ—¶æ›´æ–° |

---

## 10. ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ |
|------|------|
| åŠŸèƒ½Spec | `specs/U001-reservation-order-management/spec.md` |
| æ•°æ®æ¨¡å‹ | `specs/U001-reservation-order-management/data-model.md` |
| APIå¥‘çº¦ | `specs/U001-reservation-order-management/contracts/api.yaml` |
| ä»»åŠ¡æ¸…å• | `specs/U001-reservation-order-management/tasks.md` |
| å®æ–½è®¡åˆ’ | `specs/U001-reservation-order-management/plan.md` |
| æ¨¡å—å¼€å‘ç°çŠ¶åˆ†æ | `docs/ä¸šåŠ¡éœ€æ±‚/éœ€æ±‚ä¸“é¡¹è¯´æ˜/è®¢å•ç®¡ç†ä¸å±¥çº¦æ¨¡å—å¼€å‘ç°çŠ¶åˆ†æ.md` |
| é¢„çº¦è®¢å•ç®¡ç†éœ€æ±‚è§„çº¦ | `docs/ä¸šåŠ¡éœ€æ±‚/é¢„çº¦è®¢å•ç®¡ç†åŠŸèƒ½éœ€æ±‚è§„çº¦.md` |

---

## é™„å½•Aï¼šçŠ¶æ€é…ç½®å¸¸é‡

```typescript
export const RESERVATION_STATUS_CONFIG = {
  PENDING: {
    label: 'å¾…ç¡®è®¤',
    color: 'warning',
    description: 'å®¢æˆ·å·²æäº¤é¢„çº¦ï¼Œç­‰å¾…å•†å®¶ç¡®è®¤'
  },
  CONFIRMED: {
    label: 'å·²ç¡®è®¤',
    color: 'processing',
    description: 'å•†å®¶å·²ç¡®è®¤é¢„çº¦ï¼Œç­‰å¾…å®¢æˆ·æ”¯ä»˜æˆ–å®Œæˆ'
  },
  CANCELLED: {
    label: 'å·²å–æ¶ˆ',
    color: 'default',
    description: 'é¢„çº¦å·²è¢«å–æ¶ˆ'
  },
  COMPLETED: {
    label: 'å·²å®Œæˆ',
    color: 'success',
    description: 'é¢„çº¦å·²å®Œæˆ'
  }
}

export const CANCEL_REASON_TYPE_CONFIG = {
  CUSTOMER_REQUEST: { label: 'å®¢æˆ·è¦æ±‚å–æ¶ˆ' },
  RESOURCE_CONFLICT: { label: 'èµ„æºå†²çª' },
  SCHEDULE_CHANGE: { label: 'æ—¶æ®µè°ƒæ•´' },
  OTHER: { label: 'å…¶ä»–åŸå› ' }
}

export const OPERATION_TYPE_CONFIG = {
  CREATE: { label: 'åˆ›å»ºé¢„çº¦' },
  CONFIRM: { label: 'ç¡®è®¤é¢„çº¦' },
  CANCEL: { label: 'å–æ¶ˆé¢„çº¦' },
  UPDATE: { label: 'ä¿®æ”¹ä¿¡æ¯' },
  PAYMENT: { label: 'æ”¯ä»˜å®Œæˆ' }
}
```

---

## é™„å½•Bï¼šèœå•é…ç½®

```typescript
// AppLayout.tsx ä¸­çš„èœå•é…ç½®
{
  key: 'order-management',
  icon: <ShoppingCartOutlined />,
  label: 'è®¢å•ä¸å±¥çº¦ç®¡ç†',
  children: [
    {
      key: '/reservation-orders',
      label: 'U001-é¢„çº¦å•ç®¡ç†',
    }
  ]
}
```

---

**æ–‡æ¡£ç»´æŠ¤äºº**: Cinema Platform Team  
**æœ€åæ›´æ–°**: 2025-12-27
