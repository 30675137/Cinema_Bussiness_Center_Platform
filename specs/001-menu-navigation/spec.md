/# Feature Specification: 影院商品管理中台功能导航系统

**Feature Branch**: `001-menu-navigation`
**Created**: 2025-12-10
**Status**: Draft
**Input**: User description: "先构建功能菜单 | 一级菜单                            | 二级菜单 / 子功能页                                                                                                                                                                                          |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **基础设置与主数据**                    | • 组织/门店/仓库管理  <br> • 单位 & 换算规则管理  <br> • 字典与规则配置（损耗原因、报损原因、服务项类型等）  <br> • 角色与权限管理  <br> • 审批流配置（商品/价格/场景包/排期/报损等）                                                                                   |
| **商品管理 (MDM / PIM)**            | • SPU 管理  <br> • SKU 管理  <br> • 属性/规格/条码/单位设置  <br> • 商品状态/上下架管理  <br> • 内容编辑 (标题、卖点、图文/素材)  <br> • 素材库管理（图片/视频）  <br> • 渠道映射字段管理  <br> • 内容发布/审核/历史版本管理                                             |
| **BOM / 配方 & 成本管理**             | • 原料库 / 物料主数据  <br> • BOM/配方配置  <br> • 单位换算 / 损耗率配置  <br> • 成本 / 毛利预估与校验  <br> • BOM/配方版本管理 / 生效时间控制                                                                                                 |
| **场景包/套餐管理 (Scenario Package)** | • 场景包模板管理（新建/编辑/草稿/发布）  <br> • 适用资源/影厅/门店规则  <br> • 内容组合（硬权益、软权益、服务项、加购项）  <br> • 加购策略管理  <br> • 定价策略 / 门店价 / 时段价 配置  <br> • 包装价格 & 一口价设定  <br> • 场景包版本管理 / 生效控制                                     |
| **价格体系管理**                      | • 价目表管理（基础价 / 门店价 / 时段价 /会员/券价口径）  <br> • 价格审核与生效 / 回滚  <br> • 价格规则配置（时段规则、门店规则、渠道规则）                                                                                                                |
| **采购与入库管理**                     | • 供应商管理  <br> • 采购订单 (PO) 创建 / 审批 / 变更 / 关闭  <br> • 到货验收 & 收货入库 (GR / GRN)  <br> • 异常/短缺/拒收/报损登记  <br> • 入库单历史 / 查询  <br> • 调拨 (仓 ↔ 店 / 仓 ↔ 仓) 发起 / 到货确认                                             |
| **库存 & 仓店库存管理**                 | • 库存台账查看（仓库 / 门店 / 影厅 / 批次 / 效期）  <br> • 入库 / 出库 /报损 /退库操作  <br> • 调拨管理 (申请 / 出库 / 在途 / 收货)  <br> • 盘点模块（全盘 / 抽盘 / 差异登记 / 审批）  <br> • 库存预占 / 释放管理（订单预占、取消/退款释放）  <br> • 库存变动日志 / 审计                  |
| **档期 / 排期 /资源预约管理**             | • 影厅资源管理（影厅定义 / 可用时段 / 维护状态）  <br> • 甘特图 / 日历视图排期管理  <br> • 新建排期 / 绑定场景包 / 设定时间段  <br> • 冲突校验 / 占用规则  <br> • 排期状态机（草稿 / 锁定 / 开放预订 / 停售）  <br> • 渠道发布 / 同步到小程序可售时段  <br> • 排期变更 / 取消 / 改期申请管理         |
| **订单与履约管理 (OMS-like)**          | • 订单列表 / 状态查看（待支付 / 已支付 / 已确认 / 已核销 / 已取消 / 已退款）  <br> • 二次确认队列（需要运营／管理员确认的订单）  <br> • 核销码 / 到店核销 / 履约确认  <br> • 库存扣减 / BOM 扣原料 / 加购扣减  <br> • 退款 / 改期 / 取消 / 回滚管理  <br> • 异常订单 / 扣减失败 / 核销异常 / 审计日志 |
| **运营 & 报表 / 指标看板**              | • 上新/发布时效报表  <br> • 商品数据质量报表（字段完整率 / 发布错误率）  <br> • 库存准确性 / 盘点差异报表  <br> • 销售/场景包表现分析（客单、加购率、毛利、热门场景/时段）  <br> • 资源利用率 / 影厅利用率 / 排期使用率报表  <br> • 库存 & 订单 & 收入 & 成本汇总报表                               |
| **系统管理 / 设置 /权限**               | • 系统用户管理与角色权限配置  <br> • 审计日志 / 操作日志查询  <br> • 参数与规则配置（损耗、售价策略、盘点频率等）  <br> • 数据导入导出（批量 SKU / 采购 / 排期 / 调拨 / 盘点）  <br> • 消息/告警管理（库存低预警、扣减失败、重复排期、库存差异）                                                |"
**Business Context**: 考莱影城商品管理中台 - 支持影院商品全生命周期管理、库存管控、价格体系配置、采购入库、档期排期、订单履约和运营数据分析
**文档要求**: 所有功能规格、用户故事、需求文档等必须使用简体中文编写，遵循中国大陆地区中文表达习惯

## Clarifications

### Session 2025-12-10

- Q: 菜单显示方式 → A: 显示所有10个一级菜单及对应二级菜单，无权限限制
- Q: 首页功能定位 → A: 首页应该是业务仪表板，显示关键业务指标和快速操作入口，而不是UI实例页面
- Q: 前端项目根目录路径规范 → A: frontend/Cinema_Operation_Admin/ - 明确指定前端代码存储在Cinema_Operation_Admin子目录中，确保所有实现和文档引用使用一致的路径结构

### Session 2025-12-11

- Q: 用户身份Mock数据的范围和复杂度 → A: 简化单一用户Mock，包含基础身份信息（用户名、角色、部门）和唯一标识符
- Q: 用户偏好数据的存储方式 → A: 浏览器LocalStorage，用于存储导航偏好、收藏菜单等用户个性化设置

## User Scenarios & Testing

### User Story 1 - 基础导航与菜单展示 (Priority: P1)

用户需要能够通过清晰的导航结构访问系统的主要功能模块，系统需要展示完整的菜单层次结构。

**Why this priority**: 基础导航是系统可用性的核心，确保用户能够高效、直观地访问所有功能模块

**Independent Test**: 可以通过验证用户能够看到完整的10个一级菜单及对应的二级子功能页面，测试导航结构的完整性和可访问性

**Acceptance Scenarios**:

1. **Given** 系统使用Mock用户身份数据，**When** 用户访问系统首页，**Then** 用户能够看到业务仪表板，显示关键业务指标和完整的导航菜单结构，包括所有10个一级菜单
2. **Given** 用户在导航界面，**When** 查看菜单结构，**Then** 用户能够看到所有一级菜单及其对应的二级子功能页面
3. **Given** 用户访问任意菜单项，**When** 点击菜单链接，**Then** 系统正常跳转到对应的功能页面
4. **Given** 用户在系统中导航，**When** 浏览菜单结构，**Then** 用户能够直观地理解10个功能模块的层次关系和内容组织
5. **Given** 用户在首页仪表板，**When** 查看业务数据，**Then** 用户能够看到实时销售数据、库存状态、订单处理情况等核心指标
6. **Given** 用户在首页仪表板，**When** 需要快速操作，**Then** 用户能够通过快速操作入口直接跳转到常用业务功能

---

### User Story 2 - 业务功能导航与页面跳转 (Priority: P1)

业务用户需要通过导航菜单快速定位到具体的业务功能页面，系统需要提供直观的菜单层次结构和便捷的页面跳转体验。

**Why this priority**: 高效的导航体验直接影响用户的操作效率和工作流畅性，是提升用户满意度的关键因素

**Independent Test**: 可以通过验证用户能够从任意页面通过导航菜单快速到达目标功能页面，测试导航响应速度和用户体验流畅度

**Acceptance Scenarios**:

1. **Given** 用户在任意页面，**When** 点击一级菜单项，**Then** 系统展开显示对应的二级菜单子功能页面
2. **Given** 用户在导航菜单中，**When** 点击具体的子功能页面链接，**Then** 系统在主内容区域正确加载对应的功能页面
3. **Given** 用户在页面间导航，**When** 进行页面跳转，**Then** 系统保持导航状态，当前所在菜单项处于高亮激活状态
4. **Given** 用户在多层级导航中操作，**When** 点击面包屑导航中的层级链接，**Then** 系统正确返回到对应的上级页面并更新导航状态

---

### User Story 3 - 导航体验优化与响应式适配 (Priority: P2)

系统需要提供优化的导航体验，支持快速搜索、收藏常用功能和响应式布局，适应不同设备和屏幕尺寸的使用需求。

**Why this priority**: 良好的导航体验和跨设备兼容性能够显著提升用户的工作效率和系统的可用性

**Independent Test**: 可以通过在不同设备和屏幕尺寸下测试导航功能，验证菜单搜索、收藏功能和响应式布局的可用性

**Acceptance Scenarios**:

1. **Given** 用户需要快速定位功能，**When** 使用导航搜索功能输入关键词，**Then** 系统返回匹配的菜单项和功能页面
2. **Given** 用户经常使用特定功能，**When** 点击收藏按钮，**Then** 系统将该功能添加到个人收藏菜单中以便快速访问
3. **Given** 用户在移动设备上使用系统，**When** 访问导航界面，**Then** 系统显示适合触摸操作的移动端导航布局
4. **Given** 用户在大屏幕设备上使用系统，**When** 访问导航界面，**Then** 系统充分利用屏幕空间提供更丰富的导航信息和快捷操作

---

### Edge Cases

- 当用户在页面加载过程中点击导航菜单时，系统应该如何处理？
- 当网络连接不稳定时，导航菜单的展开和收起状态如何保持？
- 当系统进行版本更新导致菜单结构变化时，用户的使用习惯如何保持兼容？
- 当菜单项过多导致侧边栏空间不足时，系统应该如何处理？
- 当LocalStorage被清空时，用户的导航偏好和收藏数据如何恢复到默认状态？
- 当Mock用户数据加载失败时，系统应该如何处理以确保导航功能正常使用？

## Requirements

### Functional Requirements

**导航功能要求**
- **FR-001**: 系统必须展示完整的10个一级菜单和对应的二级子功能页面导航结构
- **FR-002**: 系统必须支持多级菜单的层次化展示，清晰的父子关系
- **FR-003**: 用户必须能够通过点击导航菜单项快速跳转到对应的功能页面
- **FR-004**: 系统必须提供面包屑导航显示当前页面在导航结构中的位置
- **FR-005**: 系统必须支持导航菜单的展开、收起和记住用户偏好设置
- **FR-006**: 系统必须提供导航搜索功能，允许用户通过关键词快速定位功能
- **FR-007**: 系统必须支持用户收藏常用功能，创建个性化快捷访问菜单
- **FR-008**: 系统必须在高亮显示当前所在页面对应的导航项，提供清晰的当前位置指示
- **FR-009**: 系统必须支持响应式设计，在不同设备上提供适配的导航体验

**首页仪表板要求**
- **FR-010**: 系统首页必须是业务仪表板，显示影院商品管理的关键业务指标
- **FR-011**: 首页仪表板必须显示实时销售数据、库存状态、订单处理情况等核心指标
- **FR-012**: 首页仪表板必须提供快速操作入口，支持用户直接跳转到常用业务功能
- **FR-013**: 首页仪表板必须支持数据可视化展示，如图表、趋势线等直观的数据呈现方式
- **FR-014**: 首页仪表板必须支持用户自定义，允许用户根据业务需求调整显示的指标和布局

**导航系统扩展要求**
- **FR-015**: 系统必须提供导航菜单的多级展开支持，支持最多二级菜单结构
- **FR-016**: 系统必须记录导航行为日志，用于用户行为分析和系统优化
- **FR-017**: 系统必须提供清晰的菜单图标和标签，提升导航的可识别性

**项目路径规范**
- **FR-018**: 所有前端代码必须存储在 `frontend/Cinema_Operation_Admin/` 目录中，确保项目结构一致性
- **FR-019**: 所有文档、测试和构建脚本必须使用正确的项目路径引用 `frontend/Cinema_Operation_Admin/`

**用户身份与认证Mock要求**
- **FR-020**: 系统不包含登录页面和认证流程，直接使用Mock用户身份数据
- **FR-021**: Mock用户数据包含基础身份信息：用户ID、用户名、显示名称、角色、部门
- **FR-022**: 用户偏好设置（导航偏好、收藏菜单、搜索历史等）使用浏览器LocalStorage存储
- **FR-023**: 系统自动使用Mock用户身份，无需用户登录操作，直接展示业务功能界面

### Key Entities

- **菜单项**: 导航系统的基本组成单位，包含菜单名称、图标、路径、层级等属性
- **Mock用户**: 简化的单一用户身份数据，包含基础身份信息（用户ID、用户名、显示名称、角色、部门）
- **用户偏好**: 用户的个性化导航设置，包括菜单展开状态、收藏功能、搜索历史等，存储在浏览器LocalStorage中
- **导航日志**: 记录用户导航行为的数据，用于分析和优化用户体验
- **菜单结构**: 定义10个一级菜单和对应的二级子功能页面的层次关系
- **导航状态**: 当前选中的菜单项、展开状态、搜索查询等运行时状态

## Success Criteria

### Measurable Outcomes

- **SC-001**: 用户能够在3次点击内从任意页面到达目标功能页面
- **SC-002**: 系统导航菜单加载时间不超过2秒，页面跳转响应时间不超过1秒
- **SC-003**: 95%的用户能够通过导航搜索在10秒内找到目标功能
- **SC-004**: 导航功能可用性达到99.5%，系统故障导致的导航中断每月不超过1次
- **SC-005**: 用户对导航体验的满意度评分达到4.5分（5分制）
- **SC-006**: 移动端导航使用率占总导航使用的30%以上，响应式适配覆盖率100%
- **SC-007**: 10个一级菜单完整性展示率达到100%，二级子功能页面覆盖完整
- **SC-008**: 用户收藏功能使用率达到40%，常用功能访问效率提升30%