# SPU 管理功能规格说明

## 1. 功能概述

### 1.1 功能名称
SPU 管理（Standard Product Unit 管理）

### 1.2 业务价值
作为商品主数据（MDM）的核心组件，SPU 管理功能为影院商业中心平台建立统一的商品数据框架，为 SKU、PIM 内容、价格、BOM、场景包等模块提供标准化的上游数据基础，实现商品信息的统一管理和高效复用。

### 1.3 功能定位
SPU 管理定义"这一类商品是什么"而非"具体哪一条 SKU"，是商品数据管理的源头和骨架。

### 1.4 核心目标
- 建立统一的"标准产品"维度，避免 SKU 直接散落管理
- 为后续模块提供稳定的主数据基础
- 提升商品上新效率，通过复用 SPU 定义快速派生 SKU
- **实现策略**：前端功能优先，使用Mock数据，不涉及后端应用开发
- **范围限制**：不考虑权限认证系统，专注于核心业务功能展示

## Clarifications

### Session 2025-12-11
- Q: SPU状态枚举应该支持哪些状态？ → A: 三状态（草稿/启用/停用）
- Q: SPU唯一性校验应该基于什么规则？ → A: 仅品牌+SPU名称组合唯一
- Q: 商品分类应该支持几级分类结构？ → A: 三级类目体系（一级/二级/三级）
- Q: 已关联SKU时的类目/品牌编辑如何处理？ → A: 允许编辑但需审批流程
- Q: 列表页面应该显示哪些详细字段？ → A: 包含SPU编码、名称、品牌、类目、状态、创建时间/创建人、修改时间/修改人、关联SKU数量

### Session 2025-12-11 (Implementation Scope)
- Q: 是否考虑权限与认证功能？ → A: 不考虑权限与认证系统
- Q: 数据获取方式如何实现？ → A: 通过Mock数据实现前端功能展示
- Q: 是否涉及后端应用开发？ → A: 不考虑后端应用，专注前端功能实现

## 1.5 实现范围与策略

### 1.5.1 范围限制
- **排除功能**：
  - 权限管理与认证系统
  - 用户登录、角色分配、权限控制
  - 后端API服务开发
  - 数据库设计与实现
  - 实际数据持久化操作

- **包含功能**：
  - 前端用户界面完整实现
  - 业务逻辑的UI交互展示
  - Mock数据驱动的功能演示
  - 完整的用户操作流程
  - 数据验证和表单处理

### 1.5.2 技术实现策略
- **Mock数据服务**：使用前端Mock API模拟数据交互
- **状态管理**：通过Redux管理前端状态，模拟后端数据变更
- **组件化开发**：完整实现所有UI组件和交互逻辑
- **数据模拟**：创建完整的测试数据集，覆盖各种业务场景

### 1.5.3 验证方式
- **功能演示**：通过Mock数据展示完整的业务流程
- **UI/UX验证**：验证界面设计和用户交互体验
- **业务逻辑验证**：验证前端业务规则的正确实现
- **响应式设计**：确保不同设备上的良好展示效果

## 2. 业务场景与用户故事

### 2.1 主要用户角色
- **商品管理员**：负责创建和维护 SPU 数据
- **品类经理**：管理商品分类和属性框架
- **运营人员**：基于 SPU 快速创建 SKU

### 2.2 核心用户故事

#### 故事1：创建新 SPU
**作为** 商品管理员
**我想要** 创建新的 SPU 记录
**以便** 为一类商品建立标准化的数据框架

#### 故事2：管理商品属性
**作为** 品类经理
**我想要** 定义和维护商品属性模板
**以便** 确保 SKU 数据的一致性和规范性

#### 故事3：SKU 派生
**作为** 运营人员
**我想要** 基于现有 SPU 快速创建新的 SKU
**以便** 提高商品上新效率

## 3. 业务概念与约束

### 3.1 核心概念定义

#### SPU（Standard Product Unit）
- **定义**：在同一品牌、同一属性组合下的标准产品单元
- **示例**：可口可乐 500ml 瓶装
- **特点**：定义商品的本质属性，不涉及具体的销售条码或价格

#### SKU（Stock Keeping Unit）
- **定义**：具体的可销售单位，隶属于某个 SPU
- **示例**：门店售价不同/条码不同/包装略有差别的具体销售单位
- **关系**：一个 SPU 下可关联多个 SKU，一个 SKU 必须隶属于一个 SPU

### 3.2 业务规则约束

1. **层级关系**：SPU → SKU（一对多关系）
2. **数据唯一性**：SPU 名称在同一品牌下必须唯一（品牌+SPU名称组合唯一）
3. **属性继承**：SKU 继承 SPU 的基础属性和分类
4. **状态管理**：SPU 的状态变更会影响关联的 SKU

### 3.3 状态枚举与流转规则

#### 状态定义
- **草稿**：未对外使用，仅内部编辑阶段
- **启用**：可被 SKU 使用，可被其他模块引用
- **停用**：保留历史数据，不允许创建新 SKU 关联

#### 状态流转约束
- 草稿 → 启用：需要字段完整校验通过
- 启用 → 停用：若存在启用状态的 SKU，需给出风险提示
- 停用 → 启用：允许恢复使用

#### 核心字段编辑限制
- 已启用且存在关联SKU时，修改类目/品牌需要审批流程
- 审批通过前，显示"主数据变更流程中"状态
- 一期可实现简化审批机制，二期完善完整工作流

## 4. 功能需求

### 4.1 SPU 数据管理

#### 4.1.1 基础信息管理
- **SPU 名称**：标准产品名称，必填，最大100字符
- **SPU 编码**：系统自动生成的唯一标识
- **品牌选择**：从品牌库中选择，必填
- **商品分类**：三级分类选择（一级/二级/三级），必填
- **SPU 描述**：商品的基础描述信息
- **状态管理**：草稿/启用/停用状态控制
- **标准简称**：可选字段，用于简化显示
- **标准单位**：可选字段，如瓶/包/盒等

#### 4.1.2 属性框架管理
- **属性模板**：基于分类自动加载属性模板
- **核心属性**：容量、口味、材质等关键属性
- **属性类型**：支持文本、数字、选择、多选等类型
- **属性验证**：必填项验证和数据格式校验

#### 4.1.3 关联管理
- **SKU 关联**：查看和管理关联的 SKU 列表
- **关联关系**：显示 SKU 与 SPU 的继承关系
- **批量操作**：支持批量创建和管理关联 SKU

### 4.2 分类与品牌管理

#### 4.2.1 分类体系
- **三级分类**：标准三级分类结构（一级/二级/三级）
- **分类属性**：每个分类可定义专属属性模板
- **级联选择**：支持级联式分类选择器
- **分类权限**：可设置分类的编辑权限

#### 4.2.2 品牌管理
- **品牌信息**：品牌名称、Logo、描述等基础信息
- **品牌状态**：启用/停用状态管理
- **品牌关联**：显示品牌下的所有 SPU

### 4.3 搜索与筛选

#### 4.3.1 搜索功能
- **关键词搜索**：支持 SPU 名称、编码、描述的模糊搜索
- **高级搜索**：多条件组合搜索
- **搜索历史**：保存用户常用搜索条件

#### 4.3.2 筛选功能
- **分类筛选**：按商品分类层级筛选
- **品牌筛选**：按品牌筛选 SPU
- **状态筛选**：按启用/停用/草稿状态筛选
- **创建时间筛选**：按时间范围筛选

### 4.4 数据导入导出

#### 4.4.1 批量导入
- **模板下载**：提供标准 Excel 导入模板
- **数据验证**：导入前进行数据格式和完整性验证
- **导入结果**：详细的导入成功失败报告
- **错误处理**：提供具体的错误信息和修正建议

#### 4.4.2 数据导出
- **导出格式**：支持 Excel、CSV 格式导出
- **字段选择**：可选择导出的数据字段
- **筛选导出**：支持按筛选条件导出数据

### 4.5 SPU 列表管理

#### 4.5.1 列表展示
- **表格展示**：SPU 编码、SPU 名称、品牌、类目、状态（启用/停用/草稿）、创建时间/创建人、最近修改时间/修改人、关联 SKU 数量
- **排序支持**：创建时间、修改时间字段排序
- **分页加载**：支持大数据量的分页展示

#### 4.5.2 操作功能
- **顶部按钮**：「新建 SPU」
- **行操作**：查看详情、编辑、复制新建、启用/停用
- **批量操作**：批量状态变更、批量导出
- **权限控制**：无编辑权限用户仅可查看列表和详情

#### 4.5.3 搜索筛选
- **关键字搜索**：按 SPU 名称/编码模糊搜索
- **品牌筛选**：品牌下拉选择
- **类目筛选**：级联分类选择
- **状态筛选**：启用/停用/草稿状态筛选
- **操作按钮**：查询、重置

### 4.6 SPU 详情与编辑

#### 4.6.1 详情页面
- **基本信息区**：SPU 编码、名称、品牌、类目路径、状态、创建/修改信息
- **属性区**：属性名-属性值列表展示
- **关联区**：关联 SKU 列表（只读），包含入口链接

#### 4.6.2 创建功能
- **创建入口**：列表页顶部「新建 SPU」、复制新建
- **必填字段**：SPU 名称、品牌、三级类目、核心属性、状态（默认草稿）
- **业务规则**：类目选择后动态加载属性模板

#### 4.6.3 编辑功能
- **编辑入口**：列表行操作「编辑」、详情页「编辑」
- **可编辑内容**：品牌、类目、名称、简称、属性值、状态
- **限制规则**：已启用且关联SKU时，核心字段编辑需要审批

## 5. 用户界面需求

### 5.1 SPU 列表页面
- **表格展示**：SPU 编码、SPU 名称、品牌、类目、状态（启用/停用/草稿）、创建时间/创建人、最近修改时间/修改人、关联 SKU 数量
- **排序支持**：创建时间、修改时间字段排序
- **操作按钮**：查看详情、编辑、复制新建、启用/停用、批量操作
- **批量操作**：批量状态变更、批量导出
- **搜索筛选**：关键字搜索（名称/编码）、品牌下拉、类目级联、状态筛选、查询/重置
- **功能展示**：所有操作按钮均可点击，通过Mock数据响应

### 5.2 SPU 详情页面
- **基础信息**：SPU 基础属性展示和编辑
- **属性管理**：分类属性的定义和维护
- **关联 SKU**：显示和管理关联的 SKU 列表
- **操作历史**：SPU 的修改历史记录

### 5.3 SPU 创建/编辑页面
- **分步骤表单**：基础信息 → 属性设置 → 确认保存
- **表单验证**：实时数据验证和错误提示
- **保存选项**：保存草稿、直接启用
- **预览功能**：预览 SPU 的展示效果

## 6. 非功能性需求

### 6.1 性能需求
- **响应时间**：列表加载时间不超过3秒
- **搜索性能**：搜索响应时间不超过2秒
- **并发支持**：支持100个并发用户同时操作

### 6.2 数据管理
- **数据验证**：前端表单数据验证和格式检查
- **状态管理**：Mock数据的统一状态管理
- **数据模拟**：完整的测试数据集和场景覆盖

### 6.3 数据完整性
- **数据验证**：严格的数据格式和业务规则验证
- **关联约束**：确保 SPU-SKU 关联关系的完整性
- **事务处理**：数据操作的原子性保证

## 7. 功能交互需求

### 7.1 模块间交互模拟
- **SKU 管理**：模拟 SKU 列表与 SPU 的关联展示
- **价格管理**：模拟价格信息的展示和编辑
- **库存管理**：模拟库存状态的展示
- **PIM 内容管理**：模拟商品内容的展示和编辑

### 7.2 用户交互模拟
- **操作反馈**：模拟所有用户操作的成功/失败反馈
- **数据更新**：模拟数据的实时更新和状态同步
- **文件处理**：模拟图片上传和文件管理功能

## 8. 成功标准

### 8.1 演示效果指标
- **功能完整性**：所有核心业务功能100%可演示
- **UI/UX质量**：界面设计用户评分达到4.5分（5分制）
- **交互流畅性**：所有操作响应时间<2秒

### 8.2 技术实现指标
- **组件复用率**：前端组件复用率达到80%以上
- **Mock数据覆盖**：业务场景数据覆盖率100%
- **响应式设计**：支持桌面端和移动端适配

## 9. 风险与约束

### 9.1 技术风险
- **Mock数据复杂度**：完整业务场景的数据模拟复杂度高
- **组件耦合度**：前端组件间可能存在过度耦合
- **性能优化**：大量Mock数据的渲染性能挑战

### 9.2 业务约束
- **功能验证限制**：无法验证实际的业务数据流和持久化
- **集成验证缺失**：无法验证与实际后端系统的集成
- **演示范围**：仅限于前端功能展示，不涉及完整业务流程

## 10. 验收标准

### 10.1 功能演示验收
- [ ] SPU 列表页面展示和操作功能完整
- [ ] SPU 创建/编辑表单功能正常
- [ ] 分类和品牌选择功能正常
- [ ] 搜索筛选功能准确响应
- [ ] 状态管理功能正常展示
- [ ] 关联SKU展示功能正常
- [ ] 所有交互操作有正确的Mock数据响应

### 10.2 技术实现验收
- [ ] Mock数据服务覆盖所有业务场景
- [ ] Redux状态管理功能正常
- [ ] 前端组件设计和复用合理
- [ ] 页面加载和交互响应性能良好
- [ ] 响应式设计在不同设备上正常

### 10.3 用户体验验收
- [ ] 界面设计美观直观，符合设计规范
- [ ] 操作流程顺畅，用户交互体验良好
- [ ] 表单验证和错误提示清晰准确
- [ ] 功能演示完整，能够展示核心业务价值

---

**版本历史**：
- v1.0 - 初始版本创建
- v1.1 - 澄清状态枚举、唯一性规则、分类结构、编辑限制、列表字段
- v1.2 - 明确实现范围：排除权限认证，采用Mock数据，专注前端功能
- 创建日期：2025-12-11
- 创建者：Claude AI
- 最后更新：2025-12-11（范围澄清）