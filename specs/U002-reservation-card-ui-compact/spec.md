# Feature Specification: 预约卡片紧凑布局优化

**Feature Branch**: `U002-reservation-card-ui-compact`
**Created**: 2025-12-24
**Status**: Draft
**Input**: User description: "小程序的 预约卡片的高度要缩小 字体也要缩小 让布局更加合理，还包括 按钮等控件"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 预约列表浏览体验优化 (Priority: P1)

作为影院场景包的用户,我希望在小程序的"我的预约"列表页面能够一屏看到更多的预约卡片,而不是因为卡片过高导致需要频繁滚动,这样我可以快速浏览和找到目标预约单,提升查找效率。

**Why this priority**: 这是核心用户体验改进,直接影响用户在预约列表页的浏览效率。通过缩小卡片高度和字体,用户可以在同一屏幕内看到更多预约记录,减少滚动次数,加快信息获取速度。这是最直接、最明显的价值体现。

**Independent Test**: 可以通过在小程序"我的预约"页面加载多条预约记录(至少5条),对比优化前后一屏显示的卡片数量来独立测试。测试人员能够直观感受到布局的紧凑性和信息密度的提升,验证是否实现了"一屏看到更多预约"的目标。

**Acceptance Scenarios**:

1. **Given** 用户在"我的预约"列表页面,有5条或以上预约记录,**When** 页面加载完成,**Then** 一屏内应至少显示3-4条完整的预约卡片(相比优化前的2条卡片有明显提升)
2. **Given** 用户查看预约卡片,**When** 卡片显示预约信息(场景包名称、日期、时段、状态、金额),**Then** 所有关键信息应清晰可读,字体大小适中,不会因过小而影响阅读体验
3. **Given** 用户在列表页滚动浏览,**When** 快速滑动屏幕,**Then** 卡片间的间距应合理,视觉上不会显得拥挤,保持良好的视觉呼吸感
4. **Given** 用户查看预约卡片中的按钮(如"立即支付"、"查看详情"),**When** 点击按钮,**Then** 按钮尺寸应足够大(符合移动端触控规范),点击热区不会过小导致误触或难以点击
5. **Given** 用户在不同设备(iPhone SE小屏、iPhone 14标准屏、iPad大屏)查看预约列表,**When** 页面渲染,**Then** 卡片布局应在各种屏幕尺寸下保持合理,不会出现内容溢出或过度压缩的情况

---

### User Story 2 - 预约详情可读性保持 (Priority: P1)

作为影院场景包的用户,我希望在预约卡片缩小字体和高度后,仍然能够清晰阅读所有关键信息(场景包名称、预订时段、套餐、金额、状态),不会因为字体过小或行距过紧导致阅读困难或信息混淆,确保优化不会牺牲可读性。

**Why this priority**: 可读性是用户体验的底线,优化布局的前提是不能损害用户获取信息的能力。如果字体过小或布局过紧导致阅读困难,反而会降低用户体验,背离优化的初衷。因此,在缩小尺寸的同时保持可读性是P1优先级的必要条件。

**Independent Test**: 可以通过可用性测试独立验证,邀请不同年龄段的测试用户(包括40岁以上的中年用户)查看优化后的预约卡片,要求他们在5秒内识别出卡片中的关键信息(如预订日期、金额、状态),统计识别准确率和反馈意见,确保可读性不低于优化前。

**Acceptance Scenarios**:

1. **Given** 用户查看预约卡片中的场景包名称,**When** 名称为中文(如"浪漫求婚场景包"),**Then** 字体大小应不小于12px(或28rpx),确保在移动端清晰可读
2. **Given** 用户查看预约卡片中的金额信息,**When** 金额为"¥3500.00",**Then** 金额数字应使用醒目字体(如加粗或使用强调色),确保用户能快速识别价格
3. **Given** 用户查看预约卡片中的状态标签(待确认/已确认/已取消/已完成),**When** 状态为"已确认",**Then** 状态标签应使用颜色区分(如绿色表示已确认),并保持足够的字号和对比度
4. **Given** 用户查看预约卡片中的多行文本(如备注信息),**When** 备注内容较长,**Then** 行距应适中,避免文字过于拥挤导致阅读困难
5. **Given** 用户在弱光环境(如晚上或室内灯光较暗)查看预约卡片,**When** 查看文本信息,**Then** 文字与背景的对比度应足够高,确保在各种光线条件下都能清晰阅读

---

### User Story 3 - 按钮和交互控件触控优化 (Priority: P2)

作为影院场景包的用户,我希望预约卡片中的按钮(如"立即支付"、"查看详情"、"取消预约")在缩小后仍然保持足够的尺寸和点击热区,不会因为按钮过小导致误触或难以点击,确保移动端操作的便捷性和准确性。

**Why this priority**: 按钮的可点击性直接影响用户完成关键操作(如支付、查看详情)的效率。虽然优先级为P2(相比整体布局优化和可读性),但仍然是重要的用户体验细节,确保优化不会影响用户的核心交互流程。

**Independent Test**: 可以通过移动端触控测试独立验证,邀请测试用户在真实设备上点击预约卡片中的各个按钮,统计首次点击成功率和误触率,确保按钮尺寸符合移动端触控规范(Apple HIG建议最小44x44pt,Android建议最小48x48dp)。

**Acceptance Scenarios**:

1. **Given** 用户在预约卡片上看到"立即支付"按钮,**When** 尝试点击按钮,**Then** 按钮的点击热区应不小于44x44像素(或88x88rpx),确保用户能准确点击而不会误触周围元素
2. **Given** 用户在预约卡片上看到多个按钮(如"查看详情"和"取消预约"),**When** 按钮并排显示,**Then** 按钮之间的间距应至少为8px(或16rpx),避免误触相邻按钮
3. **Given** 用户点击按钮后,**When** 按钮触发操作,**Then** 应有明确的视觉反馈(如按钮颜色变化或加载动画),告知用户操作已响应
4. **Given** 用户使用单手操作手机,**When** 尝试点击卡片底部的按钮,**Then** 按钮位置应在拇指可触及的区域,不会因为卡片过高或布局不合理导致操作困难

---

### Edge Cases

- **长文本溢出**: 当场景包名称或备注信息过长(超过15个字符)时,如何处理文本溢出?使用省略号(`...`)截断还是折行显示?如果折行,是否会导致卡片高度增加?
- **多设备适配**: 在不同屏幕尺寸的设备(iPhone SE 320px宽、iPhone 14 390px宽、iPad 768px宽)上,卡片布局是否需要动态调整字体大小和间距?
- **状态标签数量**: 如果预约单同时显示多个状态标签(如"已确认"+"待支付"),布局是否会过于拥挤?
- **无预约记录**: 当用户的"我的预约"列表为空时,空状态提示的字体和布局是否也需要优化?
- **加载状态**: 预约列表加载中或加载失败时,占位符或错误提示的字体大小是否与优化后的卡片保持一致?
- **辅助功能**: 对于使用辅助功能(如放大文字、高对比度模式)的用户,优化后的布局是否仍然可用?

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 预约卡片的整体高度必须减小,相比当前版本降低至少20%-30%,确保在标准移动设备(375px宽的屏幕)上一屏能显示至少3-4条完整卡片
- **FR-002**: 预约卡片中的主要文本(场景包名称、日期、时段)字体大小必须缩小,但不得小于12px(或28rpx),确保在移动端保持清晰可读
- **FR-003**: 预约卡片中的次要文本(备注、描述性文字)字体大小必须缩小至10px-11px(或24rpx-26rpx),与主要文本形成视觉层级区分
- **FR-004**: 预约卡片中的按钮(如"立即支付"、"查看详情")尺寸必须优化,高度降低至不小于32px(或64rpx),宽度根据按钮文字自适应,但最小点击热区不得小于44x44像素
- **FR-005**: 预约卡片内部的垂直间距(padding和margin)必须缩小,顶部和底部内边距从当前值减少至8px-12px(或16rpx-24rpx),行间距缩小至4px-8px(或8rpx-16rpx)
- **FR-006**: 预约卡片之间的间距必须优化,卡片间的垂直间距缩小至8px-12px(或16rpx-24rpx),保持视觉呼吸感的同时提升信息密度
- **FR-007**: 预约卡片中的状态标签(待确认/已确认/已取消/已完成)必须保持清晰可识别,字体大小不小于10px(或24rpx),并使用颜色和背景色区分不同状态
- **FR-008**: 预约卡片中的金额信息必须保持醒目显示,字体大小不小于14px(或30rpx),使用加粗或强调色(如橙色、红色)突出显示
- **FR-009**: 预约卡片的圆角、阴影等视觉效果必须保持或简化,确保优化后的卡片仍然具有良好的视觉层次和卡片感
- **FR-010**: 优化必须同时应用于所有预约卡片相关页面,包括"我的预约"列表页、场景包详情页的预约历史区域(如有)
- **FR-011**: 预约卡片中的图标(如场景包缩略图、状态图标)尺寸必须缩小至16px-20px(或32rpx-40rpx),与缩小后的文字比例协调
- **FR-012**: 长文本(如场景包名称超过15个字符)必须使用省略号截断或限制最大行数(如2行),避免文本溢出导致卡片高度不一致
- **FR-013**: 按钮文字必须简洁明了,对于较长的按钮文字(如"立即支付并确认预约")需要缩短为"立即支付",确保按钮宽度合理
- **FR-014**: 优化后的布局必须在不同屏幕尺寸的设备上保持一致性和可用性,包括小屏设备(iPhone SE 320px宽)和大屏设备(iPad 768px宽)
- **FR-015**: 优化必须考虑辅助功能,当用户启用系统字体放大功能时,卡片布局应能自适应调整,避免文本溢出或重叠

### Key Entities

本功能为纯UI优化,不涉及新增数据实体。涉及的现有实体包括:

- **预约单(Reservation Order)**: 在"我的预约"列表和详情页展示的核心数据,包含场景包名称、预订日期、时段、套餐、金额、状态等字段。UI优化将改变这些字段在卡片中的显示样式和布局。
- **场景包(Scenario Package)**: 预约单关联的场景包信息,卡片中显示场景包名称和缩略图,优化将缩小图标和文字尺寸。
- **预约状态(Reservation Status)**: 预约单的状态标签(待确认/已确认/已取消/已完成),优化将调整状态标签的字体大小和显示样式。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 优化后,用户在标准移动设备(375px x 667px屏幕,如iPhone SE 2020)的"我的预约"列表页,一屏内能显示至少3条完整的预约卡片,相比优化前的2条卡片提升50%的信息密度
- **SC-002**: 优化后,预约卡片的平均高度降低至120px-150px(或240rpx-300rpx),相比优化前的180px-220px高度减少至少20%-30%
- **SC-003**: 可用性测试中,90%的测试用户能够在5秒内准确识别预约卡片中的关键信息(场景包名称、预订日期、金额、状态),识别准确率不低于优化前
- **SC-004**: 触控测试中,用户点击预约卡片中的按钮(如"立即支付"、"查看详情")的首次成功率达到95%以上,误触率低于5%
- **SC-005**: 优化后的预约卡片在不同屏幕尺寸设备(小屏iPhone SE、标准iPhone 14、大屏iPad)上的可读性和可操作性评分不低于4分(5分制),用户满意度调查显示无明显抱怨
- **SC-006**: 优化上线后,用户在"我的预约"列表页的平均停留时间缩短10%-15%(因为能更快找到目标预约),滚动次数减少20%-30%

## Assumptions

- 假设当前预约卡片的设计已在U001-reservation-order-management功能中实现,本次优化基于现有设计进行调整
- 假设用户主要在移动端(微信小程序或H5)查看预约列表,优化重点为移动端体验,桌面端(如iPad横屏)为次要考虑
- 假设预约卡片中显示的信息字段(场景包名称、日期、时段、状态、金额等)保持不变,仅调整字体大小、间距和布局
- 假设优化后的字体大小和间距符合Taro框架的rpx单位规范,能够在微信小程序和H5端保持一致的视觉效果
- 假设用户的设备屏幕分辨率为标准移动设备(375px-414px宽),极端小屏(如320px)和极端大屏(如768px以上)为边缘情况
- 假设优化不涉及预约卡片的交互逻辑(如点击跳转、状态变更),仅调整视觉呈现
- 假设优化后的设计需经过设计师审核,确保符合品牌视觉规范和一致性

## Dependencies

- **依赖U001-reservation-order-management**: 预约单管理系统功能,提供了"我的预约"列表页和预约卡片的初始设计与实现,本次优化基于该功能进行UI调整
- **依赖F001-miniapp-tab-bar**: 小程序底部导航栏功能,提供了"我的"(profile)页面入口,预约列表页通过该入口访问,优化需确保与TabBar导航的视觉一致性
- **依赖Taro UI规范**: 优化需遵循Taro框架的设计规范和rpx单位系统,确保在微信小程序和H5端的一致性
- **依赖设计系统**: 优化需参考项目的设计系统(如颜色、字体、间距等设计token),确保与其他页面的视觉一致性

## Related Features

- **U001-reservation-order-management**: 预约单管理系统,包含预约列表页和预约卡片的初始实现,本次优化直接修改该功能中的UI组件
- **F001-miniapp-tab-bar**: 小程序TabBar导航,提供了访问"我的预约"的入口,优化后的卡片需与整体导航体验协调

## Clarifications

### Session 2025-12-24

- **Q: 优化的具体数值标准是否需要设计师确认?** → 本规格提供了建议的数值范围(如字体大小12px-14px,卡片高度120px-150px),实际开发前需要设计师根据视觉效果进行微调和确认,确保符合品牌视觉规范。
