# Scrum 项目管理系统迁移指南

**@spec T004-lark-project-management**

**日期**: 2025-12-31
**迁移类型**: 从传统项目管理迁移到 Scrum 敏捷管理

---

## 📋 迁移概述

本次迁移将项目管理结构从传统的任务跟踪模式调整为标准 Scrum 敏捷开发模式。

### 变更内容

| 项目 | 变更前 | 变更后 |
|------|--------|--------|
| 管理模式 | 任务跟踪 | Scrum 敏捷 |
| 核心实体 | 5 个表 | 5 个表 (重新设计) |
| 工作流 | 简单任务流转 | Sprint 迭代流程 |
| 估算方式 | 工时估算 | 故事点 + 工时 |

---

## 🗂️ 新旧表对照

### 新表结构 (Scrum 模式)

| 表名 | Table ID | 用途 | 状态 |
|------|---------|------|------|
| 产品待办列表 (Product Backlog) | `tblDiernIQoFU9Yr` | Epic/User Story 管理 | ✅ 已创建 |
| 迭代 (Sprint) | `tbllbcahbnPvidbE` | Sprint 周期管理 | ✅ 已创建 |
| 任务 (Task) | `tblMBeNZuFTbVcBD` | 开发任务跟踪 | ✅ 已创建 |
| 缺陷 (Bug) | `tblWW1KBHxoYVZsq` | Bug 管理 | ✅ 已创建 |
| 技术债 (Technical Debt) | `tblDLT5rb0ofyzfR` | 技术债务跟踪 | ✅ 已创建 |

### 旧表结构 (需要删除)

| 表名 | Table ID | 操作 |
|------|---------|------|
| 数据表 | `tbl2AwKEGqEb06eM` | ⚠️ 待删除 |
| 测试记录 | `tblucYhJLq5TJ5xA` | ⚠️ 待删除 |
| 功能矩阵 | `tblSxui0BbdDAv8t` | ⚠️ 待删除 |
| Bug 跟踪 | `tblTTpzolSdR6jVT` | ⚠️ 待删除 |
| 技术债 (旧) | `tbley0KI6czXiXSC` | ⚠️ 待删除 |
| 任务管理 | `tblOMq950cQMfL0p` | ⚠️ 待删除 |

---

## 🔄 数据迁移步骤

### Step 1: 备份旧数据 (可选)

如果旧表中有重要数据，建议先导出备份：

1. 打开飞书多维表格
2. 对于每个旧表，点击右上角"导出"
3. 选择"Excel" 或 "CSV" 格式
4. 保存到本地

### Step 2: 手动删除旧表

**注意**: 飞书 API 不支持删除表操作，需要手动删除。

1. 打开飞书多维表格 App Token: `Y05Mb7greapFiSseRpoc5XkXnrb`
2. 找到以下旧表并删除：

   **删除步骤**:
   - 点击表名右侧的 `...` 菜单
   - 选择"删除表"
   - 确认删除

   **待删除表列表**:
   - [ ] 数据表
   - [ ] 测试记录
   - [ ] 功能矩阵
   - [ ] Bug 跟踪
   - [ ] 技术债 (旧版本)
   - [ ] 任务管理

### Step 3: 验证新表结构

删除旧表后，确认只剩下 5 个新表：

```
✅ 产品待办列表 (Product Backlog)
✅ 迭代 (Sprint)
✅ 任务 (Task)
✅ 缺陷 (Bug)
✅ 技术债 (Technical Debt)
```

---

## 📊 字段对照表

### 任务管理 → 任务 (Task)

| 旧字段 | 新字段 | 说明 |
|--------|--------|------|
| 任务标题 | 任务标题 | 保持不变 |
| 优先级 | 优先级 | 保持不变 |
| 状态 | 状态 | 新增"🧪 测试中"状态 |
| 负责人 | 负责人 | 保持不变 |
| 关联规格 | spec_id | 字段名调整 |
| 截止日期 | - | 移除 (使用 Sprint 管理) |
| 标签 | 标签 | 保持不变 |
| 进度 | - | 移除 (使用状态管理) |
| 预计工时 | 预估工时 | 字段名调整 |
| 实际工时 | 实际工时 | 保持不变 |
| 备注 | - | 移除 |
| 创建时间 | 创建时间 | 保持不变 |
| - | User Story | 新增关联字段 |
| - | Sprint | 新增关联字段 |
| - | 完成时间 | 新增字段 |

### Bug 跟踪 → 缺陷 (Bug)

| 旧字段 | 新字段 | 说明 |
|--------|--------|------|
| Bug 标题 | Bug 标题 | 保持不变 |
| 严重程度 | 严重程度 | 选项调整 (Critical/High/Medium/Low) |
| 状态 | 状态 | 新增"🧪 待验证"状态 |
| 报告人 | 报告人 | 保持不变 |
| 负责人 | 负责人 | 保持不变 |
| 关联规格 | spec_id | 字段名调整 |
| 发现日期 | - | 移除 (使用创建时间) |
| 修复日期 | - | 移除 |
| 复现步骤 | 复现步骤 | 保持不变 |
| 环境信息 | - | 移除 |
| 备注 | - | 移除 |
| - | 关联 Story | 新增关联字段 |
| - | Sprint | 新增关联字段 |
| - | 发现环境 | 新增单选字段 (Dev/Test/UAT/Production) |

### 技术债 (旧) → 技术债 (Technical Debt)

| 旧字段 | 新字段 | 说明 |
|--------|--------|------|
| 债务标题 | 债务标题 | 保持不变 |
| 严重程度 | 影响程度 | 字段名调整 |
| 状态 | 状态 | 保持不变 |
| 影响范围 | 影响范围 | 保持不变 |
| 关联规格 | spec_id | 字段名调整 |
| 预计工作量 | 预估工时 | 字段名调整 |
| 负责人 | 负责人 | 保持不变 |
| 发现日期 | - | 移除 (使用创建时间) |
| 解决日期 | - | 移除 |
| 备注 | - | 移除 |
| - | 类型 | 新增单选字段 (代码质量/架构/性能/安全/文档) |
| - | Sprint | 新增关联字段 |

---

## 🆕 新增实体

### 产品待办列表 (Product Backlog) - 全新

这是 Scrum 模式的核心实体，用于管理 Epic 和 User Story。

**关键字段**:
- 待办项 ID: 自动编号 (PBI-001)
- 标题: User Story 标题
- 类型: Epic / User Story / Spike
- 优先级: P0 - P3
- 状态: 待规划 / 已规划 / 开发中 / 已完成 / 已废弃
- 故事点: 1, 2, 3, 5, 8, 13, 21 (斐波那契)
- Sprint: 关联到 Sprint 表
- spec_id: 规格标识符
- 验收标准: Acceptance Criteria
- 描述: User Story 详细描述
- 业务价值: 0-100

### 迭代 (Sprint) - 全新

用于管理 Sprint 周期和进度。

**关键字段**:
- Sprint 名称: 如 "Sprint 24 (2025-01)"
- Sprint 编号: 自动编号 (SP-001)
- 开始日期: Sprint 开始日期
- 结束日期: Sprint 结束日期
- Sprint 目标: 本迭代的目标
- 状态: 规划中 / 进行中 / 已完成 / 已取消
- 总故事点: 自动汇总
- 完成故事点: 已完成的故事点
- 完成率: 自动计算

---

## 🔗 关联关系变化

### 旧模式 (平铺结构)

```
任务 → spec_id (文本)
Bug → spec_id (文本)
技术债 → spec_id (文本)
功能矩阵 → spec_id (文本)
测试记录 → spec_id (文本)
```

### 新模式 (Scrum 层级结构)

```
Sprint
  ├── ProductBacklog (User Story)
  │     ├── Task
  │     └── Bug
  ├── TechnicalDebt
  └── (所有实体仍保留 spec_id 字段)
```

**双向关联字段**:
- Task ↔ ProductBacklog (User Story)
- Task ↔ Sprint
- Bug ↔ ProductBacklog (User Story)
- Bug ↔ Sprint
- TechnicalDebt ↔ Sprint
- ProductBacklog ↔ Sprint

---

## 📝 迁移后操作清单

### 管理员任务

- [ ] 删除所有旧表 (6 个)
- [ ] 验证新表结构 (5 个)
- [ ] 给团队成员赋予编辑权限
- [ ] 创建常用视图 (按优先级、按 Sprint、我的任务等)
- [ ] 配置自动化规则 (可选)

### 团队培训

- [ ] 组织 Scrum 培训会议
- [ ] 分发 [scrum-workflow.md](./scrum-workflow.md) 文档
- [ ] 演示飞书表操作流程
- [ ] 进行第一次 Sprint Planning

### 文档更新

- [x] 创建 [data-model-scrum.md](./data-model-scrum.md)
- [x] 创建 [scrum-workflow.md](./scrum-workflow.md)
- [ ] 更新 lark-pm skill 文档
- [ ] 更新 README.md

---

## ⚠️ 注意事项

1. **数据备份**: 删除旧表前务必备份重要数据
2. **权限管理**: 删除表后无法恢复，确保团队知晓
3. **渐进迁移**: 建议先试运行 1-2 个 Sprint，再完全废弃旧流程
4. **培训优先**: 确保团队理解 Scrum 流程后再启用新表

---

## 🎯 迁移成功标准

- [ ] 5 个新表已创建并配置完成
- [ ] 6 个旧表已删除
- [ ] 团队成员已获得编辑权限
- [ ] 完成第一次 Sprint Planning
- [ ] 创建了至少 3 个 User Story
- [ ] 创建了至少 5 个 Task
- [ ] 团队成员理解 Scrum 工作流

---

## 📞 支持与反馈

如在迁移过程中遇到问题，请联系：

- **Scrum Master**: [指定人员]
- **技术支持**: 飞书群 / Slack Channel
- **文档反馈**: 在项目 Git 仓库提 Issue

---

**迁移版本**: 1.0.0 → 2.0.0 (Scrum)
**迁移日期**: 2025-12-31
**预计完成**: 2025-01-07
