# =====================================================
# 开发环境配置 (Development)
# 启动方式: mvn spring-boot:run -Dspring-boot.run.profiles=dev
# 或: java -jar app.jar --spring.profiles.active=dev
# =====================================================

spring:
  # 数据源配置（本地 Supabase PostgreSQL）
  # 连接格式: postgresql://postgres:[PASSWORD]@127.0.0.1:5432/postgres
  datasource:
    url: jdbc:postgresql://${DB_HOST:127.0.0.1}:${DB_PORT:54322}/postgres
    username: postgres
    password: 2d6ca90031e5ba51d8200b03922c37b7
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 5
      minimum-idle: 2
      connection-timeout: 30000

  # JPA 开发环境配置
  jpa:
    hibernate:
      ddl-auto: update  # 开发环境自动更新表结构
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

  # Flyway 开发环境 (暂时禁用，迁移依赖需要整理)
  flyway:
    enabled: false

# 日志配置 - 开发环境详细日志
logging:
  level:
    root: INFO
    com.cinema.hallstore: DEBUG
    com.cinema.beverage: DEBUG
    com.cinema.product: DEBUG
    com.cinema.client: DEBUG
    org.springframework.web: DEBUG
    org.springframework.web.reactive.function.client: TRACE
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  pattern:
    console: "%d{HH:mm:ss.SSS} %clr(%-5level) %cyan([%thread]) %logger{36} - %msg%n"
