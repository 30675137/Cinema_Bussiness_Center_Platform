# @spec T002-e2e-test-generator
# Sample E2E Scenario for Testing: Create Beverage Order

scenario_id: E2E-ORDER-001
spec_ref: O003
title: 创建饮品订单
description: 测试用户浏览商品、加入购物车并创建订单的流程

tags:
  module: [order]
  channel: [web, weapp]
  deploy: [saas]
  priority: p1
  smoke: true

preconditions:
  role: customer
  testdata_ref: orderTestData.scenario_001

steps:
  - action: login
    description: 用户登录
  - action: browse_product
    params:
      testdata_ref: orderTestData.product
    description: 浏览饮品商品
  - action: add_to_cart
    params:
      testdata_ref: orderTestData.product
      quantity: 2
    description: 加入购物车(数量2)
  - action: checkout
    description: 进入结算页面
  - action: create_order
    params:
      testdata_ref: orderTestData.order_data
    description: 创建订单

assertions:
  - type: ui
    check: toast_message_shown
    params:
      message: 订单创建成功
  - type: ui
    check: element_visible
    params:
      selector: .order-confirmation
  - type: api
    check: response_status_is
    params:
      expected: 201
  - type: api
    check: response_field_contains
    params:
      field: data.orderId
      expected: "ORD"

artifacts:
  trace: always
  video: on-failure
  screenshot: always

metadata:
  created_at: "2025-12-30T10:00:00Z"
  created_by: test-scenario-author
  version: "1.0"
