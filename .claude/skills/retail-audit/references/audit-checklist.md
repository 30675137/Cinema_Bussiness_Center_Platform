# 零售系统审计检查清单

## 1. 商品管理审计

### 数据模型
- [ ] SPU/SKU 是否分离
- [ ] 是否支持多规格（颜色、尺寸等）
- [ ] SKU 是否有唯一编码
- [ ] 是否支持商品分类（多级）
- [ ] 是否支持品牌管理
- [ ] 是否有商品状态管理（上架/下架）
- [ ] 是否记录商品变更历史

### 功能完整性
- [ ] 商品 CRUD 功能
- [ ] 批量导入/导出
- [ ] 商品搜索/筛选
- [ ] 图片管理（上传、裁剪、CDN）
- [ ] 富文本描述支持
- [ ] SEO 优化字段

### 代码审查
- [ ] 是否使用 DTO 传输对象
- [ ] 是否有数据验证（Zod/Joi）
- [ ] API 响应格式是否统一
- [ ] 是否有单元测试

---

## 2. 库存管理审计

### 数据模型
- [ ] 是否支持多仓库
- [ ] 库存字段是否完整（可用、锁定、损坏）
- [ ] 是否有库存事务记录表
- [ ] 是否有安全库存设置
- [ ] 是否记录库存操作日志

### 核心功能
- [ ] 库存扣减是否幂等
- [ ] 是否有库存预占机制
- [ ] 是否支持库存调整（盘点、损耗）
- [ ] 是否有库存预警功能
- [ ] 是否支持库存调拨

### 代码审查
- [ ] 库存扣减是否原子性（事务）
- [ ] 是否有并发控制（乐观锁/悲观锁）
- [ ] 是否有防超卖机制
- [ ] 是否有库存操作审计日志

---

## 3. 订单管理审计

### 数据模型
- [ ] 订单号是否唯一
- [ ] 是否有完整的订单状态枚举
- [ ] 是否有订单项（order_items）表
- [ ] 是否有订单日志表
- [ ] 是否记录订单快照（商品价格、名称）
- [ ] 是否支持发票信息

### 订单流程
- [ ] 是否有清晰的订单状态机
- [ ] 是否支持订单超时取消
- [ ] 是否支持部分发货
- [ ] 是否支持售后（退款、退货、换货）
- [ ] 是否有订单拆分逻辑

### 代码审查
- [ ] 订单创建是否幂等
- [ ] 是否有订单锁机制（防并发）
- [ ] 状态流转是否通过状态机
- [ ] 是否有完整的订单日志
- [ ] 是否支持订单搜索和导出

---

## 4. 会员系统审计

### 数据模型
- [ ] 是否有会员等级设计
- [ ] 是否有积分字段
- [ ] 是否有积分事务记录表
- [ ] 是否有成长值/经验值
- [ ] 是否支持用户标签

### 功能完整性
- [ ] 会员注册/登录
- [ ] 积分获取/消费/过期
- [ ] 会员等级自动升降级
- [ ] 会员权益管理
- [ ] 用户画像和分群

### 代码审查
- [ ] 密码是否加密存储
- [ ] 敏感信息是否脱敏
- [ ] 是否有积分变动记录
- [ ] 是否有用户行为埋点

---

## 5. 促销系统审计

### 数据模型
- [ ] 是否支持多种促销类型
- [ ] 是否有促销规则表
- [ ] 是否有优惠券表
- [ ] 是否记录促销使用历史
- [ ] 是否有促销优先级/互斥规则

### 功能完整性
- [ ] 满减促销
- [ ] 折扣促销
- [ ] 优惠券发放/使用
- [ ] 促销时间/库存限制
- [ ] 用户限制（新客、会员等级）

### 代码审查
- [ ] 促销计算逻辑是否正确
- [ ] 是否有防刷机制
- [ ] 优惠券是否支持批量生成
- [ ] 促销叠加规则是否清晰

---

## 6. API 设计审计

### RESTful 规范
- [ ] URL 命名是否符合 RESTful
- [ ] HTTP 方法使用是否正确（GET/POST/PUT/DELETE）
- [ ] 是否支持分页（page, pageSize）
- [ ] 是否支持排序（sort）
- [ ] 是否支持筛选（filter）

### 响应格式
- [ ] 是否有统一的响应格式
- [ ] 成功响应格式是否一致
- [ ] 错误响应是否包含错误码和消息
- [ ] 是否有时间戳字段

### 安全性
- [ ] 是否有认证机制（JWT/Token）
- [ ] 是否有权限验证
- [ ] 是否有接口限流
- [ ] 是否防止 SQL 注入

---

## 7. 数据库设计审计

### 表结构
- [ ] 主键是否使用 UUID 或雪花 ID
- [ ] 是否有 created_at/updated_at 字段
- [ ] 是否有 created_by/updated_by 字段
- [ ] 是否使用软删除（deleted_at）
- [ ] 是否有版本号字段（乐观锁）

### 索引优化
- [ ] 查询字段是否有索引
- [ ] 外键字段是否有索引
- [ ] 是否有联合索引优化
- [ ] 是否有冗余索引

### 数据类型
- [ ] 金额是否使用 DECIMAL
- [ ] 时间是否使用 TIMESTAMP/DATETIME
- [ ] 枚举是否使用 ENUM 或常量
- [ ] 文本是否区分 VARCHAR/TEXT

---

## 8. 前端审计

### 组件设计
- [ ] 是否遵循原子设计理念
- [ ] 组件是否可复用
- [ ] 是否有 TypeScript 类型定义
- [ ] 是否使用 UI 组件库（Ant Design）

### 状态管理
- [ ] 是否使用状态管理库（Zustand）
- [ ] 是否使用 TanStack Query 管理服务器状态
- [ ] 是否避免 prop drilling
- [ ] 状态更新是否可追踪

### 性能优化
- [ ] 是否使用 React.memo
- [ ] 是否使用 useMemo/useCallback
- [ ] 列表是否使用虚拟滚动
- [ ] 图片是否懒加载

---

## 9. 测试审计

### 测试覆盖率
- [ ] 是否有单元测试
- [ ] 是否有集成测试
- [ ] 是否有 E2E 测试
- [ ] 关键业务流程测试覆盖率是否 100%

### 测试质量
- [ ] 测试用例是否完整
- [ ] 是否测试边界情况
- [ ] 是否测试错误处理
- [ ] 是否有 Mock 数据

---

## 10. 代码质量审计

### 代码规范
- [ ] 是否使用 ESLint/Prettier
- [ ] 是否有统一的命名规范
- [ ] 是否有代码注释（@spec）
- [ ] 是否遵循项目规则（.claude/rules）

### 代码结构
- [ ] 目录结构是否清晰
- [ ] 文件职责是否单一
- [ ] 是否避免循环依赖
- [ ] 是否有代码复用

### Git 提交
- [ ] 提交信息是否符合 Conventional Commits
- [ ] 是否有分支管理规范
- [ ] 是否有 Code Review
