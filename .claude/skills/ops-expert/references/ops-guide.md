# 运营操作指南

本文档提供影院商品管理中台的运营操作指南和常见问题解答。

---

## 快速入门

### 如何开始使用

运营专家通过 `/ops` 命令触发，支持自然语言对话：

```
/ops 查看所有场景包
/ops 发布场景包"VIP派对"
/ops 如何设置预约时间
```

### 基本功能

| 功能 | 说明 | 示例 |
|-----|------|------|
| 数据查询 | 查看场景包、门店、影厅、预约 | "查看已发布的场景包" |
| 操作执行 | 发布、下架、修改设置 | "下架场景包'测试'" |
| 操作指导 | 获取操作步骤和规则说明 | "如何发布场景包" |

---

## 场景包操作指南

### 如何发布场景包

**前置条件**：
1. 场景包状态为"草稿"(DRAFT)
2. 名称不为空
3. 价格已设置且大于 0
4. 已选择至少一个适用影厅
5. 包含至少一项内容（硬权益/软权益/服务项目）

**操作步骤**：
1. 确认场景包满足发布条件
2. 说 "发布场景包'XXX'"
3. 系统显示确认信息
4. 回复"确认"执行发布

**示例对话**：
```
用户: 发布场景包"VIP派对套餐"
助手: 即将发布场景包
      名称: VIP派对套餐
      价格: ¥3500
      适用影厅: VIP厅1号、VIP厅2号

      是否继续？请回复"确认"
用户: 确认
助手: ✅ 场景包"VIP派对套餐"发布成功
```

### 如何下架场景包

**注意事项**：
- 已发布的场景包才能下架
- 下架后用户将无法预约
- 已有的预约不受影响

**操作步骤**：
1. 说 "下架场景包'XXX'"
2. 系统显示影响范围
3. 确认执行

### 如何修改场景包价格

**操作步骤**：
1. 说 "将场景包'XXX'的价格改为YYYY"
2. 系统显示原价和新价
3. 确认执行

**注意**：
- 原价（划线价）不能低于销售价
- 价格修改会影响新订单，已有订单按原价执行

---

## 门店操作指南

### 如何修改预约时段

门店预约时段分为工作日和周末两种设置：

**操作步骤**：
1. 说 "修改XX门店的周末预约时间为 8:00-24:00"
2. 系统显示修改前后对比
3. 确认执行

**时间格式**：
- 支持 "8:00"、"08:00"、"8:00:00" 等格式
- 24:00 表示午夜

### 如何修改预约时长单位

时长单位决定用户预约的最小时间颗粒度。

**可选值**：
- 30 分钟
- 60 分钟（1小时）
- 90 分钟（1.5小时）
- 120 分钟（2小时）
- 180 分钟（3小时）
- 240 分钟（4小时）

**操作步骤**：
1. 说 "将XX门店的预约时长改为2小时"
2. 确认执行

### 如何修改预约提前量

**两个设置项**：
1. **最小提前时间**：用户必须提前多少小时预约
   - 范围：0-168 小时（0-7天）
   - 示例：设置为 24 表示不能预约当天

2. **最大提前天数**：用户最多可以提前多少天预约
   - 范围：1-90 天
   - 示例：设置为 30 表示只能预约未来30天内

**操作步骤**：
1. 说 "将XX门店的最小提前预约时间改为12小时"
2. 确认执行

### 如何修改押金设置

**两个设置项**：
1. **是否需要押金**：开启/关闭押金
2. **押金金额**：押金数额

**操作步骤**：
1. 说 "将XX门店的押金改为800元"
2. 或者 "关闭XX门店的押金"
3. 确认执行

### 如何停用/启用门店

**注意事项**：
- 停用门店会影响该门店的所有预约功能
- 已有预约不受影响
- 门店下的所有影厅也会停止接受预约

**操作步骤**：
1. 说 "停用XX门店" 或 "启用XX门店"
2. 系统显示影响范围
3. 确认执行

---

## 常见问题 (FAQ)

### 场景包相关

**Q: 为什么无法发布场景包？**

A: 请检查以下条件：
- 名称是否已填写
- 价格是否大于 0
- 是否选择了适用影厅
- 是否添加了内容（硬权益/软权益/服务项目）

**Q: 已发布的场景包可以修改吗？**

A: 可以修改部分字段：
- ✅ 可修改：描述、价格
- ❌ 不可修改：需要先下架再修改

**Q: 如何重新发布已归档的场景包？**

A:
1. 先恢复为草稿：说 "恢复场景包'XXX'为草稿"
2. 修改需要更新的内容
3. 重新发布

### 门店相关

**Q: 修改预约设置会影响已有预约吗？**

A: 不会。修改只影响新的预约，已有预约按原设置执行。

**Q: 如何查看门店当前的预约设置？**

A: 说 "查看XX门店的预约设置"

**Q: 时长单位修改后，用户看到的变化是什么？**

A: 用户在选择预约时间时，可选的时间颗粒度会变化。例如从1小时改为2小时后，用户只能选择2小时、4小时、6小时等。

### 预约相关

**Q: 如何查看今天的预约？**

A: 说 "查看今天的预约订单"

**Q: 如何统计本周预约情况？**

A: 说 "统计本周预约数量" 或 "本周有多少预约"

---

## 批量操作指南

批量操作允许一次性修改多条数据，提高运营效率。

### 批量下架场景包

**操作步骤**：
1. 说 "批量下架所有已发布的场景包" 或 "下架这些场景包: A, B, C"
2. 系统显示受影响的场景包列表
3. 输入"确认执行"完成批量操作

**注意**：影响超过 10 个场景包时，需要二次确认。

### 批量修改门店时长

**操作步骤**：
1. 说 "将所有门店的预约时长改为2小时"
2. 或者 "将北京的门店预约时长改为2小时"（按城市筛选）
3. 系统显示受影响的门店数量
4. 输入"确认执行"完成批量操作

**示例对话**：
```
用户: 将所有门店的预约时长改为2小时
助手: 即将批量修改预约时长单位
      影响范围: 8 家门店
      修改内容: duration_unit → 120 分钟

      ⚠️ 此操作将影响多家门店，请输入"确认执行"以继续。
用户: 确认执行
助手: ✅ 批量更新成功，共 8 家门店
```

### 批量操作安全规则

1. **影响范围显示**：执行前会显示受影响的数据数量
2. **二次确认**：影响超过 10 条数据需要输入"确认执行"
3. **部分成功处理**：如果部分操作失败，会返回详细的成功/失败列表
4. **不可撤销**：批量操作执行后不可自动撤销，需逐条恢复

---

## 安全提醒

### 操作确认

所有写操作都需要用户确认：
- 单条数据修改：回复"确认"或"是"
- 批量操作（>10条）：需要输入"确认执行"

### 敏感操作

以下操作会显示警告：
- 下架场景包
- 停用门店
- 批量修改

### 数据安全

- 系统会记录所有操作日志
- 敏感信息（如 API Token）不会显示在输出中

---

## 获取帮助

如果遇到问题：
1. 尝试用不同的方式描述需求
2. 查看本指南的相关章节
3. 说 "帮助" 获取基本使用说明
4. 查阅 `glossary.md` 了解业务术语

### 常用帮助命令

```
/ops 帮助
/ops 如何发布场景包
/ops 什么是预约提前量
/ops 场景包发布条件是什么
```
