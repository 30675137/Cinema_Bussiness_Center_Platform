# 数据/领域模型说明

## 文档信息
- 功能标识：001-product-management
- 生成时间：2025-12-22T16:00:00Z
- 基于规格：specs/001-product-management/spec.md

## 领域概述

产品管理功能的核心数据模型，用于管理产品目录信息。

## 核心实体

### Product（产品）

**说明**：产品实体，包含产品基本信息和库存状态

**字段定义**：

| 字段名 | 类型 | 必填 | 说明 | 约束 |
|-------|------|------|------|------|
| id | TODO: 待规格明确类型 | 是 | 产品唯一标识符 | TODO: 待规格明确约束 |
| name | String | 是 | 产品名称 | 长度 ≤ 100 |
| code | String | 是 | 产品编码 | 唯一，长度 6-12，字母数字 |
| price | TODO: 待规格明确类型 | 否 | 价格 | 正数，最多 2 位小数 |
| category | Enum | 否 | 分类 | TODO: 待定义枚举值 |
| description | String | 否 | 产品描述 | 长度 ≤ 500 |
| stock | TODO: 待规格明确类型 | 否 | 库存数量 | TODO: 待规格明确约束 |
| status | TODO: 待规格明确类型 | 否 | 状态 | TODO: 待定义枚举值（如 ACTIVE, INACTIVE, OUT_OF_STOCK） |
| createdAt | TODO: 待规格明确类型 | 是 | 创建时间 | ISO 8601 格式 |

**业务规则**：
- 产品编码在系统中必须唯一
- 价格必须为正数，支持最多 2 位小数
- TODO: 待规格明确业务规则（产品分类变更时如何处理？库存为 0 时是否自动更新状态？）

**关系**：
- TODO: 待规格明确关系类型（与 Category 的关系？与 Order 的关系？）

---

## 数据验证规则

### 字段级验证

- **name**: 必填，长度 1-100 字符
- **code**: 必填，唯一，长度 6-12 字符，仅字母和数字
- **price**: 正数，最多 2 位小数
- **description**: 长度 ≤ 500 字符

### 实体级验证

TODO: 待规格明确实体级验证规则（产品创建时必须包含哪些字段？）

### 业务级验证

TODO: 待规格明确业务级验证规则（产品停用前是否需要检查订单？）

## 数据存储

**主存储**：TODO: 待规格明确存储类型（Supabase? PostgreSQL?）

**表结构**：
- products：产品基本信息表

**索引策略**：
- code 字段唯一索引（用于快速查找和保证唯一性）
- TODO: 待规格明确其他索引需求（是否需要 category 索引？status 索引？）

## 附录

### 术语表

| 术语 | 定义 |
|------|------|
| 产品编码 | 产品的唯一标识符，由字母和数字组成，长度 6-12 字符 |
| SKU | Stock Keeping Unit（库存保有单位），TODO: 待规格明确是否使用 SKU 概念 |

### 状态机图

TODO: 待规格明确状态转换逻辑（产品状态如何变化？ACTIVE → INACTIVE → OUT_OF_STOCK?）

### ER 图

TODO: 待规格明确实体关系图（Product 与其他实体的关系）

---

**生成说明**：
- 本文档由 Claude Skill 文档生成器自动生成
- 如发现信息缺失或不准确，请参考原始规格文档并手动补充
- 标记为 `TODO: 待规格明确` 的项需要在规格文档中补充后重新生成
- **信息缺口统计**：
  - 字段类型缺失：5 项（id, price, stock, status, createdAt）
  - 枚举值未定义：2 项（category, status）
  - 业务规则缺失：2 项（分类变更处理、库存为 0 处理）
  - 关系未明确：1 项（与其他实体的关系）
  - 验证规则缺失：2 项（实体级、业务级验证）
  - 存储信息缺失：2 项（存储类型、索引策略）
  - 总计：14 项待补充
