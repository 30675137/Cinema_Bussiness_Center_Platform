# Cinema Business Center Platform - Test Environment
# 影院商品管理中台 - 测试环境配置（本地自建 Supabase）
# 端口规划：test 环境端口 = dev 端口 + 10000，避免端口冲突

# ============================================
# 项目基础配置
# ============================================
PROJECT_NAME=cinema-test
COMPOSE_PROJECT_NAME=cinema-test

# ============================================
# PostgreSQL 配置
# ============================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres_test_password
POSTGRES_DB=postgres
# dev: 5432, test: 15432
POSTGRES_PORT=15432

# ============================================
# Supabase JWT 配置
# ============================================
# JWT Secret (至少 32 字符)
JWT_SECRET=cinema-test-jwt-secret-key-at-least-32-characters-long
JWT_EXPIRY=3600

# Anon Key (用于匿名访问)
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1sb2NhbCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQxNzY5MjAwLCJleHAiOjE3OTk1MzU2MDB9.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE

# Service Role Key (用于服务端访问，有完整权限)
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1sb2NhbCIsInJvbGUiOiJzZXJ2aWNlX3JvbGUiLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTc5OTUzNTYwMH0.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q

# ============================================
# Supabase 核心服务端口 (dev + 10000)
# ============================================
# Kong API Gateway: dev=8000, test=18000
KONG_HTTP_PORT=18000
KONG_HTTPS_PORT=18443
# GoTrue Auth: dev=9999, test=19999
GOTRUE_PORT=19999
# PostgREST API: dev=3001, test=13001
POSTGREST_PORT=13001
# Realtime: dev=4000, test=14000
REALTIME_PORT=14000
# Storage: dev=5001, test=15001
STORAGE_PORT=15001
# Studio Dashboard: dev=54323, test=64323
STUDIO_PORT=64323

# ============================================
# Supabase 可选服务端口 (dev + 10000)
# ============================================
# Edge Functions: dev=54321, test=64321
EDGE_FUNCTIONS_PORT=64321
# Imgproxy: dev=5002, test=15002
IMGPROXY_PORT=15002
# Inbucket (邮件测试): dev=54324, test=64324
INBUCKET_WEB_PORT=64324
INBUCKET_SMTP_PORT=64325
INBUCKET_POP3_PORT=64326
# Analytics (Logflare): dev=4001, test=14001
LOGFLARE_PORT=14001
LOGFLARE_API_KEY=cinema-test-logflare-api-key-at-least-32-chars

# ============================================
# 应用服务端口 (dev + 10000)
# ============================================
# Frontend: dev=3000, test=13000
FRONTEND_PORT=13000
# Backend: dev=8080, test=18080
BACKEND_PORT=18080
# Miniapp H5: dev=10086, test=20086
MINIAPP_PORT=20086

# ============================================
# 应用环境变量 (使用 test 端口)
# ============================================
SITE_URL=http://localhost:13000
API_EXTERNAL_URL=http://localhost:19999
SUPABASE_PUBLIC_URL=http://localhost:18000

# 前端配置
VITE_API_URL=http://localhost:18080
VITE_SUPABASE_URL=http://localhost:18000

# 小程序配置
TARO_APP_API_URL=http://localhost:18080

# ============================================
# 认证配置
# ============================================
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
DISABLE_SIGNUP=false

# ============================================
# 微信小程序配置（测试环境）
# ============================================
WECHAT_APPID=wx23d19fd65c65af26
WECHAT_APP_SECRET=e8550f82e70ba2278b0e030786b9653d
