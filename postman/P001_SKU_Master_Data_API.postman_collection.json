{
	"info": {
		"_postman_id": "p001-sku-master-data-api-collection",
		"name": "P001 - SKU主数据管理 API",
		"description": "SKU主数据管理 API 接口集合\n- SKU CRUD 操作\n- BOM 配置管理\n- 套餐子项管理\n- 成本计算\n- 门店范围验证\n\n@since P001-sku-master-data",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "cinema-platform"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "sku_id",
			"value": "2f7882fa-1975-48f4-b79b-8a3355bdb7c7",
			"type": "string",
			"description": "示例SKU ID (经典马提尼)"
		},
		{
			"key": "component_sku_id",
			"value": "550e8400-e29b-41d4-a716-446655440001",
			"type": "string",
			"description": "示例组件SKU ID (原料)"
		},
		{
			"key": "spu_id",
			"value": "00000000-0000-0000-0000-000000000001",
			"type": "string",
			"description": "示例SPU ID"
		}
	],
	"item": [
		{
			"name": "SKU 管理",
			"item": [
				{
					"name": "查询SKU列表",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"]
						},
						"description": "查询所有SKU列表"
					},
					"response": []
				},
				{
					"name": "按类型筛选SKU列表",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus?skuType=finished_product",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"],
							"query": [
								{
									"key": "skuType",
									"value": "finished_product",
									"description": "SKU类型: raw_material(原料), packaging(包材), finished_product(成品), combo(套餐)"
								}
							]
						},
						"description": "按SKU类型筛选列表\n\n可选类型:\n- raw_material: 原料\n- packaging: 包材\n- finished_product: 成品\n- combo: 套餐"
					},
					"response": []
				},
				{
					"name": "按状态筛选SKU列表",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus?status=enabled",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"],
							"query": [
								{
									"key": "status",
									"value": "enabled",
									"description": "状态: draft(草稿), enabled(启用), disabled(停用)"
								}
							]
						},
						"description": "按状态筛选SKU列表\n\n可选状态:\n- draft: 草稿\n- enabled: 启用\n- disabled: 停用"
					},
					"response": []
				},
				{
					"name": "关键词搜索SKU",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus?keyword=马提尼",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"],
							"query": [
								{
									"key": "keyword",
									"value": "马提尼",
									"description": "关键词搜索(名称/条码)"
								}
							]
						},
						"description": "按关键词搜索SKU（名称或条码）"
					},
					"response": []
				},
				{
					"name": "组合筛选SKU列表",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus?skuType=raw_material&status=enabled&page=1&pageSize=20",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"],
							"query": [
								{
									"key": "skuType",
									"value": "raw_material",
									"description": "SKU类型"
								},
								{
									"key": "status",
									"value": "enabled",
									"description": "状态"
								},
								{
									"key": "page",
									"value": "1",
									"description": "页码(默认1)"
								},
								{
									"key": "pageSize",
									"value": "20",
									"description": "每页大小(默认20, 最大100)"
								}
							]
						},
						"description": "组合多个筛选条件查询SKU列表"
					},
					"response": []
				},
				{
					"name": "获取SKU详情",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}"]
						},
						"description": "根据ID获取SKU详情\n\n成品类型会返回BOM配置\n套餐类型会返回套餐子项"
					},
					"response": []
				},
				{
					"name": "创建原料SKU",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SKU-RAW-001\",\n  \"name\": \"威士忌\",\n  \"spuId\": \"{{spu_id}}\",\n  \"skuType\": \"raw_material\",\n  \"mainUnit\": \"ml\",\n  \"standardCost\": 0.50,\n  \"storeScope\": [],\n  \"status\": \"draft\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"]
						},
						"description": "创建原料类型SKU\n\n原料/包材类型需要填写standardCost(标准成本)"
					},
					"response": []
				},
				{
					"name": "创建包材SKU",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SKU-PKG-001\",\n  \"name\": \"高脚杯\",\n  \"spuId\": \"{{spu_id}}\",\n  \"skuType\": \"packaging\",\n  \"mainUnit\": \"个\",\n  \"standardCost\": 2.00,\n  \"storeScope\": [],\n  \"status\": \"draft\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"]
						},
						"description": "创建包材类型SKU"
					},
					"response": []
				},
				{
					"name": "创建成品SKU(含BOM)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SKU-FIN-001\",\n  \"name\": \"威士忌可乐\",\n  \"spuId\": \"{{spu_id}}\",\n  \"skuType\": \"finished_product\",\n  \"mainUnit\": \"杯\",\n  \"wasteRate\": 5.0,\n  \"storeScope\": [],\n  \"status\": \"draft\",\n  \"bom\": {\n    \"components\": [\n      {\n        \"componentId\": \"{{component_sku_id}}\",\n        \"quantity\": 50,\n        \"unit\": \"ml\",\n        \"isOptional\": false,\n        \"sortOrder\": 1\n      }\n    ]\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"]
						},
						"description": "创建成品类型SKU\n\n成品类型需要配置BOM(物料清单)\n- wasteRate: 损耗率(%)\n- bom.components: BOM组件列表\n- standardCost由系统自动计算"
					},
					"response": []
				},
				{
					"name": "创建套餐SKU(含子项)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SKU-CMB-001\",\n  \"name\": \"经典观影套餐\",\n  \"spuId\": \"{{spu_id}}\",\n  \"skuType\": \"combo\",\n  \"mainUnit\": \"份\",\n  \"storeScope\": [],\n  \"status\": \"draft\",\n  \"comboItems\": [\n    {\n      \"subItemId\": \"{{sku_id}}\",\n      \"quantity\": 1,\n      \"unit\": \"杯\",\n      \"sortOrder\": 1\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"]
						},
						"description": "创建套餐类型SKU\n\n套餐类型需要配置子项\n- comboItems: 套餐子项列表(不能包含套餐类型SKU)\n- standardCost由系统自动计算"
					},
					"response": []
				},
				{
					"name": "更新SKU",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"经典马提尼(升级版)\",\n  \"mainUnit\": \"份\",\n  \"status\": \"enabled\",\n  \"standardCost\": 7.2,\n  \"price\": 28.00\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}"]
						},
						"description": "更新SKU信息\n\n可更新字段:\n- name: 名称\n- mainUnit: 主单位\n- storeScope: 门店范围\n- standardCost: 标准成本\n- wasteRate: 损耗率\n- price: 零售价(成品/套餐)\n- status: 状态"
					},
					"response": []
				},
				{
					"name": "更新SKU零售价",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"price\": 35.00\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}"]
						},
						"description": "仅更新SKU零售价\n\n仅成品/套餐类型SKU支持零售价设置"
					},
					"response": []
				},
				{
					"name": "删除SKU",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}"]
						},
						"description": "删除SKU\n\n注意: 如果SKU被其他成品的BOM或套餐引用，则无法删除"
					},
					"response": []
				}
			],
			"description": "SKU主数据CRUD操作"
		},
		{
			"name": "BOM 管理",
			"item": [
				{
					"name": "获取BOM配置",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/bom",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "bom"]
						},
						"description": "获取成品SKU的BOM配置\n\n仅成品类型(finished_product)的SKU有BOM配置"
					},
					"response": []
				},
				{
					"name": "更新BOM配置",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"components\": [\n    {\n      \"componentId\": \"{{component_sku_id}}\",\n      \"quantity\": 45,\n      \"unit\": \"ml\",\n      \"isOptional\": false,\n      \"sortOrder\": 1\n    },\n    {\n      \"componentId\": \"550e8400-e29b-41d4-a716-446655440002\",\n      \"quantity\": 150,\n      \"unit\": \"ml\",\n      \"isOptional\": false,\n      \"sortOrder\": 2\n    }\n  ],\n  \"wasteRate\": 5.0\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/bom",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "bom"]
						},
						"description": "更新成品SKU的BOM配置\n\n更新后会自动重新计算标准成本\n\n组件必须是原料(raw_material)或包材(packaging)类型"
					},
					"response": []
				}
			],
			"description": "成品SKU的BOM(物料清单)配置管理"
		},
		{
			"name": "套餐管理",
			"item": [
				{
					"name": "获取套餐子项配置",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/combo-items",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "combo-items"]
						},
						"description": "获取套餐SKU的子项配置\n\n仅套餐类型(combo)的SKU有子项配置"
					},
					"response": []
				},
				{
					"name": "更新套餐子项配置",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"items\": [\n    {\n      \"subItemId\": \"{{sku_id}}\",\n      \"quantity\": 2,\n      \"unit\": \"杯\",\n      \"sortOrder\": 1\n    },\n    {\n      \"subItemId\": \"550e8400-e29b-41d4-a716-446655440003\",\n      \"quantity\": 1,\n      \"unit\": \"份\",\n      \"sortOrder\": 2\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/combo-items",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "combo-items"]
						},
						"description": "更新套餐SKU的子项配置\n\n更新后会自动重新计算标准成本\n\n子项不能是套餐类型(避免嵌套套餐)"
					},
					"response": []
				}
			],
			"description": "套餐SKU的子项配置管理"
		},
		{
			"name": "成本计算",
			"item": [
				{
					"name": "重新计算标准成本",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/recalculate-cost",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "recalculate-cost"]
						},
						"description": "手动触发成品/套餐的标准成本重新计算\n\n当组件成本变更后，可手动触发重算\n\n返回:\n- oldCost: 原成本\n- newCost: 新成本\n- changedAt: 变更时间"
					},
					"response": []
				}
			],
			"description": "成本计算相关接口"
		},
		{
			"name": "门店范围验证",
			"item": [
				{
					"name": "验证门店范围可用性",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"storeScope\": []\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/validate-store-scope",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "validate-store-scope"]
						},
						"description": "验证成品/套餐在目标门店范围的可用性\n\n在启用SKU前，验证所有BOM组件/套餐子项在目标门店可用\n\n请求:\n- storeScope: 目标门店ID数组 (空数组=全门店)\n\n返回:\n- valid: 是否验证通过\n- errors: 错误列表\n- warnings: 警告列表"
					},
					"response": []
				},
				{
					"name": "验证特定门店范围",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"storeScope\": [\n    \"11111111-1111-1111-1111-111111111111\",\n    \"22222222-2222-2222-2222-222222222222\"\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}/validate-store-scope",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}", "validate-store-scope"]
						},
						"description": "验证SKU在特定门店的可用性\n\n验证所有组件/子项在指定门店列表中是否可用"
					},
					"response": []
				}
			],
			"description": "门店范围验证接口"
		},
		{
			"name": "测试场景",
			"item": [
				{
					"name": "场景1: 查询原料SKU列表",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus?skuType=raw_material&status=enabled",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"],
							"query": [
								{
									"key": "skuType",
									"value": "raw_material"
								},
								{
									"key": "status",
									"value": "enabled"
								}
							]
						},
						"description": "测试场景: 查询所有已启用的原料SKU\n\n用于BOM配置时选择可用的原料组件"
					},
					"response": []
				},
				{
					"name": "场景2: 查询成品SKU详情含BOM",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/skus/{{sku_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "skus", "{{sku_id}}"]
						},
						"description": "测试场景: 获取成品SKU详情\n\n期望返回:\n- SKU基本信息\n- bom: BOM组件列表\n- 计算后的standardCost"
					},
					"response": []
				},
				{
					"name": "场景3: 完整创建成品SKU流程",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SKU-TEST-{{$timestamp}}\",\n  \"name\": \"测试威士忌可乐\",\n  \"spuId\": \"{{spu_id}}\",\n  \"skuType\": \"finished_product\",\n  \"mainUnit\": \"杯\",\n  \"wasteRate\": 5.0,\n  \"storeScope\": [],\n  \"status\": \"draft\",\n  \"bom\": {\n    \"components\": [\n      {\n        \"componentId\": \"{{component_sku_id}}\",\n        \"quantity\": 50,\n        \"unit\": \"ml\",\n        \"isOptional\": false,\n        \"sortOrder\": 1\n      }\n    ]\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/skus",
							"host": ["{{base_url}}"],
							"path": ["api", "skus"]
						},
						"description": "测试场景: 创建成品SKU完整流程\n\n1. 创建成品SKU\n2. 配置BOM组件\n3. 设置损耗率\n4. 系统自动计算标准成本\n\n使用 {{$timestamp}} 生成唯一条码"
					},
					"response": []
				}
			],
			"description": "常用测试场景集合"
		}
	]
}
