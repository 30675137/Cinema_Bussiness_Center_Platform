# API æ¥å£è§„æ ¼æ–‡æ¡£ï¼ˆç»Ÿä¸€æ•´åˆç‰ˆï¼‰

**@spec O005-channel-product-config** (åŠå…¶ä»–è§„æ ¼)

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **ç”Ÿæˆæ—¶é—´**: 2026-01-02 13:26:09
- **æ•°æ®æ¥æº**: `specs/` ç›®å½•ä¸‹æ‰€æœ‰è§„æ ¼
- **æ€»ç«¯ç‚¹æ•°**: 215
- **å¤„ç†è§„æ ¼æ•°**: 27
- **OpenAPI è§„æ ¼**: 24 ä¸ª
- **Markdown è§„æ ¼**: 3 ä¸ª

## ğŸŒ é€šç”¨è§„èŒƒ

### åŸºç¡€è·¯å¾„

| ç¯å¢ƒ | URL |
|-----|-----|
| æœ¬åœ°å¼€å‘ | `http://localhost:8080/api` |
| å¼€å‘ç¯å¢ƒ | `https://api-dev.cinema-platform.com/api` |
| ç”Ÿäº§ç¯å¢ƒ | `https://api.cinema-platform.com/api` |

### è®¤è¯æ–¹å¼

- **Bearer Token (JWT)**
- è¯·æ±‚å¤´: `Authorization: Bearer <token>`

### ç»Ÿä¸€å“åº”æ ¼å¼

**æˆåŠŸå“åº”**:
```json
{
  "success": true,
  "data": <æ•°æ®å¯¹è±¡æˆ–æ•°ç»„>,
  "timestamp": "2026-01-02T10:00:00Z",
  "message": "æ“ä½œæˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "error": "ERROR_CODE",
  "message": "é”™è¯¯æè¿°",
  "details": {},
  "timestamp": "2026-01-02T10:00:00Z"
}
```

### HTTP çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|-------|------|
| 200 | è¯·æ±‚æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªè®¤è¯ |
| 403 | æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 409 | èµ„æºå†²çª |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## ğŸ“š API ç«¯ç‚¹åˆ†ç»„

### 001-skill-doc-generator

#### 1. POST /api/stores

**ç«¯ç‚¹**: `POST /api/stores`

**æè¿°**: POST /api/stores

**æ¥æºè§„æ ¼**: `001-skill-doc-generator` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/001-skill-doc-generator/spec.md`

---

### 013-schedule-management

#### 1. è·å–æ’æœŸäº‹ä»¶åˆ—è¡¨

**ç«¯ç‚¹**: `GET /schedules`

**æè¿°**: æ ¹æ®æ—¥æœŸè·å–æ‰€æœ‰æ’æœŸäº‹ä»¶

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `date` | query | string | âœ… | æŸ¥è¯¢æ—¥æœŸï¼Œæ ¼å¼ YYYY-MM-DD |
| `hallId` | query | string | âŒ | ç­›é€‰å½±å…IDï¼ˆå¯é€‰ï¼‰ |
| `type` | query | string | âŒ | ç­›é€‰äº‹ä»¶ç±»å‹ï¼ˆå¯é€‰ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›æ’æœŸäº‹ä»¶åˆ—è¡¨
- **400**: 
- **500**: 

---

#### 2. åˆ›å»ºæ’æœŸäº‹ä»¶

**ç«¯ç‚¹**: `POST /schedules`

**æè¿°**: åˆ›å»ºæ–°çš„æ’æœŸäº‹ä»¶

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateScheduleEventRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: æˆåŠŸåˆ›å»ºæ’æœŸäº‹ä»¶
- **400**: 
- **409**: æ—¶é—´å†²çª
- **500**: 

---

#### 3. è·å–æ’æœŸäº‹ä»¶è¯¦æƒ…

**ç«¯ç‚¹**: `GET /schedules/{id}`

**æè¿°**: æ ¹æ®IDè·å–å•ä¸ªæ’æœŸäº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ’æœŸäº‹ä»¶ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›æ’æœŸäº‹ä»¶è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 4. æ›´æ–°æ’æœŸäº‹ä»¶

**ç«¯ç‚¹**: `PUT /schedules/{id}`

**æè¿°**: æ›´æ–°å·²å­˜åœ¨çš„æ’æœŸäº‹ä»¶

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ’æœŸäº‹ä»¶ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateScheduleEventRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æˆåŠŸæ›´æ–°æ’æœŸäº‹ä»¶
- **400**: 
- **404**: 
- **409**: æ—¶é—´å†²çª
- **500**: 

---

#### 5. åˆ é™¤æ’æœŸäº‹ä»¶

**ç«¯ç‚¹**: `DELETE /schedules/{id}`

**æè¿°**: åˆ é™¤æŒ‡å®šçš„æ’æœŸäº‹ä»¶

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ’æœŸäº‹ä»¶ID |

**å“åº”**:

- **204**: æˆåŠŸåˆ é™¤
- **404**: 
- **500**: 

---

#### 6. æ£€æŸ¥æ—¶é—´å†²çª

**ç«¯ç‚¹**: `POST /schedules/{id}/conflict-check`

**æè¿°**: æ£€æŸ¥æŒ‡å®šæ—¶é—´æ®µæ˜¯å¦å­˜åœ¨å†²çª

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âŒ | æ’æœŸäº‹ä»¶IDï¼ˆæ›´æ–°æ—¶ä¼ å…¥ï¼Œæ–°å»ºæ—¶ä¸ä¼ ï¼‰ |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: å†²çªæ£€æŸ¥ç»“æœ

---

#### 7. è·å–å½±å…åˆ—è¡¨

**ç«¯ç‚¹**: `GET /halls`

**æè¿°**: è·å–æ‰€æœ‰å¯ç”¨çš„å½±å…èµ„æº

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | ç­›é€‰å½±å…çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ |
| `type` | query | string | âŒ | ç­›é€‰å½±å…ç±»å‹ï¼ˆå¯é€‰ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å½±å…åˆ—è¡¨

---

#### 8. è·å–å½±å…è¯¦æƒ…

**ç«¯ç‚¹**: `GET /halls/{id}`

**æè¿°**: æ ¹æ®IDè·å–å•ä¸ªå½±å…çš„è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `013-schedule-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | å½±å…ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å½±å…è¯¦æƒ…
- **404**: 

---

### 014-hall-store-backend

#### 1. æŸ¥è¯¢é—¨åº—åˆ—è¡¨

**ç«¯ç‚¹**: `GET /stores`

**æè¿°**: è·å–æ‰€æœ‰é—¨åº—åˆ—è¡¨ï¼Œç”¨äºå‰ç«¯é€‰æ‹©é—¨åº—å’ŒæŒ‰é—¨åº—ç­›é€‰å½±å…

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | ç­›é€‰é—¨åº—çŠ¶æ€ï¼ˆå¯é€‰ï¼Œé»˜è®¤è¿”å›æ‰€æœ‰çŠ¶æ€ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é—¨åº—åˆ—è¡¨
- **400**: 
- **500**: 

---

#### 2. è·å–é—¨åº—è¯¦æƒ…

**ç«¯ç‚¹**: `GET /stores/{storeId}`

**æè¿°**: æ ¹æ®é—¨åº—IDè·å–å•ä¸ªé—¨åº—çš„è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é—¨åº—è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 3. æŒ‰é—¨åº—æŸ¥è¯¢å½±å…åˆ—è¡¨

**ç«¯ç‚¹**: `GET /stores/{storeId}/halls`

**æè¿°**: æŸ¥è¯¢æŒ‡å®šé—¨åº—ä¸‹çš„æ‰€æœ‰å½±å…ï¼Œæ”¯æŒæŒ‰çŠ¶æ€å’Œç±»å‹ç­›é€‰

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—ID |
| `status` | query | string | âŒ | ç­›é€‰å½±å…çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ |
| `type` | query | string | âŒ | ç­›é€‰å½±å…ç±»å‹ï¼ˆå¯é€‰ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å½±å…åˆ—è¡¨
- **400**: 
- **404**: 
- **500**: 

---

#### 4. åˆ›å»ºé—¨åº—ï¼ˆç®¡ç†æ¥å£ï¼‰

**ç«¯ç‚¹**: `POST /admin/stores`

**æè¿°**: è¿è¥åå°åˆ›å»ºæ–°é—¨åº—

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateStoreRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: æˆåŠŸåˆ›å»ºé—¨åº—
- **400**: 
- **409**: é—¨åº—ç¼–ç å·²å­˜åœ¨
- **500**: 

---

#### 5. æ›´æ–°é—¨åº—ï¼ˆç®¡ç†æ¥å£ï¼‰

**ç«¯ç‚¹**: `PUT /admin/stores/{storeId}`

**æè¿°**: æ›´æ–°é—¨åº—ä¿¡æ¯ï¼ŒåŒ…æ‹¬çŠ¶æ€å˜æ›´

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateStoreRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æˆåŠŸæ›´æ–°é—¨åº—
- **400**: 
- **404**: 
- **500**: 

---

#### 6. åˆ›å»ºå½±å…ï¼ˆç®¡ç†æ¥å£ï¼‰

**ç«¯ç‚¹**: `POST /admin/halls`

**æè¿°**: è¿è¥åå°ä¸ºæŒ‡å®šé—¨åº—åˆ›å»ºæ–°å½±å…

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateHallRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: æˆåŠŸåˆ›å»ºå½±å…
- **400**: 
- **404**: é—¨åº—ä¸å­˜åœ¨
- **500**: 

---

#### 7. è·å–å½±å…è¯¦æƒ…ï¼ˆç®¡ç†æ¥å£ï¼‰

**ç«¯ç‚¹**: `GET /admin/halls/{hallId}`

**æè¿°**: æ ¹æ®å½±å…IDè·å–è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `hallId` | path | string | âœ… | å½±å…ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å½±å…è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 8. æ›´æ–°å½±å…ï¼ˆç®¡ç†æ¥å£ï¼‰

**ç«¯ç‚¹**: `PUT /admin/halls/{hallId}`

**æè¿°**: æ›´æ–°å½±å…ä¿¡æ¯ï¼ŒåŒ…æ‹¬çŠ¶æ€å˜æ›´

**æ¥æºè§„æ ¼**: `014-hall-store-backend` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `hallId` | path | string | âœ… | å½±å…ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateHallRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æˆåŠŸæ›´æ–°å½±å…
- **400**: 
- **404**: 
- **500**: 

---

### 022-store-crud

#### 1. åˆ›å»ºæ–°é—¨åº—

**ç«¯ç‚¹**: `POST /stores`

**æ¥æºè§„æ ¼**: `022-store-crud` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateStoreDTO` (è§ OpenAPI spec)

**å“åº”**:

- **201**: é—¨åº—åˆ›å»ºæˆåŠŸ
- **400**: 
- **409**: 

---

#### 2. æ›´æ–°é—¨åº—ä¿¡æ¯

**ç«¯ç‚¹**: `PUT /stores/{id}`

**æ¥æºè§„æ ¼**: `022-store-crud` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateStoreDTO` (è§ OpenAPI spec)

**å“åº”**:

- **200**: é—¨åº—æ›´æ–°æˆåŠŸ
- **404**: 
- **409**: 

---

#### 3. åˆ é™¤é—¨åº—

**ç«¯ç‚¹**: `DELETE /stores/{id}`

**æ¥æºè§„æ ¼**: `022-store-crud` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**å“åº”**:

- **204**: é—¨åº—åˆ é™¤æˆåŠŸ
- **404**: 
- **409**: 

---

#### 4. åˆ‡æ¢é—¨åº—çŠ¶æ€

**ç«¯ç‚¹**: `PATCH /stores/{id}/status`

**æ¥æºè§„æ ¼**: `022-store-crud` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: çŠ¶æ€åˆ‡æ¢æˆåŠŸ
- **404**: 

---

### Adjustments

#### 1. åˆ›å»ºåº“å­˜è°ƒæ•´

**ç«¯ç‚¹**: `POST /adjustments`

**æè¿°**: åˆ›å»ºåº“å­˜è°ƒæ•´è®°å½•ã€‚
- å¦‚æœè°ƒæ•´é‡‘é¢ >= å®¡æ‰¹é˜ˆå€¼ï¼ˆ1000å…ƒï¼‰ï¼Œè®°å½•è¿›å…¥å¾…å®¡æ‰¹çŠ¶æ€
- å¦‚æœä¸éœ€è¦å®¡æ‰¹ï¼Œç«‹å³æ‰§è¡Œåº“å­˜æ›´æ–°å¹¶ç”Ÿæˆæµæ°´


**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateAdjustmentRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: è°ƒæ•´è®°å½•åˆ›å»ºæˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **404**: SKUæˆ–é—¨åº—ä¸å­˜åœ¨

---

#### 2. æŸ¥è¯¢è°ƒæ•´åˆ—è¡¨

**ç«¯ç‚¹**: `GET /adjustments`

**æè¿°**: åˆ†é¡µæŸ¥è¯¢åº“å­˜è°ƒæ•´è®°å½•åˆ—è¡¨ï¼Œæ”¯æŒå¤šæ¡ä»¶ç­›é€‰

**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `skuId` | query | string | âŒ | æŒ‰SKUç­›é€‰ |
| `storeId` | query | string | âŒ | æŒ‰é—¨åº—ç­›é€‰ |
| `status` | query | array | âŒ | æŒ‰çŠ¶æ€ç­›é€‰ï¼ˆæ”¯æŒå¤šé€‰ï¼‰ |
| `adjustmentType` | query | object | âŒ | æŒ‰è°ƒæ•´ç±»å‹ç­›é€‰ |
| `startDate` | query | string | âŒ | å¼€å§‹æ—¥æœŸ |
| `endDate` | query | string | âŒ | ç»“æŸæ—¥æœŸ |
| `page` | query | integer | âŒ | é¡µç  |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ¡æ•° |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ

---

#### 3. è·å–è°ƒæ•´è¯¦æƒ…

**ç«¯ç‚¹**: `GET /adjustments/{id}`

**æè¿°**: è·å–å•æ¡è°ƒæ•´è®°å½•çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«å®¡æ‰¹å†å²

**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è°ƒæ•´è®°å½•ID |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: è°ƒæ•´è®°å½•ä¸å­˜åœ¨

---

#### 4. æ’¤å›è°ƒæ•´ç”³è¯·

**ç«¯ç‚¹**: `POST /adjustments/{id}/withdraw`

**æè¿°**: æ’¤å›å¾…å®¡æ‰¹çŠ¶æ€çš„è°ƒæ•´ç”³è¯·ã€‚
- ä»…é™ç”³è¯·äººæœ¬äººæ“ä½œ
- ä»…é™å¾…å®¡æ‰¹çŠ¶æ€çš„è®°å½•


**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è°ƒæ•´è®°å½•ID |

**å“åº”**:

- **200**: æ’¤å›æˆåŠŸ
- **400**: çŠ¶æ€ä¸å…è®¸æ’¤å›
- **403**: æ— æƒæ’¤å›ï¼ˆéæœ¬äººåˆ›å»ºï¼‰
- **404**: è°ƒæ•´è®°å½•ä¸å­˜åœ¨

---

### Admin - Beverages

#### 1. åˆ›å»ºé¥®å“

**ç«¯ç‚¹**: `POST /api/admin/beverages`

**æè¿°**: åˆ›å»ºæ–°é¥®å“ï¼ˆä»…åç«¯APIï¼Œæ— Bç«¯UIï¼‰
- é€šè¿‡Supabase Studioæˆ–APIè°ƒè¯•å·¥å…·è°ƒç”¨
- åˆ›å»ºé¥®å“åŸºæœ¬ä¿¡æ¯
- è‡ªåŠ¨ç”ŸæˆUUID


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateBeverageRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: é¥®å“åˆ›å»ºæˆåŠŸ
- **400**: 
- **500**: 

---

#### 2. æ›´æ–°é¥®å“

**ç«¯ç‚¹**: `PUT /api/admin/beverages/{id}`

**æè¿°**: æ›´æ–°é¥®å“ä¿¡æ¯

**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateBeverageRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **404**: 
- **500**: 

---

#### 3. åˆ é™¤/ä¸‹æ¶é¥®å“

**ç«¯ç‚¹**: `DELETE /api/admin/beverages/{id}`

**æè¿°**: è½¯åˆ é™¤é¥®å“ï¼ˆæ›´æ–°statusä¸ºINACTIVEï¼‰
- ä¸åˆ é™¤æ•°æ®åº“è®°å½•
- å·²å…³è”è®¢å•ä¸å—å½±å“


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **404**: 
- **500**: 

---

#### 4. æ·»åŠ é¥®å“è§„æ ¼

**ç«¯ç‚¹**: `POST /api/admin/beverage-specs`

**æè¿°**: ä¸ºé¥®å“æ·»åŠ å¯é€‰è§„æ ¼ï¼ˆå¤§å°ã€æ¸©åº¦ã€ç”œåº¦ã€é…æ–™ï¼‰

**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateBeverageSpecRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: è§„æ ¼åˆ›å»ºæˆåŠŸ
- **400**: 
- **500**: 

---

#### 5. é…ç½®é¥®å“é…æ–¹ï¼ˆBOMï¼‰

**ç«¯ç‚¹**: `POST /api/admin/beverage-recipes`

**æè¿°**: é…ç½®é¥®å“åˆ¶ä½œé…æ–¹
- å…³è”é¥®å“ID
- æŒ‡å®šè§„æ ¼ç»„åˆï¼ˆå¯é€‰ï¼‰
- å®šä¹‰æ‰€éœ€åŸæ–™åŠç”¨é‡


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateBeverageRecipeRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: é…æ–¹åˆ›å»ºæˆåŠŸ
- **400**: 
- **500**: 

---

### Admin - Orders

#### 1. Bç«¯è®¢å•åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/admin/beverage-orders`

**æè¿°**: è·å–é—¨åº—çš„è®¢å•åˆ—è¡¨ï¼ˆç®¡ç†åå°ï¼‰
- æ”¯æŒçŠ¶æ€ç­›é€‰
- æ”¯æŒæ—¶é—´èŒƒå›´ç­›é€‰
- æ”¯æŒåˆ†é¡µåŠ è½½
- æŒ‰åˆ›å»ºæ—¶é—´æ­£åºæ’åˆ—ï¼ˆå…ˆåˆ°å…ˆå¤„ç†ï¼‰


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | query | string | âœ… | é—¨åº—ID |
| `status` | query | string | âŒ | è®¢å•çŠ¶æ€ç­›é€‰ |
| `startTime` | query | string | âŒ | å¼€å§‹æ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰ |
| `endTime` | query | string | âŒ | ç»“æŸæ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰ |
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ¡æ•° |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•åˆ—è¡¨
- **500**: 

---

#### 2. å¾…å¤„ç†è®¢å•ï¼ˆè½®è¯¢ç«¯ç‚¹ï¼‰

**ç«¯ç‚¹**: `GET /api/admin/beverage-orders/pending`

**æè¿°**: è·å–å¾…å¤„ç†è®¢å•åˆ—è¡¨ï¼ˆå®æ—¶è½®è¯¢ï¼‰
- ä»…è¿”å› PENDING_PRODUCTION å’Œ PRODUCING çŠ¶æ€çš„è®¢å•
- æŒ‰åˆ›å»ºæ—¶é—´æ­£åºæ’åˆ—
- å‰ç«¯ä½¿ç”¨ TanStack Query 8ç§’é—´éš”è½®è¯¢


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | query | string | âœ… | é—¨åº—ID |
| `since` | query | string | âŒ | æŸ¥è¯¢æ­¤æ—¶é—´ä¹‹åçš„è®¢å•ï¼ˆå¢é‡æŸ¥è¯¢ä¼˜åŒ–ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å¾…å¤„ç†è®¢å•
- **500**: 

---

#### 3. æ›´æ–°è®¢å•çŠ¶æ€

**ç«¯ç‚¹**: `PUT /api/admin/beverage-orders/{id}/status`

**æè¿°**: Bç«¯å·¥ä½œäººå‘˜æ›´æ–°è®¢å•çŠ¶æ€
- æ”¯æŒçš„çŠ¶æ€æµè½¬ï¼š
  - PENDING_PRODUCTION â†’ PRODUCING (å¼€å§‹åˆ¶ä½œ + BOMæ‰£æ–™)
  - PRODUCING â†’ COMPLETED (å®Œæˆåˆ¶ä½œ + è§¦å‘å«å·)
  - COMPLETED â†’ DELIVERED (é¡¾å®¢å·²å–é¤)
  - * â†’ CANCELLED (å–æ¶ˆè®¢å•)
- çŠ¶æ€å˜æ›´è®°å½•åˆ°å®¡è®¡æ—¥å¿—


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: çŠ¶æ€æ›´æ–°æˆåŠŸ
- **404**: 
- **422**: ä¸šåŠ¡è§„åˆ™é”™è¯¯
- **500**: 

---

#### 4. å«å·é€šçŸ¥

**ç«¯ç‚¹**: `POST /api/admin/beverage-orders/{id}/call`

**æè¿°**: è§¦å‘å«å·é€šçŸ¥
- Bç«¯æ˜¾ç¤º"å·²å«å·"çŠ¶æ€ï¼ˆMockè¯­éŸ³æ’­æŠ¥ï¼‰
- Cç«¯å°ç¨‹åºæ¨é€é€šçŸ¥
- æ›´æ–°å–é¤å·çŠ¶æ€ä¸º CALLED


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**å“åº”**:

- **200**: å«å·æˆåŠŸ
- **404**: 
- **500**: 

---

#### 5. Bç«¯è®¢å•è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/admin/beverage-orders/{id}`

**æè¿°**: Bç«¯æŸ¥çœ‹è®¢å•è¯¦ç»†ä¿¡æ¯
- åŒ…å«è®¢å•åŸºæœ¬ä¿¡æ¯
- åŒ…å«è®¢å•é¡¹åˆ—è¡¨
- åŒ…å«BOMæ¸…å•ï¼ˆæ‰€éœ€åŸæ–™ï¼‰
- åŒ…å«åˆ¶ä½œæ­¥éª¤


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 6. BOMæ‰£æ–™ï¼ˆé›†æˆP003/P004ï¼‰

**ç«¯ç‚¹**: `POST /api/admin/beverage-orders/{id}/deduct-inventory`

**æè¿°**: æ‰§è¡ŒBOMæ‰£æ–™æ“ä½œ
- æŸ¥è¯¢è®¢å•ä¸­æ‰€æœ‰é¥®å“çš„é…æ–¹
- è®¡ç®—æ‰€éœ€åŸæ–™æ€»é‡
- è°ƒç”¨P003åº“å­˜æŸ¥è¯¢APIæ ¡éªŒåº“å­˜å……è¶³æ€§
- è°ƒç”¨P004åº“å­˜æ‰£å‡APIæ‰§è¡Œæ‰£æ–™
- ä½¿ç”¨æ‚²è§‚é”ä¿è¯åº“å­˜ä¸€è‡´æ€§


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**å“åº”**:

- **200**: æ‰£æ–™æˆåŠŸ
- **404**: 
- **422**: ä¸šåŠ¡è§„åˆ™é”™è¯¯
- **500**: 

---

#### 7. è®¢å•ç»Ÿè®¡æ•°æ®

**ç«¯ç‚¹**: `GET /api/admin/beverage-orders/statistics`

**æè¿°**: è·å–è®¢å•ç»Ÿè®¡æ•°æ®ï¼ˆUS3: FR-022ï¼‰
- æ”¯æŒä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆ/è‡ªå®šä¹‰æ—¶é—´èŒƒå›´
- æ˜¾ç¤ºè®¢å•æ•°é‡ã€é”€å”®é¢ã€å®Œæˆç‡
- æ˜¾ç¤ºçƒ­é”€é¥®å“æ’è¡Œ


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | query | string | âŒ | é—¨åº—IDï¼ˆå¯é€‰ï¼Œä¸ä¼ åˆ™æŸ¥è¯¢æ‰€æœ‰é—¨åº—ï¼‰ |
| `rangeType` | query | string | âŒ | æ—¶é—´èŒƒå›´ç±»å‹ |
| `startDate` | query | string | âŒ | èµ·å§‹æ—¥æœŸï¼ˆrangeType=CUSTOMæ—¶å¿…å¡«ï¼‰ |
| `endDate` | query | string | âŒ | æˆªæ­¢æ—¥æœŸï¼ˆrangeType=CUSTOMæ—¶å¿…å¡«ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›ç»Ÿè®¡æ•°æ®
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **500**: 

---

#### 8. å¯¼å‡ºé”€å”®æŠ¥è¡¨

**ç«¯ç‚¹**: `GET /api/admin/beverage-orders/export`

**æè¿°**: å¯¼å‡ºExcelæ ¼å¼é”€å”®æŠ¥è¡¨ï¼ˆUS3: FR-023ï¼‰
- åŒ…å«è®¢å•æ˜ç»†ã€é”€å”®æ±‡æ€»ã€çƒ­é”€å•†å“
- ä½¿ç”¨Apache POIç”ŸæˆExcel
- è¿”å›äºŒè¿›åˆ¶æ–‡ä»¶æµ


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | query | string | âŒ | é—¨åº—IDï¼ˆå¯é€‰ï¼‰ |
| `startDate` | query | string | âœ… | èµ·å§‹æ—¥æœŸ |
| `endDate` | query | string | âœ… | æˆªæ­¢æ—¥æœŸ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›Excelæ–‡ä»¶
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### Admin Reservations

#### 1. æŸ¥è¯¢é¢„çº¦å•åˆ—è¡¨(Bç«¯è¿è¥)

**ç«¯ç‚¹**: `GET /api/admin/reservations`

**æè¿°**: Bç«¯è¿è¥äººå‘˜æŸ¥çœ‹æ‰€æœ‰é¢„çº¦å•åˆ—è¡¨,æ”¯æŒå¤šç»´åº¦ç­›é€‰:
- çŠ¶æ€ç­›é€‰(æ”¯æŒå¤šé€‰)
- åˆ›å»ºæ—¥æœŸèŒƒå›´
- é¢„è®¢æ—¥æœŸèŒƒå›´
- åœºæ™¯åŒ…ç­›é€‰
- æœç´¢æ¡†(é¢„çº¦å•å·/å®¢æˆ·æ‰‹æœºå·æ¨¡ç³Šæœç´¢)


**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | é¢„çº¦å•çŠ¶æ€(å¯å¤šé€‰,é€—å·åˆ†éš”) |
| `createdStartDate` | query | string | âŒ | åˆ›å»ºæ—¥æœŸèµ·å§‹(YYYY-MM-DD) |
| `createdEndDate` | query | string | âŒ | åˆ›å»ºæ—¥æœŸç»“æŸ(YYYY-MM-DD) |
| `reservationStartDate` | query | string | âŒ | é¢„è®¢æ—¥æœŸèµ·å§‹(YYYY-MM-DD) |
| `reservationEndDate` | query | string | âŒ | é¢„è®¢æ—¥æœŸç»“æŸ(YYYY-MM-DD) |
| `scenarioPackageId` | query | string | âŒ | åœºæ™¯åŒ…ID |
| `searchKeyword` | query | string | âŒ | æœç´¢å…³é”®è¯(é¢„çº¦å•å·/å®¢æˆ·æ‰‹æœºå·) |
| `page` | query | integer | âŒ | é¡µç (ä»1å¼€å§‹) |
| `pageSize` | query | integer | âŒ | æ¯é¡µè®°å½•æ•° |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **401**: 
- **403**: 

---

#### 2. æŸ¥è¯¢é¢„çº¦å•è¯¦æƒ…(Bç«¯è¿è¥)

**ç«¯ç‚¹**: `GET /api/admin/reservations/{id}`

**æè¿°**: Bç«¯è¿è¥äººå‘˜æŸ¥çœ‹é¢„çº¦å•å®Œæ•´ä¿¡æ¯

**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | é¢„çº¦å•ID |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: 
- **401**: 
- **403**: 

---

#### 3. ç¡®è®¤é¢„çº¦å•

**ç«¯ç‚¹**: `POST /api/admin/reservations/{id}/confirm`

**æè¿°**: è¿è¥äººå‘˜ç¡®è®¤é¢„çº¦å•,å¯é€‰æ‹©:
1. è¦æ±‚å®¢æˆ·æ”¯ä»˜(çŠ¶æ€å˜æ›´ä¸ºCONFIRMED)
2. ç›´æ¥å®Œæˆ(çŠ¶æ€ç›´æ¥å˜æ›´ä¸ºCOMPLETED,æ— éœ€æ”¯ä»˜)


**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | é¢„çº¦å•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: ç¡®è®¤æˆåŠŸ
- **400**: éæ³•çŠ¶æ€è½¬æ¢
- **409**: å¹¶å‘æ›´æ–°å†²çª(ä¹è§‚é”)
- **404**: 
- **401**: 
- **403**: 

---

#### 4. å–æ¶ˆé¢„çº¦å•

**ç«¯ç‚¹**: `POST /api/admin/reservations/{id}/cancel`

**æè¿°**: è¿è¥äººå‘˜å–æ¶ˆé¢„çº¦å•,éœ€å¡«å†™å–æ¶ˆåŸå› ã€‚
å–æ¶ˆåå°†é‡Šæ”¾æ—¶æ®µåº“å­˜ã€‚
å·²å®Œæˆ(COMPLETED)çš„é¢„çº¦å•ä¸å¯å–æ¶ˆã€‚


**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | é¢„çº¦å•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: å–æ¶ˆæˆåŠŸ
- **400**: éæ³•çŠ¶æ€è½¬æ¢æˆ–å‚æ•°éªŒè¯å¤±è´¥
- **409**: 
- **404**: 
- **401**: 
- **403**: 

---

#### 5. ä¿®æ”¹é¢„çº¦å•è”ç³»ä¿¡æ¯

**ç«¯ç‚¹**: `PATCH /api/admin/reservations/{id}/update-contact`

**æè¿°**: è¿è¥äººå‘˜ä¿®æ”¹é¢„çº¦å•çš„è”ç³»äººå§“åã€æ‰‹æœºå·ã€å¤‡æ³¨ã€‚
æ ¸å¿ƒå­—æ®µ(åœºæ™¯åŒ…/æ—¶æ®µ/å¥—é¤/åŠ è´­é¡¹)ä¸å¯ä¿®æ”¹ã€‚


**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | é¢„çº¦å•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: ä¿®æ”¹æˆåŠŸ
- **400**: å‚æ•°éªŒè¯å¤±è´¥
- **409**: 
- **404**: 
- **401**: 
- **403**: 

---

#### 6. æ‰¹é‡å¯¼å‡ºé¢„çº¦å•

**ç«¯ç‚¹**: `POST /api/admin/reservations/export`

**æè¿°**: å¯¼å‡ºç­›é€‰æ¡ä»¶èŒƒå›´å†…çš„æ‰€æœ‰é¢„çº¦å•æ•°æ®,æ ¼å¼ä¸ºExcelæˆ–CSVã€‚
å¯¼å‡ºå­—æ®µåŒ…æ‹¬:é¢„çº¦å•å·ã€å®¢æˆ·ä¿¡æ¯ã€åœºæ™¯åŒ…ã€æ—¶æ®µã€å¥—é¤ã€é‡‘é¢ã€çŠ¶æ€ã€æ—¶é—´ç­‰ã€‚


**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: å¯¼å‡ºæˆåŠŸ,è¿”å›æ–‡ä»¶ä¸‹è½½URLæˆ–ç›´æ¥è¿”å›æ–‡ä»¶æµ
- **401**: 
- **403**: 

---

### Approvals

#### 1. è·å–å¾…å®¡æ‰¹åˆ—è¡¨

**ç«¯ç‚¹**: `GET /approvals/pending`

**æè¿°**: è·å–å½“å‰ç”¨æˆ·å¯å®¡æ‰¹çš„å¾…å®¡æ‰¹è°ƒæ•´åˆ—è¡¨

**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ |  |
| `pageSize` | query | integer | âŒ |  |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ

---

#### 2. æ‰§è¡Œå®¡æ‰¹æ“ä½œ

**ç«¯ç‚¹**: `POST /approvals/{adjustmentId}`

**æè¿°**: å¯¹å¾…å®¡æ‰¹çš„è°ƒæ•´è®°å½•æ‰§è¡Œå®¡æ‰¹æ“ä½œã€‚
- ä»…é™è¿è¥æ€»ç›‘è§’è‰²
- é€šè¿‡åç«‹å³æ›´æ–°åº“å­˜å¹¶ç”Ÿæˆæµæ°´


**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `adjustmentId` | path | string | âœ… | è°ƒæ•´è®°å½•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ApprovalRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: å®¡æ‰¹æˆåŠŸ
- **400**: çŠ¶æ€ä¸å…è®¸å®¡æ‰¹
- **403**: æ— å®¡æ‰¹æƒé™
- **404**: è°ƒæ•´è®°å½•ä¸å­˜åœ¨

---

### Attribute Templates

#### 1. è·å–å±æ€§æ¨¡æ¿åˆ—è¡¨

**ç«¯ç‚¹**: `GET /attribute-templates`

**æè¿°**: è·å–å±æ€§æ¨¡æ¿åˆ—è¡¨ï¼Œå¯æŒ‰ç±»ç›®ç­›é€‰

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `categoryId` | query | string | âŒ | ç±»ç›®ID |
| `isActive` | query | boolean | âŒ | æ˜¯å¦æ¿€æ´»çŠ¶æ€ |
| `page` | query | integer | âŒ |  |
| `pageSize` | query | integer | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å±æ€§æ¨¡æ¿åˆ—è¡¨

---

#### 2. åˆ›å»ºå±æ€§æ¨¡æ¿

**ç«¯ç‚¹**: `POST /attribute-templates`

**æè¿°**: ä¸ºæŒ‡å®šç±»ç›®åˆ›å»ºå±æ€§æ¨¡æ¿

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ

---

#### 3. è·å–å±æ€§æ¨¡æ¿è¯¦æƒ…

**ç«¯ç‚¹**: `GET /attribute-templates/{templateId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `templateId` | path | string | âœ… |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å±æ€§æ¨¡æ¿è¯¦æƒ…

---

#### 4. æ›´æ–°å±æ€§æ¨¡æ¿

**ç«¯ç‚¹**: `PUT /attribute-templates/{templateId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `templateId` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ

---

#### 5. åˆ é™¤å±æ€§æ¨¡æ¿

**ç«¯ç‚¹**: `DELETE /attribute-templates/{templateId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `templateId` | path | string | âœ… |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **400**: æ¨¡æ¿è¢«ä½¿ç”¨ï¼Œæ— æ³•åˆ é™¤

---

#### 6. å¤åˆ¶å±æ€§æ¨¡æ¿

**ç«¯ç‚¹**: `POST /attribute-templates/copy`

**æè¿°**: ä»ä¸€ä¸ªç±»ç›®å¤åˆ¶å±æ€§æ¨¡æ¿åˆ°å¦ä¸€ä¸ªç±»ç›®

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **201**: å¤åˆ¶æˆåŠŸ

---

### Attributes

#### 1. åˆ›å»ºå±æ€§

**ç«¯ç‚¹**: `POST /attributes`

**æè¿°**: åœ¨å±æ€§æ¨¡æ¿ä¸­åˆ›å»ºæ–°å±æ€§

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `AttributeCreate` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ

---

#### 2. è·å–å±æ€§è¯¦æƒ…

**ç«¯ç‚¹**: `GET /attributes/{attributeId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `attributeId` | path | string | âœ… |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å±æ€§è¯¦æƒ…

---

#### 3. æ›´æ–°å±æ€§

**ç«¯ç‚¹**: `PUT /attributes/{attributeId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `attributeId` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ

---

#### 4. åˆ é™¤å±æ€§

**ç«¯ç‚¹**: `DELETE /attributes/{attributeId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `attributeId` | path | string | âœ… |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **400**: å±æ€§è¢«ä½¿ç”¨ï¼Œæ— æ³•åˆ é™¤

---

### BOM

#### 1. List BOM entries

**ç«¯ç‚¹**: `GET /api/boms`

**æè¿°**: Retrieve BOM (Bill of Materials) entries with filtering by finished product SKU.

**Use Case**: Get all components (raw materials + packaging) for a specific finished product SKU.


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `finishedProductSkuId` | query | string | âŒ | Filter by finished product SKU ID (UUID) |

**å“åº”**:

- **200**: BOM list retrieved successfully
- **401**: 
- **500**: 

---

#### 2. Create BOM entry

**ç«¯ç‚¹**: `POST /api/boms`

**æè¿°**: Create a new BOM (Bill of Materials) entry linking a finished product SKU to a component SKU.

**Validation Rules**:
- `finishedProductSkuId` must reference a SKU with type=finished_product (FR-006 constraint)
- `componentSkuId` must reference a SKU with type IN (raw_material, packaging)
- `componentSkuId` cannot equal `finishedProductSkuId` (prevent circular reference)
- `quantity` must be > 0
- `unit` must match `component_sku.unit`
- Same `(finishedProductSkuId, componentSkuId)` pair cannot be duplicated


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateBOMRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: BOM entry created successfully
- **400**: Validation error
- **401**: 
- **500**: 

---

#### 3. Update BOM entry

**ç«¯ç‚¹**: `PUT /api/boms/{id}`

**æè¿°**: Update quantity, unit, or sort order of an existing BOM entry

**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | BOM entry UUID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateBOMRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: BOM entry updated successfully
- **400**: 
- **404**: 
- **401**: 
- **500**: 

---

#### 4. Delete BOM entry

**ç«¯ç‚¹**: `DELETE /api/boms/{id}`

**æè¿°**: Remove a component from a finished product's BOM

**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | BOM entry UUID |

**å“åº”**:

- **204**: BOM entry deleted successfully (no content)
- **404**: 
- **401**: 
- **500**: 

---

### BOMç®¡ç†

#### 1. è·å–æˆå“SKUçš„BOMé…ç½®

**ç«¯ç‚¹**: `GET /skus/{id}/bom`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æˆå“SKU ID |

**å“åº”**:

- **200**: æˆåŠŸ
- **400**: SKUç±»å‹é”™è¯¯
- **404**: 

---

#### 2. æ›´æ–°æˆå“SKUçš„BOMé…ç½®

**ç«¯ç‚¹**: `PUT /skus/{id}/bom`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 

---

### Category

#### 1. List categories

**ç«¯ç‚¹**: `GET /api/categories`

**æè¿°**: Retrieve all categories with hierarchical structure support.

**Query Options**:
- No filters: Return all categories (flat list)
- `?parentId=null`: Return only top-level categories
- `?parentId={uuid}`: Return child categories of specified parent


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `parentId` | query | string | âŒ | Filter by parent category ID. Use "null" to get top-level categories.
 |
| `status` | query | string | âŒ | Filter by category status |

**å“åº”**:

- **200**: Category list retrieved successfully
- **401**: 
- **500**: 

---

#### 2. è·å–å•†å“åˆ†ç±»åˆ—è¡¨

**ç«¯ç‚¹**: `GET /categories`

**æè¿°**: è·å–å•†å“åˆ†ç±»æ ‘å½¢ç»“æ„

**æ¥æºè§„æ ¼**: `P003-inventory-query` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | åˆ†ç±»çŠ¶æ€ |

**å“åº”**:

- **200**: æˆåŠŸ

---

### Client - Beverages

#### 1. è·å–é¥®å“èœå•åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/beverages`

**æè¿°**: è·å–æ‰€æœ‰å¯ç”¨çš„é¥®å“ï¼ŒæŒ‰åˆ†ç±»åˆ†ç»„è¿”å›
- æ”¯æŒåˆ†ç±»ç­›é€‰
- æ”¯æŒåˆ†é¡µåŠ è½½
- è¿”å›é¥®å“åŸºæœ¬ä¿¡æ¯ã€ä»·æ ¼ã€åº“å­˜çŠ¶æ€


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `category` | query | string | âŒ | é¥®å“åˆ†ç±»ï¼ˆä¸ä¼ åˆ™è¿”å›æ‰€æœ‰åˆ†ç±»ï¼‰ |
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ¡æ•° |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é¥®å“åˆ—è¡¨
- **400**: 
- **500**: 

---

#### 2. è·å–é¥®å“è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/client/beverages/{id}`

**æè¿°**: è·å–å•ä¸ªé¥®å“çš„è¯¦ç»†ä¿¡æ¯
- åŒ…å«é¥®å“åŸºæœ¬ä¿¡æ¯
- åŒ…å«æ‰€æœ‰å¯é€‰è§„æ ¼ï¼ˆå¤§å°ã€æ¸©åº¦ã€ç”œåº¦ã€é…æ–™ï¼‰
- åŒ…å«è¥å…»ä¿¡æ¯
- åŒ…å«è¯¦æƒ…å›¾ç‰‡æ•°ç»„


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | é¥®å“ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é¥®å“è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 3. è·å–å¯é€‰è§„æ ¼åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/beverage-specs`

**æè¿°**: è·å–æ‰€æœ‰å¯é€‰è§„æ ¼ç±»å‹åŠé€‰é¡¹ï¼ˆå…¨å±€ï¼‰
- ç”¨äºè§„æ ¼é€‰æ‹©å™¨åˆå§‹åŒ–
- è¿”å›æ‰€æœ‰è§„æ ¼ç±»å‹ï¼ˆå¤§å°ã€æ¸©åº¦ã€ç”œåº¦ã€é…æ–™ï¼‰


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è§„æ ¼åˆ—è¡¨

---

### Client - Orders

#### 1. åˆ›å»ºé¥®å“è®¢å•

**ç«¯ç‚¹**: `POST /api/client/beverage-orders`

**æè¿°**: åˆ›å»ºæ–°çš„é¥®å“è®¢å•
- æ ¡éªŒé¥®å“IDå’Œè§„æ ¼é€‰æ‹©
- è®¡ç®—è®¢å•æ€»ä»·ï¼ˆåŸºç¡€ä»·æ ¼ + è§„æ ¼è°ƒæ•´ï¼‰
- ç”Ÿæˆè®¢å•å·ï¼ˆBORDT + yyyyMMddHHmmss + 4ä½éšæœºï¼‰
- è®¢å•åˆå§‹çŠ¶æ€ä¸º PENDING_PAYMENT


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateBeverageOrderRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: è®¢å•åˆ›å»ºæˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **422**: ä¸šåŠ¡è§„åˆ™é”™è¯¯
- **500**: 

---

#### 2. Mockæ”¯ä»˜è®¢å•

**ç«¯ç‚¹**: `POST /api/client/beverage-orders/{id}/pay`

**æè¿°**: æ¨¡æ‹Ÿæ”¯ä»˜æµç¨‹ï¼ˆMVPé˜¶æ®µï¼‰
- å»¶è¿Ÿ500msæ¨¡æ‹Ÿå¼‚æ­¥æ”¯ä»˜
- è‡ªåŠ¨æ ‡è®°è®¢å•ä¸º"å·²æ”¯ä»˜"
- ç”ŸæˆMockæ”¯ä»˜æµæ°´å·
- ç”Ÿæˆå–é¤å·
- çŠ¶æ€å˜æ›´: PENDING_PAYMENT â†’ PENDING_PRODUCTION


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ”¯ä»˜æˆåŠŸ
- **404**: 
- **409**: é‡å¤æ”¯ä»˜
- **500**: 

---

#### 3. æŸ¥è¯¢è®¢å•è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/client/beverage-orders/{id}`

**æè¿°**: è·å–è®¢å•è¯¦ç»†ä¿¡æ¯
- åŒ…å«è®¢å•åŸºæœ¬ä¿¡æ¯
- åŒ…å«è®¢å•é¡¹åˆ—è¡¨ï¼ˆé¥®å“å¿«ç…§ï¼‰
- åŒ…å«å–é¤å·
- åŒ…å«è®¢å•çŠ¶æ€
- æ”¯æŒè½®è¯¢æŸ¥è¯¢çŠ¶æ€æ›´æ–°ï¼ˆ8ç§’é—´éš”ï¼‰


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 4. æˆ‘çš„è®¢å•åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/beverage-orders/my`

**æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„å†å²è®¢å•åˆ—è¡¨
- æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—
- æ”¯æŒåˆ†é¡µåŠ è½½
- æ”¯æŒçŠ¶æ€ç­›é€‰


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | è®¢å•çŠ¶æ€ç­›é€‰ï¼ˆä¸ä¼ åˆ™è¿”å›æ‰€æœ‰çŠ¶æ€ï¼‰ |
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ¡æ•° |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•åˆ—è¡¨
- **500**: 

---

#### 5. è®¢å•å†å²æŸ¥è¯¢

**ç«¯ç‚¹**: `GET /api/beverage-orders/history`

**æè¿°**: æŸ¥è¯¢ç”¨æˆ·çš„å†å²è®¢å•åˆ—è¡¨ï¼ˆUS3: FR-019ï¼‰
- æŒ‰æ—¶é—´å€’åºæ’åˆ—
- æ”¯æŒçŠ¶æ€ç­›é€‰
- æ”¯æŒåˆ†é¡µåŠ è½½
- è¿”å›è®¢å•åŸºæœ¬ä¿¡æ¯å’Œè®¢å•é¡¹


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `userId` | query | string | âœ… | ç”¨æˆ·ID |
| `status` | query | string | âŒ | è®¢å•çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰ï¼‰ |
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»0å¼€å§‹ï¼ŒSpring Dataåˆ†é¡µï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ•°é‡ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•å†å²
- **400**: 
- **500**: 

---

#### 6. æ ¹æ®è®¢å•å·æœç´¢è®¢å•

**ç«¯ç‚¹**: `GET /api/beverage-orders/by-number/{orderNumber}`

**æè¿°**: æ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•è¯¦æƒ…ï¼ˆUS3: T130ï¼‰
- ç”¨äºè®¢å•æœç´¢åŠŸèƒ½
- éªŒè¯è®¢å•å½’å±


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `orderNumber` | path | string | âœ… | è®¢å•å· |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•è¯¦æƒ…
- **404**: 
- **500**: 

---

### Client - Queue

#### 1. æŸ¥è¯¢å–é¤å·

**ç«¯ç‚¹**: `GET /api/client/queue-numbers/{orderId}`

**æè¿°**: æ ¹æ®è®¢å•IDæŸ¥è¯¢å–é¤å·
- è¿”å›å–é¤å·ç 
- è¿”å›å«å·çŠ¶æ€
- æ”¯æŒè½®è¯¢æŸ¥è¯¢å«å·çŠ¶æ€


**æ¥æºè§„æ ¼**: `O003-beverage-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `orderId` | path | string | âœ… | è®¢å•ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å–é¤å·
- **404**: å–é¤å·ä¸å­˜åœ¨
- **500**: 

---

### Client Reservations

#### 1. åˆ›å»ºé¢„çº¦å•

**ç«¯ç‚¹**: `POST /api/client/reservations`

**æè¿°**: Cç«¯ç”¨æˆ·æäº¤é¢„çº¦å•,åŒ…å«åœºæ™¯åŒ…é€‰æ‹©ã€æ—¶æ®µé€‰æ‹©ã€å¥—é¤å’ŒåŠ è´­é¡¹é€‰æ‹©ã€è”ç³»äººä¿¡æ¯ã€‚
ç³»ç»Ÿå°†å®æ—¶æ ¡éªŒæ—¶æ®µåº“å­˜,åº“å­˜ä¸è¶³æ—¶è¿”å›400é”™è¯¯ã€‚


**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateReservationRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: é¢„çº¦å•åˆ›å»ºæˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯æˆ–åº“å­˜ä¸è¶³
- **401**: 

---

#### 2. æŸ¥è¯¢å½“å‰ç”¨æˆ·é¢„çº¦å•åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/reservations`

**æè¿°**: Cç«¯ç”¨æˆ·æŸ¥çœ‹"æˆ‘çš„é¢„çº¦"åˆ—è¡¨,æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰

**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | é¢„çº¦å•çŠ¶æ€ç­›é€‰(å¯é€‰) |
| `page` | query | integer | âŒ | é¡µç (ä»1å¼€å§‹) |
| `pageSize` | query | integer | âŒ | æ¯é¡µè®°å½•æ•° |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **401**: 

---

#### 3. æŸ¥è¯¢é¢„çº¦å•è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/client/reservations/{id}`

**æè¿°**: Cç«¯ç”¨æˆ·æŸ¥çœ‹é¢„çº¦å•å®Œæ•´ä¿¡æ¯,åŒ…æ‹¬å¥—é¤ã€åŠ è´­é¡¹æ˜ç»†ã€çŠ¶æ€å†å²

**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | é¢„çº¦å•ID |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: 
- **401**: 

---

#### 4. æŸ¥è¯¢å¾…å¤„ç†è®¢å•æ•°é‡

**ç«¯ç‚¹**: `GET /api/client/reservations/pending-count`

**æè¿°**: ç”¨äºprofileé¡µé¢è§’æ ‡æ˜¾ç¤º,å¾…å¤„ç†è®¢å•å®šä¹‰ä¸ºçŠ¶æ€ä¸ºPENDINGæˆ–CONFIRMEDä¸”requiresPayment=true

**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **401**: 

---

#### 5. æŸ¥è¯¢æ—¶æ®µå®æ—¶åº“å­˜

**ç«¯ç‚¹**: `GET /api/time-slots/{id}/availability`

**æè¿°**: Cç«¯ç”¨æˆ·é€‰æ‹©æ—¶æ®µæ—¶å®æ—¶æŸ¥è¯¢åº“å­˜,ç”¨äºå‰ç«¯æ ¡éªŒå’Œæç¤º

**æ¥æºè§„æ ¼**: `U001-reservation-order-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ—¶æ®µåº“å­˜ID |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: 

---

### Dictionary Items

#### 1. è·å–å­—å…¸é¡¹åˆ—è¡¨

**ç«¯ç‚¹**: `GET /dictionary-types/{typeId}/items`

**æè¿°**: è·å–æŒ‡å®šå­—å…¸ç±»å‹çš„æ‰€æœ‰å­—å…¸é¡¹

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `typeId` | path | string | âœ… | å­—å…¸ç±»å‹ID |
| `status` | query | string | âŒ | çŠ¶æ€ç­›é€‰ |
| `search` | query | string | âŒ | æœç´¢å…³é”®è¯ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å­—å…¸é¡¹åˆ—è¡¨
- **404**: 

---

#### 2. åˆ›å»ºå­—å…¸é¡¹

**ç«¯ç‚¹**: `POST /dictionary-types/{typeId}/items`

**æè¿°**: åœ¨æŒ‡å®šå­—å…¸ç±»å‹ä¸‹åˆ›å»ºæ–°çš„å­—å…¸é¡¹

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `typeId` | path | string | âœ… | å­—å…¸ç±»å‹ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 
- **404**: 
- **409**: ç¼–ç æˆ–åç§°å·²å­˜åœ¨

---

#### 3. è·å–å­—å…¸é¡¹è¯¦æƒ…

**ç«¯ç‚¹**: `GET /dictionary-items/{itemId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `itemId` | path | string | âœ… | å­—å…¸é¡¹ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å­—å…¸é¡¹è¯¦æƒ…
- **404**: 

---

#### 4. æ›´æ–°å­—å…¸é¡¹

**ç«¯ç‚¹**: `PUT /dictionary-items/{itemId}`

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `itemId` | path | string | âœ… | å­—å…¸é¡¹ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

#### 5. åˆ é™¤å­—å…¸é¡¹

**ç«¯ç‚¹**: `DELETE /dictionary-items/{itemId}`

**æè¿°**: åˆ é™¤å­—å…¸é¡¹ï¼ˆå¦‚æœè¢«ä½¿ç”¨åˆ™ä¸å…è®¸åˆ é™¤ï¼‰

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `itemId` | path | string | âœ… | å­—å…¸é¡¹ID |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **400**: å­—å…¸é¡¹è¢«ä½¿ç”¨ï¼Œæ— æ³•åˆ é™¤
- **404**: 

---

#### 6. æ‰¹é‡æ›´æ–°å­—å…¸é¡¹æ’åº

**ç«¯ç‚¹**: `POST /dictionary-items/batch-update-sort`

**æè¿°**: æ‰¹é‡æ›´æ–°å¤šä¸ªå­—å…¸é¡¹çš„æ’åºå€¼

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ‰¹é‡æ›´æ–°æˆåŠŸ

---

### Dictionary Types

#### 1. è·å–å­—å…¸ç±»å‹åˆ—è¡¨

**ç«¯ç‚¹**: `GET /dictionary-types`

**æè¿°**: è·å–æ‰€æœ‰å­—å…¸ç±»å‹çš„åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œç­›é€‰

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ | é¡µç ï¼Œä»1å¼€å§‹ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ•°é‡ |
| `status` | query | string | âŒ | çŠ¶æ€ç­›é€‰ |
| `search` | query | string | âŒ | æœç´¢å…³é”®è¯ï¼ˆåç§°æˆ–ç¼–ç ï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å­—å…¸ç±»å‹åˆ—è¡¨
- **401**: 
- **403**: 

---

#### 2. åˆ›å»ºå­—å…¸ç±»å‹

**ç«¯ç‚¹**: `POST /dictionary-types`

**æè¿°**: åˆ›å»ºæ–°çš„å­—å…¸ç±»å‹

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 
- **401**: 
- **403**: 
- **409**: ç¼–ç æˆ–åç§°å·²å­˜åœ¨

---

#### 3. è·å–å­—å…¸ç±»å‹è¯¦æƒ…

**ç«¯ç‚¹**: `GET /dictionary-types/{typeId}`

**æè¿°**: æ ¹æ®IDè·å–å­—å…¸ç±»å‹çš„è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `typeId` | path | string | âœ… | å­—å…¸ç±»å‹ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å­—å…¸ç±»å‹è¯¦æƒ…
- **404**: 

---

#### 4. æ›´æ–°å­—å…¸ç±»å‹

**ç«¯ç‚¹**: `PUT /dictionary-types/{typeId}`

**æè¿°**: æ›´æ–°å­—å…¸ç±»å‹çš„ä¿¡æ¯

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `typeId` | path | string | âœ… | å­—å…¸ç±»å‹ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

#### 5. åˆ é™¤å­—å…¸ç±»å‹

**ç«¯ç‚¹**: `DELETE /dictionary-types/{typeId}`

**æè¿°**: åˆ é™¤å­—å…¸ç±»å‹ï¼ˆå¦‚æœæœ‰å…³è”æ•°æ®åˆ™ä¸å…è®¸åˆ é™¤ï¼‰

**æ¥æºè§„æ ¼**: `010-attribute-dict-management` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `typeId` | path | string | âœ… | å­—å…¸ç±»å‹ID |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **400**: å­˜åœ¨å…³è”æ•°æ®ï¼Œæ— æ³•åˆ é™¤
- **404**: 

---

### Export

#### 1. å¯¼å‡ºè®¢å•æ•°æ®

**ç«¯ç‚¹**: `POST /orders/export`

**æè¿°**: å¯¼å‡ºè®¢å•åˆ—è¡¨ä¸º Excel æˆ– CSV æ ¼å¼ã€‚

**é™åˆ¶**: å•æ¬¡æœ€å¤šå¯¼å‡º 10000 æ¡è®°å½•


**æ¥æºè§„æ ¼**: `O001-product-order-list` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ExportRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: å¯¼å‡ºæˆåŠŸ
- **400**: 
- **500**: 

---

### Images

#### 1. ç”ŸæˆèƒŒæ™¯å›¾ç‰‡ä¸Šä¼ é¢„ç­¾å URL

**ç«¯ç‚¹**: `POST /scenario-packages/{id}/image`

**æè¿°**: ç”Ÿæˆç”¨äºä¸Šä¼ èƒŒæ™¯å›¾ç‰‡çš„é¢„ç­¾å URLï¼ˆæœ‰æ•ˆæœŸ 10 åˆ†é’Ÿï¼‰ã€‚
å‰ç«¯ç›´æ¥ä½¿ç”¨è¯¥ URL ä¸Šä¼ å›¾ç‰‡åˆ° Supabase Storageï¼Œä¸Šä¼ æˆåŠŸåè°ƒç”¨å›è°ƒæ¥å£æ›´æ–°æ•°æ®åº“ã€‚


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: ç”ŸæˆæˆåŠŸ
- **400**: æ–‡ä»¶éªŒè¯å¤±è´¥
- **404**: 
- **500**: 

---

#### 2. ç¡®è®¤å›¾ç‰‡ä¸Šä¼ æˆåŠŸ

**ç«¯ç‚¹**: `PATCH /scenario-packages/{id}/image`

**æè¿°**: å‰ç«¯ä¸Šä¼ å›¾ç‰‡åˆ° Supabase Storage æˆåŠŸåï¼Œè°ƒç”¨æ­¤æ¥å£æ›´æ–°æ•°æ®åº“ä¸­çš„ `background_image_url` å­—æ®µã€‚


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **404**: 
- **500**: 

---

### Inventory

#### 1. æŸ¥è¯¢åº“å­˜åˆ—è¡¨

**ç«¯ç‚¹**: `GET /inventory`

**æè¿°**: æŸ¥è¯¢é—¨åº—SKUåº“å­˜åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€æœç´¢å’Œå¤šç»´ç­›é€‰ã€‚
- æ”¯æŒæŒ‰SKUåç§°/ç¼–ç æ¨¡ç³Šæœç´¢
- æ”¯æŒæŒ‰é—¨åº—ã€åº“å­˜çŠ¶æ€ã€å•†å“åˆ†ç±»ç­›é€‰
- ç­›é€‰æ¡ä»¶ä¸ºäº¤é›†å…³ç³»


**æ¥æºè§„æ ¼**: `P003-inventory-query` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | query | string | âŒ | é—¨åº—IDï¼ˆé»˜è®¤å½“å‰ç”¨æˆ·æ‰€å±é—¨åº—ï¼‰ |
| `keyword` | query | string | âŒ | æœç´¢å…³é”®è¯ï¼ˆåŒ¹é…SKUåç§°æˆ–ç¼–ç ï¼‰ |
| `categoryId` | query | string | âŒ | å•†å“åˆ†ç±»ID |
| `statuses` | query | string | âŒ | åº“å­˜çŠ¶æ€ç­›é€‰ï¼ˆå¤šé€‰ï¼Œé€—å·åˆ†éš”ï¼‰ |
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ¡æ•° |

**å“åº”**:

- **200**: æˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **401**: æœªè®¤è¯
- **403**: æ— æƒé™è®¿é—®è¯¥é—¨åº—

---

#### 2. è·å–åº“å­˜è¯¦æƒ…

**ç«¯ç‚¹**: `GET /inventory/{id}`

**æè¿°**: è·å–å•æ¡åº“å­˜è®°å½•çš„è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `P003-inventory-query` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | åº“å­˜è®°å½•ID |

**å“åº”**:

- **200**: æˆåŠŸ
- **404**: åº“å­˜è®°å½•ä¸å­˜åœ¨

---

### Orders

#### 1. æŸ¥è¯¢è®¢å•åˆ—è¡¨

**ç«¯ç‚¹**: `GET /orders`

**æè¿°**: è·å–å•†å“è®¢å•åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åºã€‚

**æƒé™**: è¿è¥äººå‘˜
**é»˜è®¤è¡Œä¸º**: æ˜¾ç¤ºè¿‘30å¤©è®¢å•ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—


**æ¥æºè§„æ ¼**: `O001-product-order-list` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µè®°å½•æ•° |
| `status` | query | object | âŒ | è®¢å•çŠ¶æ€ç­›é€‰ |
| `startDate` | query | string | âŒ | åˆ›å»ºæ—¶é—´èµ·å§‹æ—¥æœŸï¼ˆISO 8601æ ¼å¼ï¼‰ |
| `endDate` | query | string | âŒ | åˆ›å»ºæ—¶é—´ç»“æŸæ—¥æœŸï¼ˆISO 8601æ ¼å¼ï¼‰ |
| `search` | query | string | âŒ | æœç´¢å…³é”®è¯ï¼ˆæ”¯æŒç”¨æˆ·åã€æ‰‹æœºå·ã€è®¢å•å·ï¼‰ |
| `sortBy` | query | string | âŒ | æ’åºå­—æ®µ |
| `sortOrder` | query | string | âŒ | æ’åºæ–¹å‘ |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **400**: 
- **401**: 
- **500**: 

---

#### 2. è·å–è®¢å•è¯¦æƒ…

**ç«¯ç‚¹**: `GET /orders/{id}`

**æè¿°**: æ ¹æ®è®¢å•IDè·å–å®Œæ•´è®¢å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬å•†å“é¡¹å’Œæ“ä½œæ—¥å¿—ã€‚

**æ¥æºè§„æ ¼**: `O001-product-order-list` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: 
- **500**: 

---

#### 3. æ›´æ–°è®¢å•çŠ¶æ€

**ç«¯ç‚¹**: `PUT /orders/{id}/status`

**æè¿°**: æ‰‹åŠ¨æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆå‘è´§ã€å®Œæˆã€å–æ¶ˆï¼‰ã€‚

**çŠ¶æ€è½¬æ¢è§„åˆ™**:
- PAID â†’ SHIPPEDï¼ˆæ ‡è®°å‘è´§ï¼‰
- SHIPPED â†’ COMPLETEDï¼ˆæ ‡è®°å®Œæˆï¼‰
- PENDING_PAYMENT/PAID â†’ CANCELLEDï¼ˆå–æ¶ˆè®¢å•ï¼Œéœ€å¡«å†™åŸå› ï¼‰

**ä¹è§‚é”**: éœ€è¦ä¼ å…¥å½“å‰ç‰ˆæœ¬å·ï¼Œé˜²æ­¢å¹¶å‘å†²çª


**æ¥æºè§„æ ¼**: `O001-product-order-list` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateStatusRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 
- **409**: ç‰ˆæœ¬å†²çªï¼ˆä¹è§‚é”å¤±è´¥ï¼‰
- **422**: ä¸šåŠ¡è§„åˆ™å†²çª
- **500**: 

---

### Pricing

#### 1. è®¡ç®—å‚è€ƒæ€»ä»·

**ç«¯ç‚¹**: `GET /scenario-packages/{id}/pricing/reference`

**æè¿°**: å®æ—¶è®¡ç®—åœºæ™¯åŒ…çš„å‚è€ƒæ€»ä»·ï¼ˆè½¯æƒç›Šå•å“ + æœåŠ¡é¡¹ç›®çš„ä»·æ ¼æ€»å’Œï¼‰ã€‚
ç¡¬æƒç›Šä¸è®¡å…¥å‚è€ƒæ€»ä»·ã€‚


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: è®¡ç®—æˆåŠŸ
- **404**: 
- **500**: 

---

### Reasons

#### 1. è·å–è°ƒæ•´åŸå› å­—å…¸

**ç«¯ç‚¹**: `GET /adjustment-reasons`

**æè¿°**: è·å–æ‰€æœ‰å¯ç”¨çš„è°ƒæ•´åŸå› é€‰é¡¹

**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ

---

### SKU

#### 1. List SKUs with filtering and pagination

**ç«¯ç‚¹**: `GET /api/skus`

**æè¿°**: Retrieve a paginated list of SKUs with optional filtering by type, category, and keyword search.

**Key Use Cases**:
- FR-006: Filter SKUs by type=finished_product for BOM configuration
- FR-007: Display only finished_product SKUs in SKU selector
- General SKU list display in management interface


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `type` | query | string | âŒ | Filter by SKU type. Valid values: finished_product, packaging, raw_material.

**Example**: `?type=finished_product` returns only finished product SKUs (used in FR-006/FR-007).
 |
| `category` | query | string | âŒ | Filter by category ID (UUID format) |
| `keyword` | query | string | âŒ | Search by SKU code or name (case-insensitive partial match) |
| `status` | query | string | âŒ | Filter by SKU status |
| `page` | query | integer | âŒ | Page number (1-based) |
| `pageSize` | query | integer | âŒ | Number of items per page |

**å“åº”**:

- **200**: SKU list retrieved successfully
- **400**: 
- **401**: 
- **500**: 

---

#### 2. Create a new SKU

**ç«¯ç‚¹**: `POST /api/skus`

**æè¿°**: Create a new SKU entity with all required fields.

**Validation Rules**:
- `skuCode` must be unique and follow format: FIN-{NAME}-{SEQUENCE} / PKG-{NAME}-{SEQUENCE} / RAW-{NAME}-{SEQUENCE}
- `skuName` length: 1-100 characters
- `price` must be > 0 (unit: cents)
- `skuType` must be one of: finished_product, packaging, raw_material
- `categoryId` must reference an existing category


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateSKURequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: SKU created successfully
- **400**: Validation error or duplicate SKU code
- **401**: 
- **500**: 

---

#### 3. Get SKU by ID

**ç«¯ç‚¹**: `GET /api/skus/{id}`

**æè¿°**: Retrieve detailed information about a specific SKU by its UUID

**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | SKU UUID |

**å“åº”**:

- **200**: SKU retrieved successfully
- **404**: SKU not found
- **401**: 
- **500**: 

---

#### 4. Update SKU

**ç«¯ç‚¹**: `PUT /api/skus/{id}`

**æè¿°**: Update an existing SKU entity. Partial updates are supported (only provided fields will be updated).

**Validation Rules**:
- Cannot change `skuCode` (immutable after creation)
- Cannot change `skuType` if SKU is referenced by BOMs
- All other validation rules same as creation


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | SKU UUID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateSKURequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: SKU updated successfully
- **400**: 
- **404**: 
- **401**: 
- **500**: 

---

#### 5. Delete SKU

**ç«¯ç‚¹**: `DELETE /api/skus/{id}`

**æè¿°**: Delete a SKU entity. Cannot delete if SKU is referenced by BOMs.

**Pre-deletion Checks**:
- Check if SKU is referenced in `boms.component_sku_id` or `boms.finished_product_sku_id`
- If referenced, return 409 Conflict error


**æ¥æºè§„æ ¼**: `O004-beverage-sku-reuse` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | SKU UUID |

**å“åº”**:

- **204**: SKU deleted successfully (no content)
- **409**: SKU is referenced by BOMs and cannot be deleted
- **404**: 
- **401**: 
- **500**: 

---

### SKU Management

#### 1. è·å–SKUè¯¦æƒ…ï¼ˆèšåˆæŸ¥è¯¢ï¼‰

**ç«¯ç‚¹**: `GET /api/skus/{id}/details`

**æè¿°**: è·å–SKUè¯¦æƒ…ï¼ŒåŒ…å«å…³è”çš„SPUå’ŒBOMæ•°æ®ã€‚

**ç‰¹æ€§**:
- å•æ¬¡APIè°ƒç”¨è¿”å›SKU+SPU+BOMèšåˆæ•°æ®
- æ”¯æŒéƒ¨åˆ†åŠ è½½å¤±è´¥åœºæ™¯ï¼ˆé€šè¿‡metadataå­—æ®µæ ‡è¯†ï¼‰
- åç«¯ä½¿ç”¨Caffeineç¼“å­˜SPUæ•°æ®ï¼ˆ5åˆ†é’ŸTTLï¼‰
- å‰ç«¯ä½¿ç”¨TanStack Queryç¼“å­˜ï¼ˆ2åˆ†é’ŸstaleTimeï¼‰

**æ€§èƒ½ç›®æ ‡**:
- å“åº”æ—¶é—´ <2ç§’ (P95)
- åŒ…å«BOMæ—¶æœ€å¤šåŠ è½½100ä¸ªåŸæ–™ç»„æˆé¡¹


**æ¥æºè§„æ ¼**: `P006-fix-sku-edit-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | SKUçš„å”¯ä¸€æ ‡è¯†ç¬¦ |

**å“åº”**:

- **200**: æˆåŠŸè·å–SKUè¯¦æƒ…
- **404**: SKUä¸å­˜åœ¨
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

#### 2. æ›´æ–°SKUä¿¡æ¯

**ç«¯ç‚¹**: `PUT /api/skus/{id}`

**æè¿°**: æ›´æ–°SKUåŸºæœ¬ä¿¡æ¯ï¼Œæ”¯æŒä¹è§‚é”å¹¶å‘å†²çªæ£€æµ‹ã€‚

**å¹¶å‘å†²çªæ£€æµ‹**:
- è¯·æ±‚å¿…é¡»åŒ…å«`version`å­—æ®µï¼ˆä¹è§‚é”ç‰ˆæœ¬å·ï¼‰
- å¦‚æœç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œè¿”å›422é”™è¯¯å¹¶æç¤ºç”¨æˆ·åˆ·æ–°
- å‰ç«¯æ˜¾ç¤ºè¦†ç›–è­¦å‘Šå¼¹çª—ï¼š"æ•°æ®å·²è¢«å…¶ä»–ç”¨æˆ·ä¿®æ”¹ï¼Œæ‚¨ç¡®è®¤è¦è¦†ç›–å—ï¼Ÿ"

**æ³¨æ„äº‹é¡¹**:
- SPUå…³è”å…³ç³»å’ŒBOMé…æ–¹æ•°æ®ä¸ä¼šå› æ­¤æ¥å£ä¿®æ”¹è€Œä¸¢å¤±
- æˆåŠŸæ›´æ–°åç‰ˆæœ¬å·è‡ªåŠ¨é€’å¢


**æ¥æºè§„æ ¼**: `P006-fix-sku-edit-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | SKUçš„å”¯ä¸€æ ‡è¯†ç¬¦ |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `SKUUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æˆåŠŸæ›´æ–°SKU
- **400**: è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥
- **404**: SKUä¸å­˜åœ¨
- **422**: å¹¶å‘å†²çªï¼ˆç‰ˆæœ¬å·ä¸åŒ¹é…ï¼‰
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### SKUç®¡ç†

#### 1. æŸ¥è¯¢SKUåˆ—è¡¨

**ç«¯ç‚¹**: `GET /skus`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `skuType` | query | string | âŒ | æŒ‰SKUç±»å‹ç­›é€‰ |
| `status` | query | string | âŒ | æŒ‰çŠ¶æ€ç­›é€‰ |
| `storeId` | query | string | âŒ | æŒ‰é—¨åº—å¯ç”¨æ€§ç­›é€‰(è¿”å›è¯¥é—¨åº—å¯ç”¨çš„SKU) |
| `keyword` | query | string | âŒ | å…³é”®è¯æœç´¢(åç§°/æ¡ç ) |
| `page` | query | integer | âŒ |  |
| `pageSize` | query | integer | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸ

---

#### 2. åˆ›å»ºSKU

**ç«¯ç‚¹**: `POST /skus`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `SKUCreateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 
- **409**: 

---

#### 3. è·å–SKUè¯¦æƒ…

**ç«¯ç‚¹**: `GET /skus/{id}`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**å“åº”**:

- **200**: æˆåŠŸ
- **404**: 

---

#### 4. æ›´æ–°SKU

**ç«¯ç‚¹**: `PUT /skus/{id}`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `SKUUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

#### 5. åˆ é™¤SKU

**ç«¯ç‚¹**: `DELETE /skus/{id}`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**å“åº”**:

- **200**: åˆ é™¤æˆåŠŸ
- **400**: åˆ é™¤å¤±è´¥(å­˜åœ¨ä¾èµ–å…³ç³»)
- **404**: 

---

#### 6. éªŒè¯é—¨åº—èŒƒå›´å¯ç”¨æ€§

**ç«¯ç‚¹**: `POST /skus/{id}/validate-store-scope`

**æè¿°**: åœ¨å¯ç”¨æˆå“/å¥—é¤å‰,éªŒè¯æ‰€æœ‰ç»„ä»¶/å­é¡¹åœ¨ç›®æ ‡é—¨åº—å¯ç”¨

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: éªŒè¯ç»“æœ

---

### SafetyStock

#### 1. æ›´æ–°å®‰å…¨åº“å­˜é˜ˆå€¼

**ç«¯ç‚¹**: `PUT /inventory/{id}/safety-stock`

**æè¿°**: æ›´æ–°æŒ‡å®šSKU+é—¨åº—çš„å®‰å…¨åº“å­˜é˜ˆå€¼ã€‚
- ä½¿ç”¨ä¹è§‚é”é˜²æ­¢å¹¶å‘å†²çª
- æ›´æ–°åç«‹å³å½±å“åº“å­˜çŠ¶æ€è®¡ç®—


**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | åº“å­˜è®°å½•ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateSafetyStockRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: å‚æ•°é”™è¯¯
- **404**: åº“å­˜è®°å½•ä¸å­˜åœ¨
- **409**: å¹¶å‘å†²çªï¼ˆå·²è¢«ä»–äººä¿®æ”¹ï¼‰

---

### ScenarioPackages

#### 1. æŸ¥è¯¢åœºæ™¯åŒ…åˆ—è¡¨

**ç«¯ç‚¹**: `GET /scenario-packages`

**æè¿°**: åˆ†é¡µæŸ¥è¯¢åœºæ™¯åŒ…åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰çŠ¶æ€ã€å½±å…ç±»å‹ã€åˆ›å»ºæ—¶é—´ç­›é€‰ã€‚
é»˜è®¤ä»…è¿”å›æœ€æ–°ç‰ˆæœ¬ï¼ˆ`is_latest=true`ï¼‰ä¸”æœªåˆ é™¤çš„åœºæ™¯åŒ…ã€‚


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ | é¡µç ï¼ˆä» 0 å¼€å§‹ï¼‰ |
| `size` | query | integer | âŒ | æ¯é¡µæ•°é‡ |
| `status` | query | string | âŒ | ç­›é€‰çŠ¶æ€ |
| `hallTypeId` | query | string | âŒ | ç­›é€‰å½±å…ç±»å‹ IDï¼ˆå¯å¤šé€‰ï¼Œé€—å·åˆ†éš”ï¼‰ |
| `sortBy` | query | string | âŒ | æ’åºå­—æ®µ |
| `sortOrder` | query | string | âŒ | æ’åºæ–¹å‘ |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **400**: 
- **500**: 

---

#### 2. åˆ›å»ºåœºæ™¯åŒ…

**ç«¯ç‚¹**: `POST /scenario-packages`

**æè¿°**: åˆ›å»ºæ–°çš„åœºæ™¯åŒ…ï¼ˆè‰ç¨¿çŠ¶æ€ï¼‰ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€è§„åˆ™ã€å†…å®¹ç»„åˆå’Œå®šä»·ã€‚

**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateScenarioPackageRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 
- **500**: 

---

#### 3. æŸ¥è¯¢åœºæ™¯åŒ…è¯¦æƒ…

**ç«¯ç‚¹**: `GET /scenario-packages/{id}`

**æè¿°**: æ ¹æ® ID æŸ¥è¯¢å•ä¸ªåœºæ™¯åŒ…çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰å…³è”æ•°æ®ã€‚

**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: 
- **500**: 

---

#### 4. æ›´æ–°åœºæ™¯åŒ…

**ç«¯ç‚¹**: `PUT /scenario-packages/{id}`

**æè¿°**: æ›´æ–°åœºæ™¯åŒ…ä¿¡æ¯ã€‚æ”¯æŒä¹è§‚é”å¹¶å‘æ§åˆ¶ï¼ˆé€šè¿‡ `versionLock` å­—æ®µï¼‰ã€‚
- å¦‚æœæ›´æ–°çš„æ˜¯å·²å‘å¸ƒçŠ¶æ€çš„åŒ…ï¼Œå°†åˆ›å»ºæ–°ç‰ˆæœ¬ï¼ˆversion+1ï¼‰
- å¦‚æœæ›´æ–°çš„æ˜¯è‰ç¨¿çŠ¶æ€çš„åŒ…ï¼Œç›´æ¥è¦†ç›–


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateScenarioPackageRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 
- **409**: 
- **500**: 

---

#### 5. åˆ é™¤åœºæ™¯åŒ…ï¼ˆè½¯åˆ é™¤ï¼‰

**ç«¯ç‚¹**: `DELETE /scenario-packages/{id}`

**æè¿°**: è½¯åˆ é™¤åœºæ™¯åŒ…ï¼ˆè®¾ç½® `deleted_at` å­—æ®µï¼‰ã€‚ä»…å…è®¸åˆ é™¤è‰ç¨¿æˆ–å·²ä¸‹æ¶çŠ¶æ€çš„åœºæ™¯åŒ…ã€‚
å¦‚æœåœºæ™¯åŒ…æœ‰è¿›è¡Œä¸­çš„è®¢å•ï¼Œå°†é˜»æ­¢åˆ é™¤å¹¶è¿”å› 409 é”™è¯¯ã€‚


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸï¼ˆæ— å“åº”ä½“ï¼‰
- **404**: 
- **409**: æ— æ³•åˆ é™¤ï¼ˆæœ‰è¿›è¡Œä¸­çš„è®¢å•æˆ–çŠ¶æ€ä¸å…è®¸ï¼‰
- **500**: 

---

#### 6. å‘å¸ƒåœºæ™¯åŒ…

**ç«¯ç‚¹**: `POST /scenario-packages/{id}/publish`

**æè¿°**: å°†è‰ç¨¿çŠ¶æ€çš„åœºæ™¯åŒ…å‘å¸ƒä¸Šæ¶ã€‚å‘å¸ƒå‰ä¼šéªŒè¯é…ç½®å®Œæ•´æ€§ï¼š
- å¿…é¡»åŒ…å«è‡³å°‘ä¸€é¡¹å†…å®¹ï¼ˆç¡¬æƒç›Šã€è½¯æƒç›Šæˆ–æœåŠ¡é¡¹ç›®ï¼‰
- å¿…é¡»è®¾ç½®å®šä»·


**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: å‘å¸ƒæˆåŠŸ
- **400**: é…ç½®ä¸å®Œæ•´ï¼Œæ— æ³•å‘å¸ƒ
- **404**: 
- **500**: 

---

#### 7. ä¸‹æ¶åœºæ™¯åŒ…

**ç«¯ç‚¹**: `POST /scenario-packages/{id}/unpublish`

**æè¿°**: å°†å·²å‘å¸ƒçš„åœºæ™¯åŒ…ä¸‹æ¶ï¼ˆçŠ¶æ€æ”¹ä¸º UNPUBLISHEDï¼‰ï¼Œåœ¨å°ç¨‹åºç«¯éšè—ã€‚

**æ¥æºè§„æ ¼**: `017-scenario-package` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: ä¸‹æ¶æˆåŠŸ
- **404**: 
- **500**: 

---

#### 8. åˆ›å»ºåœºæ™¯åŒ…ï¼ˆå«é—¨åº—å…³è”ï¼‰

**ç«¯ç‚¹**: `POST /scenario-packages`

**æè¿°**: åˆ›å»ºæ–°çš„åœºæ™¯åŒ…ï¼Œå¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªé—¨åº—å…³è”ã€‚

**æ‰©å±•å­—æ®µ**: `storeIds` - å…³è”çš„é—¨åº—IDåˆ—è¡¨


**æ¥æºè§„æ ¼**: `019-store-association` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ScenarioPackageCreateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

#### 9. è·å–åœºæ™¯åŒ…è¯¦æƒ…ï¼ˆå«é—¨åº—å…³è”ï¼‰

**ç«¯ç‚¹**: `GET /scenario-packages/{id}`

**æè¿°**: è·å–åœºæ™¯åŒ…è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«å…³è”çš„é—¨åº—åˆ—è¡¨ã€‚

**æ‰©å±•å“åº”å­—æ®µ**:
- `stores` - å…³è”çš„é—¨åº—è¯¦ç»†ä¿¡æ¯åˆ—è¡¨
- `storeIds` - å…³è”çš„é—¨åº—IDåˆ—è¡¨ï¼ˆä¾¿äºè¡¨å•å›æ˜¾ï¼‰


**æ¥æºè§„æ ¼**: `019-store-association` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | åœºæ™¯åŒ…ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›åœºæ™¯åŒ…è¯¦æƒ…
- **404**: åœºæ™¯åŒ…ä¸å­˜åœ¨
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

#### 10. æ›´æ–°åœºæ™¯åŒ…ï¼ˆå«é—¨åº—å…³è”ï¼‰

**ç«¯ç‚¹**: `PUT /scenario-packages/{id}`

**æè¿°**: æ›´æ–°åœºæ™¯åŒ…ä¿¡æ¯ï¼ŒåŒ…æ‹¬é—¨åº—å…³è”ã€‚

**ä¹è§‚é”**: è¯·æ±‚å¿…é¡»åŒ…å«å½“å‰ `versionLock` å€¼ï¼Œè‹¥ç‰ˆæœ¬ä¸åŒ¹é…åˆ™è¿”å› 409 å†²çªé”™è¯¯ã€‚

**é—¨åº—å…³è”æ›´æ–°**: ä¼ å…¥çš„ `storeIds` å°†å®Œå…¨è¦†ç›–åŸæœ‰å…³è”ï¼ˆå…¨é‡æ›´æ–°ï¼‰ã€‚


**æ¥æºè§„æ ¼**: `019-store-association` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | åœºæ™¯åŒ…ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ScenarioPackageUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **404**: åœºæ™¯åŒ…ä¸å­˜åœ¨
- **409**: ç‰ˆæœ¬å†²çªï¼ˆä¹è§‚é”ï¼‰
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### Store

#### 1. è·å–å¯è®¿é—®çš„é—¨åº—åˆ—è¡¨

**ç«¯ç‚¹**: `GET /stores/accessible`

**æè¿°**: è·å–å½“å‰ç”¨æˆ·æœ‰æƒé™è®¿é—®çš„é—¨åº—åˆ—è¡¨

**æ¥æºè§„æ ¼**: `P003-inventory-query` (openapi)

**å“åº”**:

- **200**: æˆåŠŸ

---

### Stores

#### 1. è·å–é—¨åº—åˆ—è¡¨

**ç«¯ç‚¹**: `GET /stores`

**æè¿°**: è·å–æ‰€æœ‰é—¨åº—åˆ—è¡¨ï¼Œç”¨äºåœºæ™¯åŒ…å…³è”é…ç½®æ—¶çš„é—¨åº—é€‰æ‹©ã€‚

**æ³¨æ„**: æ­¤ API ç”± 014-hall-store-backend æä¾›ï¼Œæœ¬åŠŸèƒ½ä»…å¤ç”¨ã€‚


**æ¥æºè§„æ ¼**: `019-store-association` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | é—¨åº—çŠ¶æ€ç­›é€‰ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é—¨åº—åˆ—è¡¨
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

#### 2. è·å–é—¨åº—åˆ—è¡¨

**ç«¯ç‚¹**: `GET /stores`

**æè¿°**: è·å–æ‰€æœ‰é—¨åº—åˆ—è¡¨ï¼Œè¿”å›åŒ…å«åœ°å€æ‘˜è¦çš„é—¨åº—ä¿¡æ¯

**æ¥æºè§„æ ¼**: `020-store-address` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | string | âŒ | æŒ‰çŠ¶æ€è¿‡æ»¤ |
| `province` | query | string | âŒ | æŒ‰çœä»½è¿‡æ»¤ |
| `city` | query | string | âŒ | æŒ‰åŸå¸‚è¿‡æ»¤ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é—¨åº—åˆ—è¡¨

---

#### 3. è·å–é—¨åº—è¯¦æƒ…

**ç«¯ç‚¹**: `GET /stores/{storeId}`

**æè¿°**: è·å–å•ä¸ªé—¨åº—çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯¦ç»†åœ°å€

**æ¥æºè§„æ ¼**: `020-store-address` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—ID (UUID) |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›é—¨åº—è¯¦æƒ…
- **404**: é—¨åº—ä¸å­˜åœ¨

---

#### 4. æ›´æ–°é—¨åº—ä¿¡æ¯

**ç«¯ç‚¹**: `PUT /stores/{storeId}`

**æè¿°**: æ›´æ–°é—¨åº—ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ°å€å­—æ®µ

**æ¥æºè§„æ ¼**: `020-store-address` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateStoreRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **404**: é—¨åº—ä¸å­˜åœ¨

---

### T002-e2e-test-generator

#### 1. POST /auth/login

**ç«¯ç‚¹**: `POST /auth/login`

**æè¿°**: POST /auth/login

**æ¥æºè§„æ ¼**: `T002-e2e-test-generator` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/T002-e2e-test-generator/spec.md`

---

### Transactions

#### 1. æŸ¥è¯¢åº“å­˜æµæ°´

**ç«¯ç‚¹**: `GET /transactions`

**æè¿°**: åˆ†é¡µæŸ¥è¯¢åº“å­˜æµæ°´è®°å½•ã€‚
- æ”¯æŒæŒ‰SKUã€é—¨åº—ã€æ—¶é—´èŒƒå›´ç­›é€‰
- æ”¯æŒæŒ‰äº¤æ˜“ç±»å‹ç­›é€‰


**æ¥æºè§„æ ¼**: `P004-inventory-adjustment` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `skuId` | query | string | âŒ | æŒ‰SKUç­›é€‰ |
| `storeId` | query | string | âŒ | æŒ‰é—¨åº—ç­›é€‰ |
| `transactionTypes` | query | array | âŒ | æŒ‰äº¤æ˜“ç±»å‹ç­›é€‰ï¼ˆæ”¯æŒå¤šé€‰ï¼‰ |
| `startDate` | query | string | âŒ | å¼€å§‹æ—¥æœŸ |
| `endDate` | query | string | âŒ | ç»“æŸæ—¥æœŸ |
| `page` | query | integer | âŒ |  |
| `pageSize` | query | integer | âŒ |  |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ

---

### U003-wechat-miniapp-login

#### 1. POST /api/reservations

**ç«¯ç‚¹**: `POST /api/reservations`

**æè¿°**: POST /api/reservations

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 2. POST /api/auth/wechat-login

**ç«¯ç‚¹**: `POST /api/auth/wechat-login`

**æè¿°**: POST /api/auth/wechat-login

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 3. POST /api/auth/refresh-token

**ç«¯ç‚¹**: `POST /api/auth/refresh-token`

**æè¿°**: POST /api/auth/refresh-token

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 4. PUT /api/users/profile

**ç«¯ç‚¹**: `PUT /api/users/profile`

**æè¿°**: PUT /api/users/profile

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 5. POST /api/auth/decrypt-phone

**ç«¯ç‚¹**: `POST /api/auth/decrypt-phone`

**æè¿°**: POST /api/auth/decrypt-phone

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 6. POST /api/auth/wechat-login

**ç«¯ç‚¹**: `POST /api/auth/wechat-login`

**æè¿°**: POST /api/auth/wechat-login

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 7. POST /api/auth/refresh-token

**ç«¯ç‚¹**: `POST /api/auth/refresh-token`

**æè¿°**: POST /api/auth/refresh-token

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 8. POST /api/auth/decrypt-phone

**ç«¯ç‚¹**: `POST /api/auth/decrypt-phone`

**æè¿°**: POST /api/auth/decrypt-phone

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

#### 9. PUT /api/users/profile

**ç«¯ç‚¹**: `PUT /api/users/profile`

**æè¿°**: PUT /api/users/profile

**æ¥æºè§„æ ¼**: `U003-wechat-miniapp-login` (markdown)

**è¯¦ç»†ä¿¡æ¯**: è¯·å‚è€ƒè§„æ ¼æ–‡æ¡£ `specs/U003-wechat-miniapp-login/spec.md`

---

### add-on-items

#### 1. è·å–å…¨å±€åŠ è´­é¡¹åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/add-on-items`

**æè¿°**: è¿”å›æ‰€æœ‰åŠ è´­é¡¹,æ”¯æŒæŒ‰åˆ†ç±»ç­›é€‰

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `category` | query | string | âŒ | æŒ‰åˆ†ç±»ç­›é€‰(CATERING/BEVERAGE/SERVICE/DECORATION) |
| `isActive` | query | boolean | âŒ | æ˜¯å¦ä»…æ˜¾ç¤ºä¸Šæ¶å•†å“ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›åŠ è´­é¡¹åˆ—è¡¨

---

#### 2. è·å–åœºæ™¯åŒ…å·²å…³è”çš„åŠ è´­é¡¹

**ç«¯ç‚¹**: `GET /api/scenario-packages/{id}/add-ons`

**æè¿°**: è¿”å›åœºæ™¯åŒ…å·²å…³è”çš„åŠ è´­é¡¹åˆ—è¡¨,åŒ…å«æ’åºå’Œå¿…é€‰æ ‡è®°

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å·²å…³è”åŠ è´­é¡¹

---

#### 3. æ‰¹é‡æ›´æ–°åœºæ™¯åŒ…çš„åŠ è´­é¡¹å…³è”

**ç«¯ç‚¹**: `PUT /api/scenario-packages/{id}/add-ons`

**æè¿°**: ä¸€æ¬¡æ€§æ›´æ–°åœºæ™¯åŒ…å…³è”çš„æ‰€æœ‰åŠ è´­é¡¹,åŒ…æ‹¬æ–°å¢ã€åˆ é™¤å’Œæ’åº

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `AddOnAssociationBatchRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ‰¹é‡æ›´æ–°æˆåŠŸ
- **400**: 

---

### admin-reservations

#### 1. æŸ¥è¯¢è®¢å•åˆ—è¡¨ (with filtering, pagination, sorting)

**ç«¯ç‚¹**: `GET /admin/reservations`

**æè¿°**: **Feature**: U001-reservation-order-management (reused by U004)

**Key Capabilities**:
- Multi-status filtering (OR logic)
- Phone number partial match search
- Time range filtering (reservation date or creation date)
- Pagination with configurable page size
- Sorting by any field

**Performance**:
- Response time: < 1s for 100 orders
- Supports 10,000+ orders with proper indexing


**æ¥æºè§„æ ¼**: `U004-order-list-view` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `orderNumber` | query | string | âŒ | è®¢å•å·ç²¾ç¡®æœç´¢ |
| `contactPhone` | query | string | âŒ | å®¢æˆ·æ‰‹æœºå·æ¨¡ç³Šæœç´¢ (åŒ…å«åŒ¹é…) |
| `statuses` | query | array | âŒ | è®¢å•çŠ¶æ€ç­›é€‰ (å¤šé€‰,ORé€»è¾‘) |
| `scenarioPackageId` | query | string | âŒ | åœºæ™¯åŒ…IDç­›é€‰ |
| `reservationDateStart` | query | string | âŒ | é¢„è®¢æ—¥æœŸèŒƒå›´ (å¼€å§‹) |
| `reservationDateEnd` | query | string | âŒ | é¢„è®¢æ—¥æœŸèŒƒå›´ (ç»“æŸ) |
| `createdAtStart` | query | string | âŒ | åˆ›å»ºæ—¶é—´èŒƒå›´ (å¼€å§‹) |
| `createdAtEnd` | query | string | âŒ | åˆ›å»ºæ—¶é—´èŒƒå›´ (ç»“æŸ) |
| `page` | query | integer | âŒ | é¡µç  (1-based) |
| `size` | query | integer | âŒ | æ¯é¡µæ•°é‡ |
| `sortBy` | query | string | âŒ | æ’åºå­—æ®µ |
| `sortDirection` | query | string | âŒ | æ’åºæ–¹å‘ |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **400**: 
- **401**: 
- **403**: 
- **500**: 

---

#### 2. æŸ¥è¯¢è®¢å•è¯¦æƒ…

**ç«¯ç‚¹**: `GET /admin/reservations/{id}`

**æè¿°**: **Feature**: U001-reservation-order-management (reused by U004)

**Returns**:
- Complete order information
- All reservation items (package + addons)
- Operation logs (status change history)


**æ¥æºè§„æ ¼**: `U004-order-list-view` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID (UUID) |

**å“åº”**:

- **200**: æŸ¥è¯¢æˆåŠŸ
- **404**: 
- **401**: 
- **500**: 

---

#### 3. ç¡®è®¤è®¢å•

**ç«¯ç‚¹**: `POST /admin/reservations/{id}/confirm`

**æè¿°**: **Feature**: U001-reservation-order-management (reused by U004)

**Business Rules**:
- Only PENDING orders can be confirmed
- `requiresPayment: true` â†’ status becomes CONFIRMED (å¾…æ”¯ä»˜)
- `requiresPayment: false` â†’ status becomes COMPLETED (ç›´æ¥å®Œæˆ)

**Side Effects**:
- Generates operation log (CONFIRM)
- Invalidates order list cache (TanStack Query)


**æ¥æºè§„æ ¼**: `U004-order-list-view` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID (UUID) |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ConfirmReservationRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: ç¡®è®¤æˆåŠŸ
- **400**: è®¢å•çŠ¶æ€ä¸å…è®¸ç¡®è®¤
- **404**: 
- **401**: 
- **500**: 

---

#### 4. å–æ¶ˆè®¢å•

**ç«¯ç‚¹**: `POST /admin/reservations/{id}/cancel`

**æè¿°**: **Feature**: U001-reservation-order-management (reused by U004)

**Business Rules**:
- Only PENDING or CONFIRMED orders can be cancelled
- Cancel reason is **required**
- Cancel reason type is optional (defaults to OTHER)

**Side Effects**:
- Generates operation log (CANCEL)
- Invalidates order list cache (TanStack Query)


**æ¥æºè§„æ ¼**: `U004-order-list-view` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å•ID (UUID) |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CancelReservationRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: å–æ¶ˆæˆåŠŸ
- **400**: è®¢å•çŠ¶æ€ä¸å…è®¸å–æ¶ˆ
- **404**: 
- **401**: 
- **500**: 

---

### channel-product-orders

#### 1. åˆ›å»ºæ¸ é“å•†å“è®¢å•

**ç«¯ç‚¹**: `POST /api/client/channel-product-orders`

**æè¿°**: æäº¤è´­ç‰©è½¦æ•°æ®åˆ›å»ºè®¢å•ã€‚
è®¢å•åˆ›å»ºæˆåŠŸåè‡ªåŠ¨ç”Ÿæˆè®¢å•å·å’Œå–é¤å·ã€‚


**æ¥æºè§„æ ¼**: `O006-miniapp-channel-order` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateChannelProductOrderRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: è®¢å•åˆ›å»ºæˆåŠŸ
- **400**: 
- **401**: 
- **500**: 

---

#### 2. æŸ¥è¯¢æˆ‘çš„è®¢å•åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/channel-product-orders/my`

**æè¿°**: æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„æ‰€æœ‰è®¢å•,æ”¯æŒåˆ†é¡µå’ŒçŠ¶æ€ç­›é€‰

**æ¥æºè§„æ ¼**: `O006-miniapp-channel-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ | é¡µç (ä» 1 å¼€å§‹) |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ•°é‡ |
| `status` | query | object | âŒ | æŒ‰è®¢å•çŠ¶æ€ç­›é€‰(å¯é€‰) |

**å“åº”**:

- **200**: æˆåŠŸè·å–è®¢å•åˆ—è¡¨
- **401**: 
- **500**: 

---

#### 3. è·å–è®¢å•è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/client/channel-product-orders/{id}`

**æè¿°**: è·å–æŒ‡å®šè®¢å•çš„è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `O006-miniapp-channel-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | è®¢å• ID |

**å“åº”**:

- **200**: æˆåŠŸè·å–è®¢å•è¯¦æƒ…
- **404**: 
- **401**: 
- **500**: 

---

### channel-products

#### 1. æŸ¥è¯¢æ¸ é“å•†å“åˆ—è¡¨ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `GET /channel-products`

**æè¿°**: ç®¡ç†å‘˜æŸ¥çœ‹æ¸ é“å•†å“é…ç½®åˆ—è¡¨ï¼Œæ”¯æŒç­›é€‰å’Œåˆ†é¡µã€‚
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å•†å“åˆ—è¡¨
- **401**: 
- **500**: 

---

#### 2. åˆ›å»ºæ¸ é“å•†å“é…ç½®ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `POST /channel-products`

**æè¿°**: ç®¡ç†å‘˜ä¸º SKU æˆå“åˆ›å»ºæ¸ é“é…ç½®ã€‚
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateChannelProductRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 
- **401**: 
- **409**: å†²çª - SKU å·²åœ¨æ­¤æ¸ é“é…ç½®
- **500**: 

---

#### 3. æŸ¥è¯¢å•ä¸ªæ¸ é“å•†å“è¯¦æƒ…ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `GET /channel-products/{id}`

**æè¿°**: ç®¡ç†å‘˜æŸ¥çœ‹æ¸ é“å•†å“å®Œæ•´é…ç½®ä¿¡æ¯ã€‚
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å•†å“è¯¦æƒ…
- **404**: 
- **401**: 
- **500**: 

---

#### 4. æ›´æ–°æ¸ é“å•†å“é…ç½®ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `PUT /channel-products/{id}`

**æè¿°**: ç®¡ç†å‘˜æ›´æ–°æ¸ é“å•†å“é…ç½®ä¿¡æ¯ã€‚
**æ³¨æ„**: SKU å…³è”ä¸å¯ä¿®æ”¹
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateChannelProductRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 
- **401**: 
- **500**: 

---

#### 5. åˆ é™¤æ¸ é“å•†å“é…ç½®ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `DELETE /channel-products/{id}`

**æè¿°**: ç®¡ç†å‘˜åˆ é™¤æ¸ é“å•†å“é…ç½®ï¼ˆè½¯åˆ é™¤ï¼‰ã€‚
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: åˆ é™¤æˆåŠŸ
- **404**: 
- **401**: 
- **500**: 

---

#### 6. æ›´æ–°å•†å“çŠ¶æ€ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `PATCH /channel-products/{id}/status`

**æè¿°**: ç®¡ç†å‘˜æ›´æ–°å•†å“ä¸Šä¸‹æ¶çŠ¶æ€ã€‚
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: çŠ¶æ€æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 
- **401**: 
- **500**: 

---

#### 7. è·å–å¯é€‰ SKU æˆå“åˆ—è¡¨ï¼ˆBç«¯ï¼‰

**ç«¯ç‚¹**: `GET /skus/finished-products`

**æè¿°**: ç”¨äº SKU é€‰æ‹©å™¨ï¼Œä»…è¿”å› finished_product ç±»å‹çš„ SKUã€‚
**æƒé™è¦æ±‚**: ç®¡ç†å‘˜


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `keyword` | query | string | âŒ | æœç´¢å…³é”®è¯ï¼ˆSKU åç§°æˆ–ç¼–ç ï¼‰ |
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å› SKU åˆ—è¡¨
- **401**: 
- **500**: 

---

#### 8. è·å–å°ç¨‹åºæ¸ é“å•†å“åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/channel-products/mini-program`

**æè¿°**: è·å–æ‰€æœ‰çŠ¶æ€ä¸º ACTIVE çš„æ¸ é“å•†å“,æŒ‰åˆ†ç±»åˆ†ç»„æ˜¾ç¤º

**æ¥æºè§„æ ¼**: `O006-miniapp-channel-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `category` | query | object | âŒ | æŒ‰åˆ†ç±»ç­›é€‰(å¯é€‰) |

**å“åº”**:

- **200**: æˆåŠŸè·å–å•†å“åˆ—è¡¨
- **401**: 
- **500**: 

---

#### 9. è·å–æ¸ é“å•†å“è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/client/channel-products/mini-program/{id}`

**æè¿°**: è·å–æŒ‡å®šå•†å“çš„è¯¦ç»†ä¿¡æ¯,åŒ…å«åº“å­˜çŠ¶æ€

**æ¥æºè§„æ ¼**: `O006-miniapp-channel-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ¸ é“å•†å“ ID |

**å“åº”**:

- **200**: æˆåŠŸè·å–å•†å“è¯¦æƒ…
- **404**: 
- **401**: 
- **500**: 

---

#### 10. è·å–æ¸ é“å•†å“è§„æ ¼åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/client/channel-products/mini-program/{id}/specs`

**æè¿°**: è·å–æŒ‡å®šå•†å“çš„æ‰€æœ‰è§„æ ¼é€‰é¡¹

**æ¥æºè§„æ ¼**: `O006-miniapp-channel-order` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ¸ é“å•†å“ ID |

**å“åº”**:

- **200**: æˆåŠŸè·å–å•†å“è§„æ ¼
- **404**: 
- **401**: 
- **500**: 

---

### client-orders

#### 1. åˆ›å»ºè®¢å•ï¼ˆCç«¯ï¼‰

**ç«¯ç‚¹**: `POST /client/channel-product-orders`

**æè¿°**: å°ç¨‹åºç«¯åˆ›å»ºè®¢å•ã€‚
**Mock æ”¯ä»˜**: è®¢å•åˆ›å»ºåè‡ªåŠ¨æ ‡è®°ä¸º PAID çŠ¶æ€ï¼ˆO006è§„æ ¼è¦æ±‚ï¼‰


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateOrderRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: è®¢å•åˆ›å»ºæˆåŠŸ
- **400**: 
- **500**: 

---

#### 2. æŸ¥è¯¢æˆ‘çš„è®¢å•åˆ—è¡¨ï¼ˆCç«¯ï¼‰

**ç«¯ç‚¹**: `GET /client/channel-product-orders/my`

**æè¿°**: å°ç¨‹åºç«¯æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è®¢å•åˆ—è¡¨ã€‚
**ç”¨æˆ·è¯†åˆ«**: ä» JWT token è·å–ç”¨æˆ· ID


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `status` | query | object | âŒ | è®¢å•çŠ¶æ€ç­›é€‰ |
| `` |  | object | âŒ |  |
| `size` | query | integer | âŒ | æ¯é¡µæ•°é‡ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•åˆ—è¡¨
- **401**: 
- **500**: 

---

#### 3. æŸ¥è¯¢è®¢å•è¯¦æƒ…ï¼ˆCç«¯ï¼‰

**ç«¯ç‚¹**: `GET /client/channel-product-orders/{orderId}`

**æè¿°**: å°ç¨‹åºç«¯æŸ¥è¯¢è®¢å•è¯¦æƒ…ã€‚
**æƒé™éªŒè¯**: ä»…å¯æŸ¥è¯¢è‡ªå·±çš„è®¢å•


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `orderId` | path | string | âœ… | è®¢å• ID |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è®¢å•è¯¦æƒ…
- **404**: 
- **401**: 
- **403**: æ— æƒè®¿é—®æ­¤è®¢å•
- **500**: 

---

### client-products

#### 1. è·å–å°ç¨‹åºå•†å“åˆ—è¡¨ï¼ˆCç«¯ï¼‰

**ç«¯ç‚¹**: `GET /client/channel-products/mini-program`

**æè¿°**: å°ç¨‹åºç«¯è·å–å•†å“åˆ—è¡¨ï¼Œä»…è¿”å›å·²ä¸Šæ¶å•†å“ã€‚
**ç­›é€‰è§„åˆ™**:
- å›ºå®šç­›é€‰ channel_type = 'MINI_PROGRAM'
- å›ºå®šç­›é€‰ status = 'ACTIVE'
- è½¯åˆ é™¤è®°å½•ä¸è¿”å›


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `category` | query | object | âŒ | å•†å“åˆ†ç±»ç­›é€‰ |
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |
| `size` | query | integer | âŒ | æ¯é¡µæ•°é‡ |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å•†å“åˆ—è¡¨
- **500**: 

---

#### 2. è·å–å•†å“è¯¦æƒ…ï¼ˆCç«¯ï¼‰

**ç«¯ç‚¹**: `GET /client/channel-products/mini-program/{id}`

**æè¿°**: å°ç¨‹åºç«¯è·å–å•†å“è¯¦æƒ…ï¼ŒåŒ…å«å®Œæ•´è§„æ ¼é…ç½®ã€‚
**è¿”å›æ•°æ®**: ä»…è¿”å› status = 'ACTIVE' çš„å•†å“


**æ¥æºè§„æ ¼**: `O005-channel-product-config` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å•†å“è¯¦æƒ…
- **404**: å•†å“ä¸å­˜åœ¨æˆ–å·²ä¸‹æ¶
- **500**: 

---

### conversion-calculation

#### 1. è®¡ç®—æ¢ç®—è·¯å¾„

**ç«¯ç‚¹**: `POST /unit-conversions/calculate-path`

**æè¿°**: è®¡ç®—ä»æºå•ä½åˆ°ç›®æ ‡å•ä½çš„æœ€çŸ­æ¢ç®—è·¯å¾„ã€‚
è¿”å›è·¯å¾„å’Œç´¯ç§¯æ¢ç®—ç‡ã€‚


**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CalculatePathRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æˆåŠŸè®¡ç®—æ¢ç®—è·¯å¾„
- **404**: æ‰¾ä¸åˆ°æ¢ç®—è·¯å¾„

---

### inventory-deduction

#### 1. Deduct inventory on order fulfillment

**ç«¯ç‚¹**: `POST /inventory/deductions`

**æè¿°**: Deducts actual inventory when order is fulfilled (e.g., bartender confirms drink preparation).
Uses BOM snapshot stored at reservation time to ensure correct quantities.
Atomically deducts current_quantity, releases reserved_quantity, and generates transaction logs.


**æ¥æºè§„æ ¼**: `P005-bom-inventory-deduction` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `DeductionRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: Deduction successful
- **422**: Insufficient current inventory for deduction

---

### inventory-reservation

#### 1. Reserve inventory for order

**ç«¯ç‚¹**: `POST /inventory/reservations`

**æè¿°**: Creates inventory reservations for an order by expanding BOM formulas
and locking required raw materials and packaging components.
Returns success if all components can be reserved, otherwise returns
detailed shortage information.


**æ¥æºè§„æ ¼**: `P005-bom-inventory-deduction` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ReservationRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: Reservation successful
- **400**: Invalid request
- **422**: Insufficient inventory

---

#### 2. Release reservation for order

**ç«¯ç‚¹**: `DELETE /inventory/reservations/{orderId}`

**æè¿°**: Releases inventory reservations when an order is cancelled.
Updates reservation status to CANCELLED and releases locked inventory.


**æ¥æºè§„æ ¼**: `P005-bom-inventory-deduction` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `orderId` | path | string | âœ… | Order ID |

**å“åº”**:

- **200**: Reservation released successfully
- **404**: Order not found or no active reservations

---

### inventory-transactions

#### 1. Query inventory transaction logs

**ç«¯ç‚¹**: `GET /inventory/transactions`

**æè¿°**: Retrieves inventory transaction logs with filtering support.
Supports pagination and filtering by transaction type, SKU, date range, and order ID.


**æ¥æºè§„æ ¼**: `P005-bom-inventory-deduction` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | query | string | âœ… | Store ID |
| `transactionType` | query | string | âŒ | Filter by transaction type |
| `skuId` | query | string | âŒ | Filter by SKU ID |
| `orderId` | query | string | âŒ | Filter by related order ID |
| `startDate` | query | string | âŒ | Start date (ISO 8601) |
| `endDate` | query | string | âŒ | End date (ISO 8601) |
| `page` | query | integer | âŒ | Page number |
| `pageSize` | query | integer | âŒ | Page size |

**å“åº”**:

- **200**: Transaction logs retrieved successfully

---

#### 2. Get transaction detail with BOM components

**ç«¯ç‚¹**: `GET /inventory/transactions/{transactionId}`

**æè¿°**: Retrieves detailed information for a specific transaction.
For BOM_DEDUCTION transactions, includes full BOM component breakdown.


**æ¥æºè§„æ ¼**: `P005-bom-inventory-deduction` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `transactionId` | path | string | âœ… | Transaction ID |

**å“åº”**:

- **200**: Transaction detail retrieved successfully

---

### package-tiers

#### 1. è·å–åœºæ™¯åŒ…çš„æ‰€æœ‰å¥—é¤

**ç«¯ç‚¹**: `GET /api/scenario-packages/{id}/packages`

**æè¿°**: è¿”å›æŒ‡å®šåœºæ™¯åŒ…çš„å¥—é¤åˆ—è¡¨,æŒ‰sortOrderæ’åº

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å¥—é¤åˆ—è¡¨

---

#### 2. åˆ›å»ºæ–°å¥—é¤

**ç«¯ç‚¹**: `POST /api/scenario-packages/{id}/packages`

**æè¿°**: ä¸ºåœºæ™¯åŒ…æ·»åŠ æ–°çš„å¥—é¤é€‰é¡¹

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `PackageTierCreateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 

---

#### 3. æ›´æ–°å¥—é¤

**ç«¯ç‚¹**: `PUT /api/scenario-packages/{id}/packages/{packageId}`

**æè¿°**: æ›´æ–°æŒ‡å®šå¥—é¤çš„ä¿¡æ¯

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `PackageTierUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

#### 4. åˆ é™¤å¥—é¤

**ç«¯ç‚¹**: `DELETE /api/scenario-packages/{id}/packages/{packageId}`

**æè¿°**: åˆ é™¤æŒ‡å®šçš„å¥—é¤

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ,æ— è¿”å›å†…å®¹
- **404**: 
- **409**: å†²çª - å­˜åœ¨å…³è”é¢„è®¢,æ— æ³•åˆ é™¤

---

### publishing

#### 1. è·å–å‘å¸ƒè®¾ç½®

**ç«¯ç‚¹**: `GET /api/scenario-packages/{id}/publish-settings`

**æè¿°**: è·å–åœºæ™¯åŒ…çš„å‘å¸ƒè®¾ç½®

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›å‘å¸ƒè®¾ç½®

---

#### 2. æ›´æ–°å‘å¸ƒè®¾ç½®

**ç«¯ç‚¹**: `PUT /api/scenario-packages/{id}/publish-settings`

**æè¿°**: æ›´æ–°åœºæ™¯åŒ…çš„å‘å¸ƒè®¾ç½®(ç”Ÿæ•ˆæ—¶é—´èŒƒå›´ã€é¢„è®¢è§„åˆ™ç­‰)

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `PublishSettingsUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 

---

#### 3. å‘å¸ƒåœºæ™¯åŒ…

**ç«¯ç‚¹**: `POST /api/scenario-packages/{id}/publish`

**æè¿°**: å°†åœºæ™¯åŒ…çŠ¶æ€è®¾ç½®ä¸ºå·²å‘å¸ƒ,å‘å¸ƒå‰ä¼šè¿›è¡Œå®Œæ•´æ€§éªŒè¯

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: å‘å¸ƒæˆåŠŸ
- **400**: å‘å¸ƒéªŒè¯å¤±è´¥
- **404**: 

---

#### 4. ä¸‹æ¶åœºæ™¯åŒ…

**ç«¯ç‚¹**: `POST /api/scenario-packages/{id}/unpublish`

**æè¿°**: å°†åœºæ™¯åŒ…çŠ¶æ€è®¾ç½®ä¸ºå·²ä¸‹æ¶,Cç«¯ä¸å†å¯è§

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: ä¸‹æ¶æˆåŠŸ
- **404**: 

---

### reservation-settings

#### 1. è·å–æŒ‡å®šé—¨åº—çš„é¢„çº¦è®¾ç½®

**ç«¯ç‚¹**: `GET /stores/{storeId}/reservation-settings`

**æè¿°**: æ ¹æ®é—¨åº—IDè·å–è¯¥é—¨åº—çš„é¢„çº¦è®¾ç½®é…ç½®ï¼ŒåŒ…æ‹¬æ—¶é—´æ®µã€æå‰é‡ã€æ—¶é•¿å•ä½å’ŒæŠ¼é‡‘è§„åˆ™ã€‚

**æ¥æºè§„æ ¼**: `016-store-reservation-settings` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè·å–é¢„çº¦è®¾ç½®
- **404**: é—¨åº—ä¸å­˜åœ¨æˆ–æœªé…ç½®é¢„çº¦è®¾ç½®
- **401**: 
- **500**: 

---

#### 2. åˆ›å»ºæˆ–æ›´æ–°é—¨åº—çš„é¢„çº¦è®¾ç½®

**ç«¯ç‚¹**: `PUT /stores/{storeId}/reservation-settings`

**æè¿°**: åˆ›å»ºæˆ–æ›´æ–°æŒ‡å®šé—¨åº—çš„é¢„çº¦è®¾ç½®é…ç½®ã€‚å¦‚æœé—¨åº—å·²æœ‰é…ç½®åˆ™æ›´æ–°ï¼Œå¦åˆ™åˆ›å»ºæ–°é…ç½®ã€‚

**ä¸šåŠ¡è§„åˆ™**:
- store_idå¿…é¡»å¼•ç”¨æœ‰æ•ˆçš„é—¨åº—
- timeSlotså¿…é¡»åŒ…å«7æ¡è®°å½•ï¼ˆå‘¨ä¸€è‡³å‘¨æ—¥ï¼‰
- startTimeå¿…é¡»æ—©äºendTime
- maxAdvanceDays * 24 å¿…é¡»å¤§äº minAdvanceHours
- depositRequiredä¸ºtrueæ—¶ï¼ŒdepositAmountå’ŒdepositPercentageå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªénull


**æ¥æºè§„æ ¼**: `016-store-reservation-settings` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰ |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ReservationSettingsDTO` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æˆåŠŸæ›´æ–°é¢„çº¦è®¾ç½®
- **201**: æˆåŠŸåˆ›å»ºé¢„çº¦è®¾ç½®
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **404**: é—¨åº—ä¸å­˜åœ¨
- **401**: 
- **500**: 

---

#### 3. åˆ é™¤é—¨åº—çš„é¢„çº¦è®¾ç½®ï¼ˆæ¢å¤é»˜è®¤å€¼ï¼‰

**ç«¯ç‚¹**: `DELETE /stores/{storeId}/reservation-settings`

**æè¿°**: åˆ é™¤æŒ‡å®šé—¨åº—çš„é¢„çº¦è®¾ç½®é…ç½®ï¼Œæ¢å¤ä¸ºç³»ç»Ÿé»˜è®¤å€¼ã€‚

**é»˜è®¤å€¼**:
- å‘¨ä¸€è‡³å‘¨æ—¥: 09:00-21:00
- æœ€å°æå‰1å°æ—¶ï¼Œæœ€å¤§æå‰30å¤©
- æ—¶é•¿å•ä½1å°æ—¶ï¼Œæ— æŠ¼é‡‘


**æ¥æºè§„æ ¼**: `016-store-reservation-settings` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `storeId` | path | string | âœ… | é—¨åº—å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰ |

**å“åº”**:

- **204**: æˆåŠŸåˆ é™¤é¢„çº¦è®¾ç½®
- **404**: é—¨åº—ä¸å­˜åœ¨æˆ–æœªé…ç½®é¢„çº¦è®¾ç½®
- **401**: 
- **500**: 

---

### scenario-packages

#### 1. è·å–åœºæ™¯åŒ…è¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/scenario-packages/{id}`

**æè¿°**: è·å–åœºæ™¯åŒ…çš„å®Œæ•´ä¿¡æ¯,åŒ…æ‹¬åŸºç¡€ä¿¡æ¯ã€å¥—é¤åˆ—è¡¨ã€åŠ è´­é¡¹å…³è”ã€æ—¶æ®µé…ç½®å’Œå‘å¸ƒè®¾ç½®

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›åœºæ™¯åŒ…è¯¦æƒ…
- **404**: 
- **500**: 

---

#### 2. æ›´æ–°åœºæ™¯åŒ…åŸºç¡€ä¿¡æ¯

**ç«¯ç‚¹**: `PUT /api/scenario-packages/{id}`

**æè¿°**: æ›´æ–°åœºæ™¯åŒ…çš„åç§°ã€æè¿°ã€åˆ†ç±»å’Œä¸»å›¾

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `BasicInfoUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

### time-slots

#### 1. è·å–å‘¨æ—¶æ®µæ¨¡æ¿åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/scenario-packages/{id}/time-slot-templates`

**æè¿°**: è¿”å›åœºæ™¯åŒ…çš„æ‰€æœ‰å‘¨æ—¶æ®µæ¨¡æ¿

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›æ—¶æ®µæ¨¡æ¿åˆ—è¡¨

---

#### 2. åˆ›å»ºå‘¨æ—¶æ®µæ¨¡æ¿

**ç«¯ç‚¹**: `POST /api/scenario-packages/{id}/time-slot-templates`

**æè¿°**: ä¸ºåœºæ™¯åŒ…æ·»åŠ æ–°çš„å‘¨æ—¶æ®µæ¨¡æ¿

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `TimeSlotTemplateCreateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 

---

#### 3. æ›´æ–°å‘¨æ—¶æ®µæ¨¡æ¿

**ç«¯ç‚¹**: `PUT /api/scenario-packages/{id}/time-slot-templates/{templateId}`

**æè¿°**: æ›´æ–°æŒ‡å®šçš„å‘¨æ—¶æ®µæ¨¡æ¿

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `TimeSlotTemplateUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

#### 4. åˆ é™¤å‘¨æ—¶æ®µæ¨¡æ¿

**ç«¯ç‚¹**: `DELETE /api/scenario-packages/{id}/time-slot-templates/{templateId}`

**æè¿°**: åˆ é™¤æŒ‡å®šçš„å‘¨æ—¶æ®µæ¨¡æ¿

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **404**: 

---

#### 5. è·å–æ—¶æ®µæ—¥æœŸè¦†ç›–åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/scenario-packages/{id}/time-slot-overrides`

**æè¿°**: è¿”å›åœºæ™¯åŒ…çš„æ‰€æœ‰æ—¥æœŸè¦†ç›–è§„åˆ™

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `startDate` | query | string | âŒ | å¼€å§‹æ—¥æœŸ(YYYY-MM-DD) |
| `endDate` | query | string | âŒ | ç»“æŸæ—¥æœŸ(YYYY-MM-DD) |

**å“åº”**:

- **200**: æˆåŠŸè¿”å›è¦†ç›–åˆ—è¡¨

---

#### 6. åˆ›å»ºæ—¶æ®µæ—¥æœŸè¦†ç›–

**ç«¯ç‚¹**: `POST /api/scenario-packages/{id}/time-slot-overrides`

**æè¿°**: ä¸ºç‰¹å®šæ—¥æœŸæ·»åŠ æ—¶æ®µè¦†ç›–è§„åˆ™

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `TimeSlotOverrideCreateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ›å»ºæˆåŠŸ
- **400**: 

---

#### 7. æ›´æ–°æ—¶æ®µæ—¥æœŸè¦†ç›–

**ç«¯ç‚¹**: `PUT /api/scenario-packages/{id}/time-slot-overrides/{overrideId}`

**æè¿°**: æ›´æ–°æŒ‡å®šçš„æ—¥æœŸè¦†ç›–è§„åˆ™

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `TimeSlotOverrideUpdateRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ
- **400**: 
- **404**: 

---

#### 8. åˆ é™¤æ—¶æ®µæ—¥æœŸè¦†ç›–

**ç«¯ç‚¹**: `DELETE /api/scenario-packages/{id}/time-slot-overrides/{overrideId}`

**æè¿°**: åˆ é™¤æŒ‡å®šçš„æ—¥æœŸè¦†ç›–è§„åˆ™

**æ¥æºè§„æ ¼**: `001-scenario-package-tabs` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `` |  | object | âŒ |  |
| `` |  | object | âŒ |  |

**å“åº”**:

- **204**: åˆ é™¤æˆåŠŸ
- **404**: 

---

### unit-conversions

#### 1. è·å–æ‰€æœ‰æ¢ç®—è§„åˆ™

**ç«¯ç‚¹**: `GET /unit-conversions`

**æè¿°**: è¿”å›æ‰€æœ‰é…ç½®çš„å•ä½æ¢ç®—è§„åˆ™åˆ—è¡¨

**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `category` | query | string | âŒ | æŒ‰ç±»åˆ«è¿‡æ»¤ (volume/weight/quantity) |
| `search` | query | string | âŒ | æœç´¢å…³é”®è¯ï¼ˆåŒ¹é… from_unit æˆ– to_unitï¼‰ |

**å“åº”**:

- **200**: æˆåŠŸè·å–æ¢ç®—è§„åˆ™åˆ—è¡¨
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

#### 2. åˆ›å»ºæ¢ç®—è§„åˆ™

**ç«¯ç‚¹**: `POST /unit-conversions`

**æè¿°**: åˆ›å»ºæ–°çš„å•ä½æ¢ç®—è§„åˆ™ã€‚
- éªŒè¯æºå•ä½å’Œç›®æ ‡å•ä½ä¸èƒ½ç›¸åŒ
- æ£€æµ‹å¾ªç¯ä¾èµ–
- éªŒè¯æ¢ç®—ç‡ä¸ºæ­£æ•°


**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateConversionRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: æ¢ç®—è§„åˆ™åˆ›å»ºæˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥
- **409**: æ¢ç®—è§„åˆ™å·²å­˜åœ¨æˆ–æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

#### 3. è·å–å•ä¸ªæ¢ç®—è§„åˆ™

**ç«¯ç‚¹**: `GET /unit-conversions/{id}`

**æè¿°**: æ ¹æ® ID è·å–æ¢ç®—è§„åˆ™è¯¦æƒ…

**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ¢ç®—è§„åˆ™ UUID |

**å“åº”**:

- **200**: æˆåŠŸè·å–æ¢ç®—è§„åˆ™
- **404**: æ¢ç®—è§„åˆ™ä¸å­˜åœ¨

---

#### 4. æ›´æ–°æ¢ç®—è§„åˆ™

**ç«¯ç‚¹**: `PUT /unit-conversions/{id}`

**æè¿°**: æ›´æ–°ç°æœ‰çš„å•ä½æ¢ç®—è§„åˆ™ã€‚
- é‡æ–°éªŒè¯å¾ªç¯ä¾èµ–
- éªŒè¯å”¯ä¸€æ€§çº¦æŸ


**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ¢ç®—è§„åˆ™ UUID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateConversionRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: æ¢ç®—è§„åˆ™æ›´æ–°æˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥
- **404**: æ¢ç®—è§„åˆ™ä¸å­˜åœ¨
- **409**: æ¢ç®—è§„åˆ™å†²çªæˆ–å¾ªç¯ä¾èµ–

---

#### 5. åˆ é™¤æ¢ç®—è§„åˆ™

**ç«¯ç‚¹**: `DELETE /unit-conversions/{id}`

**æè¿°**: åˆ é™¤æŒ‡å®šçš„æ¢ç®—è§„åˆ™ã€‚
- æ£€æŸ¥æ˜¯å¦è¢« BOM å¼•ç”¨
- å¦‚æœ‰å¼•ç”¨åˆ™é˜»æ­¢åˆ é™¤


**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | æ¢ç®—è§„åˆ™ UUID |

**å“åº”**:

- **204**: æ¢ç®—è§„åˆ™åˆ é™¤æˆåŠŸ
- **404**: æ¢ç®—è§„åˆ™ä¸å­˜åœ¨
- **409**: æ¢ç®—è§„åˆ™è¢« BOM å¼•ç”¨ï¼Œæ— æ³•åˆ é™¤

---

#### 6. è·å–æ¢ç®—è§„åˆ™ç»Ÿè®¡

**ç«¯ç‚¹**: `GET /unit-conversions/stats`

**æè¿°**: è¿”å›æŒ‰ç±»åˆ«åˆ†ç»„çš„æ¢ç®—è§„åˆ™æ•°é‡ç»Ÿè®¡

**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè·å–ç»Ÿè®¡ä¿¡æ¯

---

#### 7. éªŒè¯å¾ªç¯ä¾èµ–

**ç«¯ç‚¹**: `POST /unit-conversions/validate-cycle`

**æè¿°**: åœ¨ä¿å­˜å‰éªŒè¯æ–°è§„åˆ™æ˜¯å¦ä¼šäº§ç”Ÿå¾ªç¯ä¾èµ–ã€‚
è¿”å›å¾ªç¯è·¯å¾„ï¼ˆå¦‚æœ‰ï¼‰ã€‚


**æ¥æºè§„æ ¼**: `P002-unit-conversion` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `ValidateCycleRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: éªŒè¯é€šè¿‡ï¼Œæ— å¾ªç¯ä¾èµ–
- **409**: æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–

---

### äº§å“åˆ†ç±»

#### 1. è·å–äº§å“åˆ†ç±»åˆ—è¡¨

**ç«¯ç‚¹**: `GET /categories`

**æè¿°**: è·å–æ‰€æœ‰äº§å“åˆ†ç±»ï¼Œæ”¯æŒå±‚çº§ç»“æ„

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè·å–åˆ†ç±»åˆ—è¡¨

---

#### 2. åˆ›å»ºäº§å“åˆ†ç±»

**ç«¯ç‚¹**: `POST /categories`

**æè¿°**: åˆ›å»ºæ–°çš„äº§å“åˆ†ç±»

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateCategoryRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: åˆ†ç±»åˆ›å»ºæˆåŠŸ
- **422**: æ•°æ®éªŒè¯å¤±è´¥

---

### äº§å“ç®¡ç†

#### 1. è·å–äº§å“åˆ—è¡¨

**ç«¯ç‚¹**: `GET /products`

**æè¿°**: åˆ†é¡µè·å–äº§å“åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢å’Œç­›é€‰

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ•°é‡ |
| `keyword` | query | string | âŒ | æœç´¢å…³é”®è¯ |
| `category` | query | string | âŒ | äº§å“åˆ†ç±»ç­›é€‰ |
| `status` | query | string | âŒ | äº§å“çŠ¶æ€ç­›é€‰ |

**å“åº”**:

- **200**: æˆåŠŸè·å–äº§å“åˆ—è¡¨

---

#### 2. åˆ›å»ºæ–°äº§å“

**ç«¯ç‚¹**: `POST /products`

**æè¿°**: åˆ›å»ºæ–°çš„äº§å“è®°å½•

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `CreateProductRequest` (è§ OpenAPI spec)

**å“åº”**:

- **201**: äº§å“åˆ›å»ºæˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **422**: æ•°æ®éªŒè¯å¤±è´¥

---

#### 3. è·å–äº§å“è¯¦æƒ…

**ç«¯ç‚¹**: `GET /products/{productId}`

**æè¿°**: æ ¹æ®äº§å“IDè·å–äº§å“è¯¦ç»†ä¿¡æ¯

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `productId` | path | string | âœ… | äº§å“ID |

**å“åº”**:

- **200**: æˆåŠŸè·å–äº§å“è¯¦æƒ…
- **404**: äº§å“ä¸å­˜åœ¨

---

#### 4. æ›´æ–°äº§å“ä¿¡æ¯

**ç«¯ç‚¹**: `PUT /products/{productId}`

**æè¿°**: æ›´æ–°æŒ‡å®šäº§å“çš„ä¿¡æ¯

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `productId` | path | string | âœ… | äº§å“ID |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`
- Schema: `UpdateProductRequest` (è§ OpenAPI spec)

**å“åº”**:

- **200**: äº§å“æ›´æ–°æˆåŠŸ
- **404**: äº§å“ä¸å­˜åœ¨
- **422**: æ•°æ®éªŒè¯å¤±è´¥

---

#### 5. åˆ é™¤äº§å“

**ç«¯ç‚¹**: `DELETE /products/{productId}`

**æè¿°**: åˆ é™¤æŒ‡å®šçš„äº§å“è®°å½•

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `productId` | path | string | âœ… | äº§å“ID |

**å“åº”**:

- **204**: äº§å“åˆ é™¤æˆåŠŸ
- **404**: äº§å“ä¸å­˜åœ¨

---

#### 6. æ‰¹é‡åˆ é™¤äº§å“

**ç«¯ç‚¹**: `DELETE /products/batch-delete`

**æè¿°**: æ‰¹é‡åˆ é™¤å¤šä¸ªäº§å“è®°å½•

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **204**: æ‰¹é‡åˆ é™¤æˆåŠŸ
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯

---

### ä»ªè¡¨æ¿

#### 1. è·å–ä»ªè¡¨æ¿ç»Ÿè®¡æ•°æ®

**ç«¯ç‚¹**: `GET /dashboard/stats`

**æè¿°**: è·å–ä»ªè¡¨æ¿æ˜¾ç¤ºçš„å…³é”®ç»Ÿè®¡æ•°æ®

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè·å–ç»Ÿè®¡æ•°æ®

---

### åœºæ™¯åŒ…

#### 1. è·å–åœºæ™¯åŒ…åˆ—è¡¨

**ç«¯ç‚¹**: `GET /api/scenario-packages`

**æè¿°**: è·å–å·²å‘å¸ƒçŠ¶æ€çš„åœºæ™¯åŒ…åˆ—è¡¨æ‘˜è¦æ•°æ®ï¼Œç”¨äºå°ç¨‹åºé¦–é¡µå±•ç¤ºã€‚

ä¸šåŠ¡è§„åˆ™ï¼š
1. ä»…è¿”å› status = PUBLISHED çš„åœºæ™¯åŒ…ï¼ˆæœåŠ¡ç«¯è¿‡æ»¤ï¼‰
2. ä»…è¿”å›åˆ—è¡¨æ‘˜è¦å­—æ®µï¼ˆid, title, category, backgroundImageUrl, packagePrice, rating, tagsï¼‰
3. ä¸åŒ…å«å®Œæ•´çš„ pricingã€rulesã€benefitsã€itemsã€services ç­‰åµŒå¥—å¯¹è±¡
4. è½¯åˆ é™¤çš„åœºæ™¯åŒ…ï¼ˆdeleted_at IS NOT NULLï¼‰ä¸è¿”å›

æ€§èƒ½è¦æ±‚ï¼š
- å“åº”æ—¶é—´ < 2 ç§’ï¼ˆæ­£å¸¸ç½‘ç»œç¯å¢ƒï¼‰
- æ”¯æŒå®¢æˆ·ç«¯ç¼“å­˜ï¼ˆCache-Control: max-age=300ï¼Œå³ 5 åˆ†é’Ÿï¼‰

é”™è¯¯å¤„ç†ï¼š
- è¶…æ—¶æ—¶é—´ 10 ç§’
- æ•°æ®åº“æŸ¥è¯¢å¤±è´¥è¿”å› 500 é”™è¯¯
- æ•°æ®æ ¼å¼é”™è¯¯è¿”å› 500 é”™è¯¯


**æ¥æºè§„æ ¼**: `018-hall-reserve-homepage` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè·å–åœºæ™¯åŒ…åˆ—è¡¨
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### å¥—é¤ç®¡ç†

#### 1. è·å–å¥—é¤SKUçš„å­é¡¹é…ç½®

**ç«¯ç‚¹**: `GET /skus/{id}/combo-items`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… | å¥—é¤SKU ID |

**å“åº”**:

- **200**: æˆåŠŸ

---

#### 2. æ›´æ–°å¥—é¤SKUçš„å­é¡¹é…ç½®

**ç«¯ç‚¹**: `PUT /skus/{id}/combo-items`

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**è¯·æ±‚ä½“**:

- Content-Type: `application/json`

**å“åº”**:

- **200**: æ›´æ–°æˆåŠŸ

---

### å¯¼èˆª

#### 1. è·å–ç”¨æˆ·å¯¼èˆªèœå•

**ç«¯ç‚¹**: `GET /navigation/menu`

**æè¿°**: æ ¹æ®ç”¨æˆ·æƒé™è·å–å¯è®¿é—®çš„å¯¼èˆªèœå•

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè·å–å¯¼èˆªèœå•

---

### æˆæœ¬è®¡ç®—

#### 1. æ‰‹åŠ¨é‡æ–°è®¡ç®—æ ‡å‡†æˆæœ¬

**ç«¯ç‚¹**: `POST /skus/{id}/recalculate-cost`

**æè¿°**: å½“ç»„ä»¶æˆæœ¬å˜æ›´å,æ‰‹åŠ¨è§¦å‘æˆå“/å¥—é¤æˆæœ¬é‡æ–°è®¡ç®—

**æ¥æºè§„æ ¼**: `P001-sku-master-data` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `id` | path | string | âœ… |  |

**å“åº”**:

- **200**: è®¡ç®—æˆåŠŸ

---

### ç”¨æˆ·ç®¡ç†

#### 1. è·å–ç”¨æˆ·åˆ—è¡¨

**ç«¯ç‚¹**: `GET /users`

**æè¿°**: åˆ†é¡µè·å–ç”¨æˆ·åˆ—è¡¨

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å‚æ•°**:

| åç§° | ä½ç½® | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|-----|------|------|------|------|
| `page` | query | integer | âŒ | é¡µç  |
| `pageSize` | query | integer | âŒ | æ¯é¡µæ•°é‡ |
| `keyword` | query | string | âŒ | æœç´¢å…³é”®è¯ |
| `role` | query | string | âŒ | è§’è‰²ç­›é€‰ |

**å“åº”**:

- **200**: æˆåŠŸè·å–ç”¨æˆ·åˆ—è¡¨

---

### ç”¨æˆ·è§’è‰²

#### 1. è·å–ç”¨æˆ·è§’è‰²åˆ—è¡¨

**ç«¯ç‚¹**: `GET /roles`

**æè¿°**: è·å–æ‰€æœ‰ç”¨æˆ·è§’è‰²

**æ¥æºè§„æ ¼**: `001-ui-framework-upgrade` (openapi)

**å“åº”**:

- **200**: æˆåŠŸè·å–è§’è‰²åˆ—è¡¨

---


---

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

### OpenAPI è§„èŒƒï¼ˆ24 ä¸ªè§„æ ¼ï¼‰

- **001-scenario-package-tabs**: 21 ä¸ªç«¯ç‚¹
- **001-ui-framework-upgrade**: 12 ä¸ªç«¯ç‚¹
- **010-attribute-dict-management**: 21 ä¸ªç«¯ç‚¹
- **013-schedule-management**: 8 ä¸ªç«¯ç‚¹
- **014-hall-store-backend**: 8 ä¸ªç«¯ç‚¹
- **016-store-reservation-settings**: 3 ä¸ªç«¯ç‚¹
- **017-scenario-package**: 10 ä¸ªç«¯ç‚¹
- **018-hall-reserve-homepage**: 1 ä¸ªç«¯ç‚¹
- **019-store-association**: 4 ä¸ªç«¯ç‚¹
- **020-store-address**: 3 ä¸ªç«¯ç‚¹
- **022-store-crud**: 4 ä¸ªç«¯ç‚¹
- **O001-product-order-list**: 4 ä¸ªç«¯ç‚¹
- **O003-beverage-order**: 23 ä¸ªç«¯ç‚¹
- **O004-beverage-sku-reuse**: 10 ä¸ªç«¯ç‚¹
- **O005-channel-product-config**: 12 ä¸ªç«¯ç‚¹
- **O006-miniapp-channel-order**: 6 ä¸ªç«¯ç‚¹
- **P001-sku-master-data**: 11 ä¸ªç«¯ç‚¹
- **P002-unit-conversion**: 8 ä¸ªç«¯ç‚¹
- **P003-inventory-query**: 4 ä¸ªç«¯ç‚¹
- **P004-inventory-adjustment**: 9 ä¸ªç«¯ç‚¹
- **P005-bom-inventory-deduction**: 5 ä¸ªç«¯ç‚¹
- **P006-fix-sku-edit-data**: 2 ä¸ªç«¯ç‚¹
- **U001-reservation-order-management**: 11 ä¸ªç«¯ç‚¹
- **U004-order-list-view**: 4 ä¸ªç«¯ç‚¹

### Markdown è§„èŒƒï¼ˆ3 ä¸ªè§„æ ¼ï¼‰

- **001-skill-doc-generator**: 1 ä¸ªç«¯ç‚¹
- **T002-e2e-test-generator**: 1 ä¸ªç«¯ç‚¹
- **U003-wechat-miniapp-login**: 9 ä¸ªç«¯ç‚¹


---

## ğŸ“ é™„å½•

### æ‰€æœ‰å¤„ç†çš„è§„æ ¼æ–‡ä»¶

- ğŸ“˜ OpenAPI `001-scenario-package-tabs`
- ğŸ“„ Markdown `001-skill-doc-generator`
- ğŸ“˜ OpenAPI `001-ui-framework-upgrade`
- ğŸ“˜ OpenAPI `010-attribute-dict-management`
- ğŸ“˜ OpenAPI `013-schedule-management`
- ğŸ“˜ OpenAPI `014-hall-store-backend`
- ğŸ“˜ OpenAPI `016-store-reservation-settings`
- ğŸ“˜ OpenAPI `017-scenario-package`
- ğŸ“˜ OpenAPI `018-hall-reserve-homepage`
- ğŸ“˜ OpenAPI `019-store-association`
- ğŸ“˜ OpenAPI `020-store-address`
- ğŸ“˜ OpenAPI `022-store-crud`
- ğŸ“˜ OpenAPI `O001-product-order-list`
- ğŸ“˜ OpenAPI `O003-beverage-order`
- ğŸ“˜ OpenAPI `O004-beverage-sku-reuse`
- ğŸ“˜ OpenAPI `O005-channel-product-config`
- ğŸ“˜ OpenAPI `O006-miniapp-channel-order`
- ğŸ“˜ OpenAPI `P001-sku-master-data`
- ğŸ“˜ OpenAPI `P002-unit-conversion`
- ğŸ“˜ OpenAPI `P003-inventory-query`
- ğŸ“˜ OpenAPI `P004-inventory-adjustment`
- ğŸ“˜ OpenAPI `P005-bom-inventory-deduction`
- ğŸ“˜ OpenAPI `P006-fix-sku-edit-data`
- ğŸ“„ Markdown `T002-e2e-test-generator`
- ğŸ“˜ OpenAPI `U001-reservation-order-management`
- ğŸ“„ Markdown `U003-wechat-miniapp-login`
- ğŸ“˜ OpenAPI `U004-order-list-view`


---

**ç”Ÿæˆè¯´æ˜**:
- æœ¬æ–‡æ¡£ç”± `generate_unified_api_docs.py` è‡ªåŠ¨ç”Ÿæˆ
- ä¼˜å…ˆè§£æ `contracts/api.yaml` (OpenAPI 3.0)ï¼Œå…¶æ¬¡è§£æ Markdown æ–‡æ¡£
- æ‰€æœ‰ API å“åº”æ ¼å¼éµå¾ªé¡¹ç›® API æ ‡å‡†ï¼ˆ`.claude/rules/08-api-standards.md`ï¼‰
- æ ‡è®°ä¸º `TODO: å¾…å®šä¹‰` çš„ç«¯ç‚¹éœ€è¦åœ¨è§„æ ¼æ–‡æ¡£ä¸­è¡¥å……è¯¦ç»†ä¿¡æ¯

**ä¸‹æ¬¡æ›´æ–°**: å½“æ–°å¢æˆ–ä¿®æ”¹ API è§„æ ¼åï¼Œè¿è¡Œ:
```bash
python scripts/generate_unified_api_docs.py
```
