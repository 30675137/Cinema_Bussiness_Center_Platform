# 商品订单列表查看与管理 - 用户操作手册

<!-- DOC-WRITER: AUTO-GENERATED START -->
**文档版本**: 1.0.0
**功能标识**: O001-product-order-list
**创建日期**: 2025-12-27
**适用对象**: 运营人员、客服人员、运营主管
**系统**: 影院商品管理中台 - B端管理后台
**状态**: 已发布

---

## 文档变更历史

| 版本 | 日期 | 变更说明 |
|------|------|----------|
| 1.0.0 | 2025-12-27 | 初始版本 - 订单管理完整操作指南 |

---

## 1. 功能概述

### 1.1 功能简介

商品订单管理功能帮助您高效查看、筛选和管理影院商品订单,包括:
- 📋 查看所有商品订单列表
- 🔍 多维度筛选订单(状态、时间、用户)
- 📊 查看订单完整详情
- ⚙️ 更新订单状态(发货、完成、取消)
- 📥 导出订单数据

### 1.2 适用角色

| 角色 | 权限说明 |
|------|---------|
| 运营人员 | 查看订单、筛选订单、更新订单状态、导出数据 |
| 客服人员 | 查看订单、筛选订单 |
| 运营主管 | 所有权限 + 数据统计分析 |

### 1.3 访问入口

**登录地址**: `http://your-domain.com/login`

**功能路径**:
1. 登录系统
2. 点击左侧菜单: **订单管理** → **订单列表**
3. 进入订单列表页面 (`/orders/list`)

---

## 2. 订单列表查看

### 2.1 访问订单列表

#### 操作步骤

1. 登录系统后,点击左侧菜单 **订单管理** → **订单列表**
2. 系统自动加载订单列表(默认显示近 30 天订单)
3. 订单按创建时间倒序排列,最新订单在最前面

#### 界面说明

订单列表页包含以下信息:

| 列名 | 说明 | 示例 |
|------|------|------|
| 订单号 | 唯一订单标识,可点击查看详情 | ORD20251227AB12CD |
| 用户 | 用户名(手机号) | 张三(138****8000) |
| 商品 | 商品摘要(前2个商品+总数) | 爆米花×2, 可乐×1 等2件商品 |
| 金额 | 实付金额 | ¥155.00 |
| 状态 | 订单当前状态 | 已支付 |
| 创建时间 | 订单创建时间 | 2025-12-27 10:30:00 |
| 操作 | 快捷操作按钮 | 查看详情 |

**订单状态说明**:

| 状态 | 说明 | 显示颜色 |
|------|------|---------|
| 待支付 | 订单已创建,等待用户支付 | 橙色 |
| 已支付 | 用户已完成支付,等待发货 | 蓝色 |
| 已发货 | 订单已发货,等待用户确认收货 | 青色 |
| 已完成 | 订单已完成,交易结束 | 绿色 |
| 已取消 | 订单已取消 | 灰色 |

### 2.2 翻页查看更多订单

#### 操作步骤

1. 订单列表底部显示分页控件
2. 点击页码切换到指定页
3. 或使用 **上一页** / **下一页** 按钮翻页

**提示**: 每页默认显示 20 条订单,翻页响应时间通常 < 2 秒。

---

## 3. 订单筛选

### 3.1 按订单状态筛选

#### 操作步骤

1. 在订单列表页顶部,找到筛选器区域
2. 点击 **订单状态** 下拉框
3. 选择目标状态(待支付 / 已支付 / 已发货 / 已完成 / 已取消)
4. 点击 **查询** 按钮
5. 列表自动刷新,只显示符合条件的订单

#### 使用场景

- 查看所有"已支付"订单,准备发货
- 查看所有"已完成"订单,统计业绩
- 查看所有"已取消"订单,分析取消原因

### 3.2 按时间范围筛选

#### 操作步骤

1. 在筛选器区域,找到 **时间范围** 选择器
2. 点击 **起始日期** 选择器,选择开始日期
3. 点击 **结束日期** 选择器,选择结束日期
4. 点击 **查询** 按钮
5. 列表显示指定时间范围内创建的订单

**提示**: 默认显示近 30 天订单。如需查看更早的订单,请调整时间范围。

#### 使用场景

- 查看昨天的所有订单
- 查看本周的订单统计
- 查看某个促销活动期间的订单

### 3.3 按用户搜索

#### 操作步骤

1. 在筛选器区域,找到 **用户搜索** 输入框
2. 输入用户名或手机号(如"张三"或"13800138000")
3. 点击 **查询** 按钮
4. 列表显示该用户的所有订单

#### 使用场景

- 客服查询某用户的订单信息
- 处理用户投诉时快速定位订单
- 核实用户的购买历史

### 3.4 组合筛选

#### 操作步骤

1. 同时设置多个筛选条件,如:
   - 订单状态: 已支付
   - 时间范围: 2025-12-26 至 2025-12-27
   - 用户搜索: 13800138000
2. 点击 **查询** 按钮
3. 列表显示同时满足所有条件的订单

**提示**: 多个筛选条件是"与"关系,订单必须同时满足所有条件才会显示。

### 3.5 重置筛选

#### 操作步骤

1. 点击筛选器区域的 **重置** 按钮
2. 所有筛选条件自动清空
3. 列表恢复显示默认订单(近 30 天全部订单)

---

## 4. 订单详情查看

### 4.1 进入订单详情页

#### 操作步骤

**方式一**: 从订单列表进入
1. 在订单列表中找到目标订单
2. 点击订单号(如 `ORD20251227AB12CD`)
3. 跳转到订单详情页

**方式二**: 直接访问(如果知道订单ID)
1. 访问 `/orders/{订单ID}` 路径

### 4.2 查看订单基本信息

订单详情页顶部显示订单基本信息:

| 信息项 | 说明 |
|--------|------|
| 订单号 | 唯一订单标识 |
| 创建时间 | 订单创建时间 |
| 订单状态 | 当前状态(带颜色标签) |
| 操作按钮 | 根据状态显示可用操作 |

### 4.3 查看用户信息

用户信息区域显示:

| 信息项 | 说明 | 示例 |
|--------|------|------|
| 用户名 | 下单用户姓名 | 张三 |
| 手机号 | 联系电话(已脱敏) | 138****8000 |
| 收货地址 | 完整收货地址 | 广东省广州市天河区xxx路123号 |

**注意**: 手机号默认脱敏显示中间 4 位,保护用户隐私。

### 4.4 查看商品列表

商品列表显示订单中的所有商品:

| 列名 | 说明 |
|------|------|
| 商品名称 | 商品完整名称 |
| 规格 | 商品规格(如"500ml"、"大杯") |
| 数量 | 购买数量 |
| 单价 | 商品单价 |
| 小计 | 该商品总价(数量×单价) |

商品列表下方显示金额汇总:
- 商品总额: 所有商品小计之和
- 运费: 配送费用
- 优惠金额: 优惠券或活动优惠
- 实付金额: 最终支付金额(商品总额+运费-优惠)

### 4.5 查看支付信息

如果订单已支付,显示支付信息:

| 信息项 | 说明 |
|--------|------|
| 支付方式 | 微信支付 / 支付宝 / 其他 |
| 支付金额 | 实际支付金额 |
| 支付时间 | 支付完成时间 |

### 4.6 查看物流信息

如果订单已发货,显示物流信息:

| 信息项 | 说明 |
|--------|------|
| 发货时间 | 订单发货时间 |
| 完成时间 | 订单完成时间(如已完成) |

**注意**: 当前版本不包含物流实时跟踪功能,仅显示发货和完成时间。

### 4.7 查看订单日志

订单日志记录所有状态变更历史:

| 列名 | 说明 |
|------|------|
| 操作时间 | 状态变更时间 |
| 操作类型 | 创建订单/支付/发货/完成/取消 |
| 操作人 | 执行操作的用户 |
| 状态变更 | 变更前状态 → 变更后状态 |
| 备注 | 操作备注(如取消原因) |

日志按时间倒序排列,最新日志在最前面。

---

## 5. 订单状态管理

### 5.1 标记订单发货

#### 前置条件

- 订单状态必须为 **已支付**
- 您有订单管理权限

#### 操作步骤

1. 打开订单详情页
2. 确认订单状态为"已支付"
3. 点击 **标记发货** 按钮
4. 系统弹出确认对话框
5. 点击 **确认** 按钮
6. 系统更新订单状态为"已发货"
7. 页面显示成功提示: "订单状态更新成功"
8. 发货时间自动记录
9. 订单日志新增一条"发货"记录

#### 注意事项

- ⚠️ 标记发货后无法撤销,请确认商品已实际发出
- ⚠️ 发货时间将自动记录为当前时间
- ⚠️ 如发现误操作,请联系技术人员处理

### 5.2 标记订单完成

#### 前置条件

- 订单状态必须为 **已发货**
- 您有订单管理权限

#### 操作步骤

1. 打开订单详情页
2. 确认订单状态为"已发货"
3. 点击 **标记完成** 按钮
4. 系统弹出确认对话框
5. 点击 **确认** 按钮
6. 系统更新订单状态为"已完成"
7. 页面显示成功提示: "订单状态更新成功"
8. 完成时间自动记录
9. 订单日志新增一条"完成"记录

#### 注意事项

- ⚠️ 订单一旦标记为"已完成",状态将无法再变更
- ⚠️ 请确认用户已确认收货后再标记完成
- ⚠️ 完成时间将自动记录为当前时间

### 5.3 取消订单

#### 前置条件

- 订单状态必须为 **待支付** 或 **已支付**
- 您有订单管理权限

**注意**: 订单状态为"已发货"或"已完成"时不允许取消。

#### 操作步骤

1. 打开订单详情页
2. 确认订单状态为"待支付"或"已支付"
3. 点击 **取消订单** 按钮
4. 系统弹出取消原因输入对话框
5. 在输入框中填写取消原因(必填),如:
   - "用户要求取消"
   - "商品缺货无法发货"
   - "地址无法送达"
6. 点击 **确认** 按钮
7. 系统更新订单状态为"已取消"
8. 页面显示成功提示: "订单状态更新成功"
9. 取消时间和取消原因自动记录
10. 订单日志新增一条"取消"记录

#### 注意事项

- ⚠️ 取消订单必须填写取消原因,便于后续追溯
- ⚠️ 取消原因将永久记录在订单中
- ⚠️ 如订单已支付,取消后需人工处理退款(当前版本)

### 5.4 错误提示处理

#### 错误 1: 订单已被其他人修改

**提示信息**: "订单已被其他人修改,请刷新后重试"

**原因**: 其他用户同时操作了这个订单(乐观锁冲突)

**解决方法**:
1. 点击页面刷新按钮或按 F5 刷新页面
2. 查看订单最新状态
3. 确认最新状态后重新操作

#### 错误 2: 无效的状态转换

**提示信息**: "无法执行此操作: 已完成订单不允许取消"

**原因**: 尝试进行不允许的状态转换

**解决方法**:
1. 检查订单当前状态
2. 确认是否符合操作条件
3. 如有疑问,请查看本手册第 5.5 节"状态转换规则"

#### 错误 3: 取消原因缺失

**提示信息**: "取消订单必须提供取消原因"

**原因**: 取消订单时未填写取消原因

**解决方法**:
1. 在弹出对话框中填写取消原因
2. 确保取消原因不为空
3. 重新提交

### 5.5 状态转换规则

**允许的状态转换**:

```
待支付 ──────→ 已取消
   │
   ↓
 已支付 ──────→ 已发货 ──────→ 已完成
   │
   ↓
 已取消
```

**详细规则**:

| 当前状态 | 可转换到 | 不可转换到 |
|---------|---------|-----------|
| 待支付 | 已支付(用户支付), 已取消 | 已发货, 已完成 |
| 已支付 | 已发货, 已取消 | 已完成 |
| 已发货 | 已完成 | 已取消, 待支付, 已支付 |
| 已完成 | - (终态) | 任何状态 |
| 已取消 | - (终态) | 任何状态 |

---

## 6. 订单数据导出(未来版本)

**注意**: 当前版本(v1.0.0)暂不支持订单导出功能,该功能将在 v1.1.0 版本中提供。

### 6.1 导出订单列表(预览)

#### 操作步骤(未来版本)

1. 在订单列表页应用筛选条件(可选)
2. 点击 **导出** 按钮
3. 选择导出格式:
   - Excel(.xlsx) - 推荐,包含格式和样式
   - CSV(.csv) - 纯文本格式,通用性好
4. 点击 **确认导出** 按钮
5. 系统生成文件(可能需要等待 10-30 秒)
6. 下载完成后,在浏览器下载目录找到文件

#### 注意事项(未来版本)

- 单次导出限制为 10000 条记录
- 导出内容与当前筛选条件一致
- 导出文件包含所有订单字段(包括完整手机号)
- 大量数据导出可能需要等待 30 秒左右

---

## 7. 常见问题 (FAQ)

### Q1: 为什么订单列表默认只显示近 30 天的订单?

**A**: 为了提升加载性能,避免一次性加载过多数据导致页面卡顿。如果您需要查看更早的订单,可以使用时间筛选功能,调整时间范围。

---

### Q2: 手机号为什么显示为 `138****8000` 这种格式?

**A**: 这是出于用户隐私保护的考虑。手机号属于敏感信息,系统默认对中间 4 位进行脱敏处理。如果您需要查看完整手机号,请联系系统管理员申请权限(未来版本将支持)。

---

### Q3: 为什么无法取消"已发货"或"已完成"的订单?

**A**: 这是基于业务规则的限制:
- **已发货订单**: 商品已经离开仓库,无法简单取消。如需处理,请联系物流或用户协商退货。
- **已完成订单**: 订单交易已结束,状态无法再变更。如需处理售后问题,请使用退款/售后功能(未来版本将支持)。

---

### Q4: 如果多个人同时操作同一订单会发生什么?

**A**: 系统使用乐观锁机制防止并发冲突。如果两个人同时操作同一订单,第二个人提交时会收到提示"订单已被其他人修改,请刷新后重试"。这时您需要:
1. 刷新页面查看最新订单状态
2. 确认最新状态后重新操作

这样可以确保不会覆盖其他人的操作,保证数据一致性。

---

### Q5: 订单列表和详情页的数据多久刷新一次?

**A**: 系统使用智能缓存机制:
- **订单列表**: 数据缓存 30 秒,30 秒内重复访问使用缓存数据,提升性能
- **订单详情**: 数据缓存 1 分钟
- **状态更新后**: 自动刷新缓存,确保数据一致性

如果您需要查看最新数据,可以刷新页面(F5)或点击刷新按钮。

---

### Q6: 订单号 `ORD20251227AB12CD` 是什么含义?

**A**: 订单号由以下部分组成:
- `ORD`: 固定前缀,表示"订单"(Order)
- `20251227`: 创建日期(YYYY-MM-DD 格式)
- `AB12CD`: 6 位随机字母数字,确保唯一性

通过订单号,您可以快速识别订单创建日期,便于查找和管理。

---

### Q7: 如何快速查找某个用户的所有订单?

**A**: 使用用户搜索功能:
1. 在筛选器区域找到"用户搜索"输入框
2. 输入用户名(如"张三")或手机号(如"13800138000")
3. 点击"查询"按钮
4. 列表将只显示该用户的所有订单

**提示**: 手机号搜索支持脱敏格式(如"138****8000")和完整手机号。

---

### Q8: 订单详情页显示"订单不存在"是什么原因?

**A**: 可能的原因:
1. 订单ID输入错误,请检查订单ID是否正确
2. 订单已被删除(系统管理员操作)
3. 您没有查看该订单的权限

**解决方法**: 请返回订单列表,通过筛选功能重新查找订单,或联系系统管理员确认。

---

### Q9: 如何统计某个时间段的订单数量和金额?

**A**: 当前版本(v1.0.0)暂不支持订单统计功能,您可以:
1. 使用时间筛选功能查看指定时间段的订单
2. 导出订单数据(未来版本),使用 Excel 进行统计
3. 联系技术人员获取统计报表

未来版本将提供订单统计和数据分析功能。

---

### Q10: 如何批量处理订单(如批量发货)?

**A**: 当前版本(v1.0.0)暂不支持批量操作功能,需要逐个订单进行操作。批量操作功能将在 v1.1.0 版本中提供,敬请期待。

---

## 8. 快捷操作指南

### 8.1 常用操作清单

| 操作 | 快捷方式 | 说明 |
|------|---------|------|
| 刷新页面 | F5 | 获取最新数据 |
| 搜索订单 | Ctrl + F | 浏览器内页面搜索 |
| 返回上一页 | Alt + ← | 浏览器返回 |
| 打开新标签页 | Ctrl + 点击订单号 | 在新标签页打开订单详情 |

### 8.2 键盘导航(可访问性)

本系统支持键盘导航,提升操作效率:

| 按键 | 功能 |
|------|------|
| Tab | 切换到下一个可操作元素 |
| Shift + Tab | 切换到上一个可操作元素 |
| Enter | 确认/提交 |
| Esc | 关闭对话框 |

---

## 9. 注意事项与最佳实践

### 9.1 操作注意事项

- ⚠️ **慎重操作**: 订单状态一旦变更为"已完成",将无法再修改,请谨慎操作
- ⚠️ **填写原因**: 取消订单时必须填写详细的取消原因,便于后续追溯和分析
- ⚠️ **并发冲突**: 如遇到"订单已被其他人修改"提示,请刷新页面后重试
- ⚠️ **数据导出**: 导出订单前请先应用筛选条件,避免导出无关数据

### 9.2 性能建议

- 💡 **使用筛选**: 建议使用筛选功能缩小订单范围,避免加载过多数据
- 💡 **分段查询**: 查询历史订单时,建议按时间范围逐段查询,提升响应速度
- 💡 **避免频繁刷新**: 系统有智能缓存,不需要频繁手动刷新页面

### 9.3 数据保护建议

- 📌 **手机号保护**: 手机号默认脱敏显示,请勿截图外传
- 📌 **订单信息保密**: 订单详情包含用户隐私信息,请妥善保管
- 📌 **操作日志**: 所有订单状态变更操作都会记录日志,包括操作人和操作时间,请规范操作

---

## 10. 故障排查

### 10.1 页面加载缓慢

**症状**: 订单列表或详情页加载时间超过 5 秒

**可能原因**:
1. 网络连接不稳定
2. 订单数据量过大
3. 服务器负载过高

**解决方法**:
1. 检查网络连接,尝试切换网络
2. 使用筛选功能缩小数据范围
3. 联系技术人员检查服务器状态

### 10.2 操作无响应

**症状**: 点击按钮后无任何反应

**可能原因**:
1. JavaScript 执行错误
2. 网络请求超时
3. 浏览器兼容性问题

**解决方法**:
1. 刷新页面(F5)重试
2. 清除浏览器缓存
3. 使用推荐浏览器(Chrome, Firefox, Safari, Edge)
4. 联系技术人员排查

### 10.3 数据显示异常

**症状**: 订单信息显示不完整或错误

**可能原因**:
1. 数据缓存未刷新
2. 数据库数据异常
3. API 接口错误

**解决方法**:
1. 刷新页面(F5)重新加载数据
2. 清除浏览器缓存后重试
3. 联系技术人员检查数据库

---

## 11. 技术支持

### 11.1 联系方式

如遇到本手册未涵盖的问题,请通过以下方式联系技术支持:

- **技术支持邮箱**: support@cinema-platform.com
- **技术支持电话**: 400-xxx-xxxx(工作日 9:00-18:00)
- **在线客服**: 系统右下角在线客服图标

### 11.2 反馈建议

如果您有任何功能改进建议或发现系统问题,欢迎通过以下方式反馈:

- **功能建议**: feedback@cinema-platform.com
- **问题反馈**: issues@cinema-platform.com

---

## 12. 版本更新计划

| 版本 | 预计发布时间 | 主要功能 |
|------|------------|---------|
| v1.1.0 | 2026-01-15 | 批量操作(批量发货、批量导出) |
| v1.2.0 | 2026-02-01 | 订单备注功能 |
| v1.3.0 | 2026-03-01 | 订单退款/售后流程 |
| v2.0.0 | 2026-04-01 | 物流跟踪集成,实时查看物流信息 |

---

## 13. 附录

### 13.1 术语表

| 术语 | 说明 |
|------|------|
| 商品订单 | 用户购买商品的订单,与预约订单(U/RSV模块)不同 |
| 订单号 | 订单的唯一标识,格式: ORD + 日期 + 随机字符 |
| 乐观锁 | 并发控制机制,防止多人同时修改同一订单 |
| 脱敏 | 隐藏敏感信息(如手机号中间4位),保护用户隐私 |
| 状态机 | 订单状态转换规则,确保状态流转合法 |

### 13.2 相关文档

- [产品文档](/docs/product/order-management/O001-product-order-list.md)
- [技术设计文档 (TDD)](/docs/tdd/O001-product-order-list.md)
- [API 设计文档](/docs/api/O001-product-order-list.md)
- [数据库设计文档](/docs/database/O001-product-order-list.md)
- [功能规格说明](/specs/O001-product-order-list/spec.md)

---

<!-- DOC-WRITER: AUTO-GENERATED END -->

**文档生成信息**:
- 生成工具: doc-writer skill v2.1.0
- 生成时间: 2025-12-27
- 数据来源: spec.md, plan.md, tasks.md
- 适用版本: v1.0.0
