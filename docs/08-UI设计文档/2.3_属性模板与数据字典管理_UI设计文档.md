### 2.3 属性模板与数据字典管理 · UI 设计文档（Draft）

> 目标：统一管理商品的基础字典（容量、口味、包装等）与类目属性模板，为 SPU / SKU 提供标准化字段和选项。  
> 读者：前端工程师 / UI 设计师 / 产品。

---

#### 2.3.1 模块范围与入口

本模块包含两类配置能力：

1. **数据字典管理**：  
   - 管理「容量单位、口味、包装形式、系列标签」等全局字典。
2. **类目属性模板管理**（如未单独建模块，可视为“类目管理”的扩展页）：  
   - 按类目配置“该类目需要填写哪些属性”。

菜单建议：

- 一级：**系统设置**
- 二级：**商品基础**
  - 子菜单1：类目管理（已设计）
  - 子菜单2：品牌管理
  - 子菜单3：**数据字典管理**
  - 子菜单4：**类目属性模板**（可选：也可以内嵌在类目管理右侧）

---

#### 2.3.2 数据字典管理页面（/settings/dicts）

**路由**：`/settings/dicts`

布局结构：上方字典类型 Tab + 下方字典项表格。

```text
┌──────────────────────────────┐
│ 字典类型 Tabs                │ 例：容量单位 | 口味 | 包装形式 | 系列标签 │
├──────────────────────────────┤
│ 顶部筛选 & 新增按钮          │
├──────────────────────────────┤
│ 当前字典项表格               │
├──────────────────────────────┤
│ 分页（如有需要）             │
└──────────────────────────────┘
```

**字典类型 Tab 示例：**

- 容量单位（如：ml、L、g、kg…）
- 口味（如：原味、黄油味、焦糖味…）
- 包装形式（如：瓶装、听装、袋装、桶装…）
- 系列标签（如：无糖、低糖、高端、儿童…）

---

##### 2.3.2.1 顶部操作区

- 当前字典类型名称展示（如“容量单位字典”）
- 「新增字典项」按钮
- 搜索框（按字典项名称/编码模糊搜索）

---

##### 2.3.2.2 字典项表格

字段建议：

1. 字典项名称（如：500ml / 1L / 原味 / 黄油味）
2. 字典项编码（内部使用）
3. 显示顺序
4. 是否启用（是 / 否）
5. 备注说明
6. 操作（编辑 / 停用 / 启用）

交互：

- 支持拖动排序（可选），或通过顺序数字控制展示顺序；
- 支持按名称搜索。

状态规则：

- 启用：可在前端 SPU/SKU 表单的下拉列表中选择；
- 停用：从下拉选择中隐藏，但历史数据保留。

---

##### 2.3.2.3 新增 / 编辑字典项弹窗

字段：

- 字典类型（只读，根据当前 Tab 决定）
- 名称（必填）
- 编码（可选或只读）
- 显示顺序（可选，数字）
- 是否启用（Switch，默认启用）
- 备注说明

校验：

- 名称必填；
- 同一字典类型下，名称不允许完全重复（后端校验错误要在字段下提示）。

---

#### 2.3.3 类目属性模板管理页面（/settings/category-attributes）

> 如果你已经在“类目管理”右侧做了属性模板配置，这里可以是一个更集中、跨类目的总览视图。

**路由**：`/settings/category-attributes`

布局结构：类目选择器 + 属性列表。

```text
┌──────────────────────────────┐
│ 类目选择器（Cascader / TreeSelect） │
├──────────────────────────────┤
│ 顶部操作栏：新增属性 / 复制其他类目模板 │
├──────────────────────────────┤
│ 属性模板表格（当前类目）     │
└──────────────────────────────┘
```

---

##### 2.3.3.1 类目选择器

- 使用 `Cascader` 或 `TreeSelect` 展示三级类目结构；
- 选择一个具体类目后，下方加载该类目的属性模板列表。

---

##### 2.3.3.2 属性模板表格

字段建议：

1. 属性名称（例：容量、口味、桶型、包装形式…）
2. 属性类型
   - 文本 / 数字 / 单选 / 多选 / 日期 / 布尔 等
3. 是否必填（是 / 否）
4. 来源字典（可选）
   - 如：容量单位、口味、包装形式（从数据字典模块选择）
5. 显示顺序
6. 适用层级说明（如：SPU 层、SKU 层；可选）
7. 操作（编辑 / 删除）

交互：

- 「新增属性」：弹窗或 Drawer；
- 「复制模板」：支持从其他类目复制一整套属性配置到当前类目。

---

##### 2.3.3.3 新增 / 编辑属性模板弹窗

字段：

- 所属类目（只读，当前选中的类目）
- 属性名称（必填）
- 属性类型（Select：文本 / 数字 / 单选 / 多选 / 布尔 / 日期…）
- 是否必填（Switch）
- 来源字典（Select；当类型为单选/多选时可选，来自“数据字典管理”）
- 自定义可选值（当未绑定字典而又是枚举类时，可本地配置）
- 显示顺序（数字）
- 适用层级（多选：SPU / SKU）

校验：

- 属性名称必填；
- 在同一类目下，属性名称不能完全重复；
- 当属性类型为单选/多选时，必须选择来源字典或配置自定义可选值。

删除规则（前端提示）：

- 若该属性已被 SPU / SKU 使用，前端给出风险提示，并可在一期直接禁止删除：
  > “该属性已在商品中使用，为保证数据一致性，不支持直接删除。如需调整，请联系主数据管理员。”

---

#### 2.3.4 与 SPU / SKU 界面的联动（UI 约定）

在 SPU / SKU 新建或编辑页面：

- 当选择（或切换）类目时：
  - UI 自动加载该类目的属性模板列表；
  - 为每个属性生成对应的输入控件：
    - 文本属性 → Input
    - 数字属性 → InputNumber
    - 单选 / 多选属性 → Select / CheckboxGroup（选项来自「来源字典」或自定义可选值）
  - 必填属性在标签旁显示“*”，并在提交时强校验。

- 对于绑定了“数据字典”的属性（如口味、包装形式）：
  - 下拉选项与“数据字典管理”实时保持一致；
  - 停用的字典项：
    - 不能再被新选择；
    - 但如果某 SPU / SKU 已使用，界面需能显示已选值（只读标记或灰色选项）。

---

#### 2.3.5 状态与权限控制

- 只有“主数据管理员 / 商品管理员”可以：
  - 新建 / 编辑 / 停用字典项；
  - 新建 / 编辑类目属性模板。
- 普通运营：
  - 仅在 SPU / SKU 页面使用这些配置后的字段；
  - 一般不直接进入字典管理界面。

---

#### 2.3.6 设计风格补充

- 保持与“类目管理 / 品牌管理 / SPU / SKU 管理”同一视觉体系；
- 字典类型 Tabs 使用明显的选中态，方便快速切换；
- 属性与字典项较多时，注意表格的可滚动性和列宽控制；
- 对高级操作（删除、停用）一律使用二次确认弹窗，并在文案中强调对已有 SPU / SKU 的潜在影响。

---

> 说明：  
> 本文档用于指导「属性模板与数据字典管理」相关页面设计，为 SPU / SKU 的结构化录入提供前置能力。
