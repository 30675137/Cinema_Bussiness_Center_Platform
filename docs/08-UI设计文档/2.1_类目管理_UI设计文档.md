### 2.1 类目管理 · UI 设计文档（Draft）

> 目标：支撑「一级/二级/三级类目」的配置与维护，作为 SPU 前置主数据。  
> 读者：前端工程师 / UI 设计师 / 产品。

---

#### 2.1.1 页面入口与布局

- 菜单路径：**系统设置 → 商品基础 → 类目管理**
- 路由建议：`/settings/categories`
- 布局风格：左右分栏

**左侧：类目树（Tree）**  
**右侧：类目详情 + 属性模板配置**

大致分区：

```text
┌──────────────────────────────┐
│ 筛选 / 新增按钮              │
├───────────┬─────────────────┤
│ 类目树    │ 右侧详情区域     │
│           │  - 基本信息     │
│           │  - 属性模板配置 │
└───────────┴─────────────────┘
```

---

#### 2.1.2 左侧类目树（Tree）

**展示内容：**

- 三级结构：
  - 一级类目（如：饮料、爆米花、酒水、零食…）
  - 二级类目（如：碳酸饮料 / 果汁饮料）
  - 三级类目（如：苏打水、功能饮料）

**交互：**

- 点击任意节点，右侧展示该类目的详情。
- 支持展开/收起节点。
- 顶部搜索框（可选）：
  - 支持按类目名称搜索并自动展开路径。

**节点操作（悬浮/右键菜单）：**

- 「新增子类目」
- 「编辑」
- 「删除」（有约束时禁用，见下）

删除规则（前端提示）：

- 若类目已被 SPU 使用：**禁止删除**，按钮置灰 + Tooltip：  
  > “该类目已有 SPU 使用，不可删除。”

---

#### 2.1.3 右侧：类目基本信息

**区域一：基本信息表单（只读 + 编辑状态切换）**

字段：

- 类目名称（必填）
- 类目等级（只读：一级/二级/三级）
- 上级类目（只读/不可选，展示路径：饮料 / 碳酸饮料）
- 类目编码（只读或系统生成）
- 排序序号（用于展示顺序）
- 状态（启用 / 停用）

**操作按钮：**

- 「编辑」 / 「保存」 / 「取消」
- 状态切换按钮：启用 / 停用（视权限）

前端校验：

- 类目名称不能为空；
- 排序序号为数字（可选）；
- 停用前弹出确认：  
  > “停用后，新增 SPU 时将无法选择该类目，已有 SPU 不受影响。”

---

#### 2.1.4 右侧：属性模板配置区

> 对应你的配置要求：“每个类目可以配置专属的属性模板”。

**展示形式：**

- 标题：`属性模板配置`
- 下方为属性列表表格 + 新增/编辑控件。

表格字段示例：

- 属性名称（如：容量、口味、包装形式）
- 属性类型（单选/多选/文本/数字）
- 是否必填（是/否）
- 可选值（对枚举类属性，展示逗号分隔的选项）
- 排序
- 操作（编辑 / 删除）

**操作：**

- 「新增属性」按钮：
  - 弹出小弹窗/抽屉：
    - 属性名称（必填）
    - 属性类型（Select：文本 / 数字 / 单选 / 多选）
    - 是否必填（Switch）
    - 可选值（当类型为单选/多选时，支持多行输入或 Tag 输入）
- 编辑属性：
  - 点击行内「编辑」，打开同样的弹窗并带入原数据。
- 删除属性：
  - 允许删除未被 SPU 使用的属性；
  - 若已有 SPU 使用该模板，前端弹出提示：  
    > “该属性已被 SPU 使用，删除将影响已有 SPU，请通过运维流程处理。”  
    （一期也可以直接禁止删除）

**联动说明（UI 提示即可）：**

- 在 SPU 新建页，当选择某个三级类目时，应提示：  
  > “该类目已配置属性：容量、口味、包装形式，请按模板填写。”

---

#### 2.1.5 新建类目弹窗

**入口：**

- 顶部「新增一级类目」
- 或树节点「新增子类目」

**弹窗字段：**

- 上级类目（只读，新增一级类目时为空）
- 类目名称（必填）
- 类目等级（根据上级自动判定，前端只展示不编辑）
- 类目编码（可选或只读）
- 排序序号（可选）
- 状态（默认启用）

**交互：**

- 提交成功后：
  - 关闭弹窗
  - 刷新树结构并自动选中新增类目节点

---

#### 2.1.6 状态与权限

**状态：**

- 启用：可用于新建 SPU
- 停用：不可再选择为新 SPU 类目，但保留历史引用

**权限控制（前端表现）：**

- 仅“主数据管理员 / 商品管理员”角色展示：
  - 「新增类目」「编辑」「删除」「属性模板编辑」等按钮
- 其他角色：仅可浏览类目树 + 右侧详情（全部只读）

---

#### 2.1.7 设计风格补充

- 整体风格统一为中后台风（Ant Design / Element），信息密度适中。
- 左侧树建议宽度固定（约 260–320px），右侧自适应。
- 使用 Tag / Badge 标记启用/停用态，提升可扫读性。
- 属性列表支持滚动；字段多时可折叠为“基础字段 / 高级配置”两组。

---

> 说明：  
> 本文档用于指导「类目管理」相关页面设计与前端开发，为 SPU 管理提供前置主数据支撑。
