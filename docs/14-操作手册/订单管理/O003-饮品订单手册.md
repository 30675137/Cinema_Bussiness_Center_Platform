# 用户操作手册 - 饮品订单管理系统

**Feature ID**: O003-beverage-order
**System**: 商品管理中台
**Module**: 订单管理 > 饮品订单
**Version**: 1.0.0
**Date**: 2025-12-28
**Target Audience**: 顾客(C端)、吧台工作人员(B端)、门店管理员

---

## 目录

1. [系统概述](#系统概述)
2. [C端用户操作指南](#c端用户操作指南)
3. [B端工作人员操作指南](#b端工作人员操作指南)
4. [常见问题FAQ](#常见问题faq)
5. [注意事项](#注意事项)

---

## 1. 系统概述

### 1.1 功能概述

饮品订单管理系统是影院商品管理中台的核心模块,支持顾客通过小程序自助点单、在线支付、查询订单状态,同时支持吧台工作人员接收订单、管理出品流程、BOM自动扣料、叫号通知顾客取餐。

### 1.2 核心功能

**C端(顾客小程序)**:
- ✅ 浏览饮品菜单(按分类查看)
- ✅ 查看饮品详情和规格选项
- ✅ 选择饮品规格并添加到订单
- ✅ 提交订单并完成支付
- ✅ 查看订单状态和取餐号
- ✅ 查询历史订单
- ✅ 一键复购

**B端(管理后台)**:
- ✅ 实时接收新订单(8秒轮询)
- ✅ 查看订单详情和BOM清单
- ✅ 管理订单状态(开始制作/完成/交付)
- ✅ BOM自动扣料和库存验证
- ✅ 叫号通知(Mock播报)
- ✅ 查看营业统计和热销饮品
- ✅ 导出销售报表

### 1.3 适用对象与权限

| 用户角色 | 权限 | 使用平台 |
|---------|------|---------|
| **顾客** | 浏览菜单、下单、支付、查看订单 | 微信小程序 / H5 |
| **吧台工作人员** | 接收订单、管理出品、叫号 | Web管理后台 |
| **门店管理员** | 查看统计、导出报表 | Web管理后台 |

---

## 2. C端用户操作指南

### 2.1 浏览饮品菜单

#### 操作步骤

1. **打开小程序**
   - 微信搜索"[影院商品管理中台]"小程序
   - 或扫描门店二维码进入

2. **浏览菜单**
   - 点击底部导航栏"点餐菜单"tab
   - 查看按分类组织的饮品列表(咖啡/茶饮/果汁等)
   - 切换顶部分类标签快速筛选

3. **查看饮品详情**
   - 点击任意饮品卡片进入详情页
   - 查看饮品大图、详细描述、营养信息
   - 浏览可选规格(大小/温度/甜度/配料)

#### 界面示意

```
┌─────────────────────────────┐
│  点餐菜单                    │
├─────────────────────────────┤
│ [咖啡] [茶饮] [果汁] [其他]   │
├─────────────────────────────┤
│ ┌──────┐  美式咖啡  ¥15     │
│ │[图片]│  经典美式咖啡      │
│ └──────┘  浓郁香醇         │
├─────────────────────────────┤
│ ┌──────┐  拿铁咖啡  ¥18     │
│ │[图片]│  香浓拿铁          │
│ └──────┘  奶香四溢         │
└─────────────────────────────┘
```

---

### 2.2 选择饮品并下单

#### 操作步骤

1. **选择规格**
   - 在饮品详情页,选择规格:
     - 大小: 小杯 / 中杯(+3元) / 大杯(+5元)
     - 温度: 热 / 冰
     - 甜度: 无糖 / 半糖 / 标准 / 多糖
     - 配料: 珍珠(+3元) / 椰果(+3元) / 无
   - 调整数量(点击+/-按钮)
   - 查看实时价格(基础价+规格调整)

2. **添加到订单**
   - 点击"加入订单"按钮
   - 查看底部购物车角标(已选数量)
   - 可继续选择其他饮品

3. **查看订单**
   - 点击"查看订单"或底部购物车图标
   - 进入订单确认页
   - 显示所有已选饮品(名称/规格/数量/小计)
   - 显示订单总价

4. **修改订单**
   - 在订单确认页,可以:
     - 修改饮品数量
     - 删除饮品
     - 添加顾客备注(如"少冰")

5. **提交订单**
   - 点击"提交订单"按钮
   - 系统生成订单号和取餐号
   - 跳转到支付页面

#### 界面示意

```
┌─────────────────────────────┐
│  订单确认                    │
├─────────────────────────────┤
│ 美式咖啡(大杯/热/半糖/珍珠)  │
│ 数量: [1] [+] [-]           │
│ 单价: ¥23  小计: ¥23       │
├─────────────────────────────┤
│ 备注: [少冰,谢谢           ]│
├─────────────────────────────┤
│ 订单总价: ¥23              │
│                             │
│      [提交订单]             │
└─────────────────────────────┘
```

---

### 2.3 完成支付

#### 操作步骤

1. **发起支付**
   - 订单提交成功后,显示支付页面
   - 显示订单号、总金额

2. **Mock支付(MVP阶段)**
   - 点击"支付"按钮
   - 系统自动模拟支付(500ms延迟)
   - 支付100%成功(MVP阶段设计)

3. **支付完成**
   - 显示支付成功页面
   - 显示订单号: `BORDT202512281000001234`
   - 显示取餐号: `D042`
   - 显示预计制作时间: `约3-5分钟`

#### 注意事项

⚠️ **MVP阶段说明**:
- 当前为Mock支付,点击即成功,不会实际扣费
- Phase 2将接入真实微信支付
- 所有订单数据真实有效

---

### 2.4 查看订单状态

#### 操作步骤

1. **进入订单详情**
   - 方式1: 支付成功后点击"查看订单"
   - 方式2: 底部导航栏"我的订单" → 点击订单

2. **查看订单信息**
   - 订单号: `BORDT202512281000001234`
   - 取餐号: `D042`(大字显示,易于识别)
   - 订单状态实时更新(8秒轮询):
     - 待制作: 工作人员尚未开始制作
     - 制作中: 正在制作,请耐心等待
     - 已完成: 制作完成,请到吧台取餐
     - 已交付: 订单已完成
   - 饮品列表: 名称/规格/数量
   - 订单总价
   - 下单时间

3. **收到通知**
   - 订单状态变更为"已完成"时:
     - 小程序推送消息:"您的订单已完成,取餐号D042,请到吧台取餐"
     - 手机震动提醒
   - 点击通知可直接跳转到订单详情

#### 订单状态流转

```
待支付 → 待制作 → 制作中 → 已完成 → 已交付
  ↓
已取消
```

---

### 2.5 查询历史订单

#### 操作步骤

1. **进入历史订单**
   - 点击底部导航栏"我的订单"
   - 显示历史订单列表(按时间倒序)

2. **筛选订单**
   - 顶部Tab切换:
     - 全部
     - 待制作
     - 制作中
     - 已完成
     - 已交付

3. **查看订单详情**
   - 点击任意订单进入详情页
   - 查看完整订单信息

4. **一键复购**
   - 在订单详情页点击"再来一单"
   - 系统自动填充相同的饮品和规格到当前订单
   - 可修改后直接提交

---

## 3. B端工作人员操作指南

⚠️ **MVP阶段简化说明**:
- **无需登录**: 工作人员直接访问管理后台,无需输入用户名和密码
- **安全前提**: 假设B端管理后台在内网或店内受信任网络环境访问
- **后续升级**: Phase 2版本将实现完整的工作人员账号体系和权限管理

### 3.1 接收新订单

#### 操作步骤

1. **打开管理后台**
   - 打开浏览器访问: `https://admin.cinema.com`
   - ⚠️ **MVP阶段无需登录,直接进入主界面**
   - 自动显示"待处理订单"页面

2. **实时接收订单**
   - 系统每8秒自动刷新订单列表
   - 新订单到达时:
     - 语音提示:"有新订单"(MVP阶段为浏览器音频)
     - 浏览器通知弹窗
     - 订单列表自动刷新

3. **查看订单列表**
   - 显示所有待处理订单(待制作 + 制作中)
   - 按下单时间升序排列(最早的在最上面)
   - 每个订单显示:
     - 订单号
     - 取餐号(大号显示)
     - 饮品名称和规格
     - 数量
     - 下单时间
     - 当前状态

#### 界面示意

```
┌─────────────────────────────────────────┐
│  待处理订单 (自动刷新中...)              │
├─────────────────────────────────────────┤
│ [待制作] D042  BORDT20251228...         │
│ 美式咖啡(大杯/热/半糖/珍珠) x2         │
│ 下单时间: 10:00  [开始制作]            │
├─────────────────────────────────────────┤
│ [制作中] D043  BORDT20251228...         │
│ 拿铁咖啡(中杯/冰/标准) x1              │
│ 制作时间: 10:05  [标记完成]            │
└─────────────────────────────────────────┘
```

---

### 3.2 开始制作订单

#### 操作步骤

1. **选择订单**
   - 点击订单卡片进入详情页
   - 或直接点击"开始制作"按钮

2. **查看订单详情**
   - 显示完整订单信息:
     - 饮品名称、规格、数量
     - 顾客备注(如"少冰")
     - BOM清单(所需原料):
       - 咖啡豆: 40g (当前库存: 500g)
       - 牛奶: 400ml (当前库存: 5000ml)
       - 珍珠: 2份 (当前库存: 50份)

3. **点击"开始制作"**
   - 系统自动触发BOM扣料:
     - 验证库存充足性
     - 扣减原料库存(咖啡豆-40g, 牛奶-400ml, 珍珠-2份)
     - 更新订单状态为"制作中"
   - 显示扣料结果:
     - 成功: "BOM扣料成功,已开始制作"
     - 失败: "库存不足: 咖啡豆库存仅剩10g < 需求40g,请补货"

4. **制作饮品**
   - 根据BOM清单准备原料
   - 按照制作步骤完成饮品

#### 库存不足处理

如果BOM扣料失败(库存不足):

1. **查看缺料详情**
   - 系统显示具体缺料项:
     - 咖啡豆: 可用10g < 需求40g
     - 牛奶: 可用100ml < 需求400ml

2. **处理方式**
   - 方式1: 补货后重新开始制作
   - 方式2: 标记订单为"缺料",通知顾客
   - 方式3: 取消订单并退款(需管理员审批)

---

### 3.3 完成订单并叫号

#### 操作步骤

1. **制作完成**
   - 饮品制作完成后,点击"标记完成"按钮
   - 系统更新订单状态为"已完成"

2. **触发叫号**
   - 系统自动触发叫号通知:
     - B端: 显示"已叫号"状态,Mock语音播报(仅显示,不实际播放)
     - C端: 小程序推送通知 + 手机震动

3. **顾客取餐**
   - 顾客到吧台出示取餐号: `D042`
   - 工作人员核对取餐号和订单
   - 交付饮品后,点击"已交付"按钮
   - 订单状态变更为"已交付"

#### 叫号系统说明

⚠️ **MVP阶段说明**:
- 当前为Mock语音播报,仅在B端显示"已叫号"状态
- 实际叫号需工作人员人工播报: "D042号,您的饮品已好,请取餐"
- Phase 2将接入真实TTS语音叫号系统

---

### 3.4 查看营业统计

#### 操作步骤(仅管理员)

1. **进入统计页面**
   - 点击左侧导航"营业统计"

2. **查看统计数据**
   - 选择时间范围:
     - 今日
     - 本周
     - 本月
     - 自定义日期范围
   - 显示数据:
     - 订单数量: 85单
     - 销售额: ¥3,250
     - 平均客单价: ¥38.24
     - 订单状态分布(饼图):
       - 已交付: 67单
       - 待制作: 5单
       - 制作中: 3单
       - 已完成: 10单
     - 热销饮品排行:
       1. 美式咖啡: 45杯, ¥900
       2. 拿铁咖啡: 30杯, ¥720
       3. 珍珠奶茶: 20杯, ¥500

3. **导出报表**
   - 点击"导出Excel"按钮
   - 选择日期范围
   - 下载Excel文件,包含:
     - 订单明细(订单号/时间/饮品/金额/状态)
     - 销售汇总(按饮品/按日期)
     - 原料消耗统计(BOM扣料记录)

---

## 4. 常见问题FAQ

### 4.1 C端用户常见问题

#### Q1: 支付后如何查看取餐号?

**A**: 支付成功后,系统会自动显示取餐号(如D042),同时也可以在"我的订单"中查看。取餐号会大字号显示,方便识别。

---

#### Q2: 订单状态一直是"待制作",怎么办?

**A**: 订单状态每8秒自动刷新。如果超过10分钟仍未变化,可能是高峰期订单较多,请耐心等待或联系吧台工作人员。

---

#### Q3: 可以取消已支付的订单吗?

**A**: 订单状态为"待制作"时可以申请取消,系统会自动退款。如果已进入"制作中"状态,需联系工作人员处理。

---

#### Q4: 为什么没有收到叫号通知?

**A**: 请检查:
1. 小程序通知权限是否开启(微信设置 → 小程序 → 通知管理)
2. 手机网络是否正常
3. 小程序是否运行在后台(需打开小程序才能收到通知)

如果仍无法收到,请留意吧台语音叫号或主动查询订单状态。

---

#### Q5: "再来一单"功能如何使用?

**A**: 在"我的订单"中点击任意历史订单 → 点击"再来一单" → 系统自动填充相同的饮品和规格 → 可修改后提交新订单。

---

### 4.2 B端工作人员常见问题

#### Q6: BOM扣料失败提示"库存不足",怎么处理?

**A**:
1. 查看缺料详情(系统会显示具体缺料项)
2. 补货后重新点击"开始制作"
3. 如果无法及时补货,可以:
   - 标记订单为"缺料"状态
   - 联系顾客更换饮品或退款

---

#### Q7: 新订单通知没有声音,怎么办?

**A**: 请检查:
1. 浏览器是否允许播放声音(Chrome设置 → 网站设置 → 声音)
2. 电脑音量是否打开
3. 浏览器标签页是否在前台(后台Tab可能不播放声音)

---

#### Q8: 如何查看订单的BOM清单?

**A**: 点击订单卡片进入详情页 → 滚动到"BOM清单"区域 → 显示所需原料、用量、当前库存。

---

#### Q9: 订单列表刷新太慢,怎么办?

**A**:
1. 系统默认8秒自动刷新
2. 可以手动点击"刷新"按钮立即刷新
3. 如果网络慢,可以检查网络连接

---

#### Q10: 误操作标记了"已完成",如何撤销?

**A**: MVP阶段暂不支持撤销操作。如误操作,请联系管理员手动修改订单状态,或重新开始制作新订单。

---

## 5. 注意事项

### 5.1 C端用户注意事项

⚠️ **重要提示**:

1. **支付前请确认**:
   - 饮品名称、规格、数量是否正确
   - 订单总价是否准确
   - 提交后无法修改规格

2. **取餐号务必记住**:
   - 取餐号格式: D001-D999
   - 建议截图保存或记在手机备忘录
   - 取餐时需出示取餐号

3. **高峰期预留时间**:
   - 高峰期(午餐/晚餐时段)订单较多
   - 预计制作时间可能延长至10-15分钟
   - 建议提前下单

4. **库存不足情况**:
   - 部分饮品可能临时缺货
   - 系统会标记"暂时缺货",无法下单
   - 可选择其他饮品或稍后再试

### 5.2 B端工作人员注意事项

⚠️ **重要提示**:

1. **及时处理订单**:
   - 订单按下单时间排序,优先处理最早订单
   - 避免顾客长时间等待

2. **库存管理**:
   - 定期检查原料库存
   - 库存低于安全库存时及时补货
   - 避免BOM扣料失败影响出品

3. **准确核对**:
   - 制作前仔细核对订单详情
   - 注意顾客备注(如"少冰""多糖")
   - 避免制作错误

4. **叫号及时**:
   - 饮品完成后立即标记"已完成"
   - 及时叫号,避免顾客遗漏

5. **数据安全**:
   - 不得泄露顾客订单信息
   - 定期备份营业数据

### 5.3 系统限制说明

⚠️ **MVP阶段限制**:

1. **B端无需登录**: 工作人员直接访问管理后台,无需输入账号密码(假设内网环境)
2. **Mock支付**: 当前支付为模拟实现,不会实际扣费
3. **Mock叫号**: 语音叫号需工作人员人工播报
4. **轮询刷新**: 订单状态8秒刷新一次,非实时推送
5. **无退款功能**: 订单取消后暂不支持自动退款,需手动处理

**Phase 2升级计划**:
- 实现完整的B端工作人员账号体系和权限管理
- 接入真实微信支付
- 接入TTS语音叫号系统
- 升级为WebSocket实时推送
- 实现自动退款功能

---

## 6. 联系方式

如有问题或建议,请联系:

- **技术支持**: support@cinema.com
- **客服热线**: 400-800-8888
- **工作时间**: 9:00-18:00(周一至周五)
- **在线反馈**: 小程序 → 设置 → 意见反馈

---

**手册结束**
